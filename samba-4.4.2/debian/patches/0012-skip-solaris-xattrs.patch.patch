From 5b0df6ab858681bb1fbf1025315fb1ea6c3d3c41 Mon Sep 17 00:00:00 2001
From: Justin Maggard <jmaggard10@gmail.com>
Date: Fri, 30 Jan 2015 12:10:38 -0800
Subject: [PATCH 12/19] Skip Solaris xattrs

Skip Solaris xattr's, to improve directory listing performance on very large directories.

---
 source3/smbd/trans2.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/source3/smbd/trans2.c b/source3/smbd/trans2.c
index 16498b3..a09be03 100644
--- a/source3/smbd/trans2.c
+++ b/source3/smbd/trans2.c
@@ -141,6 +141,11 @@ bool samba_private_attr_name(const char *unix_ea_name)
 			strlen(SAMBA_XATTR_DOSSTREAM_PREFIX)) == 0) {
 		return true;
 	}
+#ifdef SUNOS5
+	if (strncasecmp_m(unix_ea_name, "SUNW", 4) == 0) {
+		return true;
+	}
+#endif
 	return false;
 }
 
-- 
1.9.1

