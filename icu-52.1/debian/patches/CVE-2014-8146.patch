Description: add overflow fix
 Under certain conditions isolateCount is incremented too many times, which
 results in several out of bounds writes.
Origin: upstream, http://bugs.icu-project.org/trac/changeset/37162
Author: Michael Ow <mow@us.ibm.com>
Bug-Debian: https://bugs.debian.org/784773
Last-Update: 2015-03-06

---

--- icu-52.1.orig/source/common/ubidi.c
+++ icu-52.1/source/common/ubidi.c
@@ -2049,7 +2049,7 @@ resolveImplicitLevels(UBiDi *pBiDi,
     /* The isolates[] entries contain enough information to
        resume the bidi algorithm in the same state as it was
        when it was interrupted by an isolate sequence. */
-    if(dirProps[start]==PDI) {
+    if(dirProps[start]==PDI  && pBiDi->isolateCount >= 0) {
         start1=pBiDi->isolates[pBiDi->isolateCount].start1;
         stateImp=pBiDi->isolates[pBiDi->isolateCount].stateImp;
         levState.state=pBiDi->isolates[pBiDi->isolateCount].state;
