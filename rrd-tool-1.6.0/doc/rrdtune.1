.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "RRDTUNE 1"
.TH RRDTUNE 1 "2016-04-19" "1.6.0" "rrdtool"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
rrdtune \- Modify some basic properties of a Round Robin Database
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBrrdtool\fR \fBtune\fR \fIfilename\fR
[\fB\-\-heartbeat\fR|\fB\-h\fR\ \fIds-name\fR:\fIheartbeat\fR]
[\fB\-\-minimum\fR|\fB\-i\fR\ \fIds-name\fR:\fImin\fR]
[\fB\-\-maximum\fR|\fB\-a\fR\ \fIds-name\fR:\fImax\fR]
[\fB\-\-data\-source\-type\fR|\fB\-d\fR\ \fIds-name\fR:\fI\s-1DST\s0\fR]
[\fB\-\-data\-source\-rename\fR|\fB\-r\fR\ \fIold-name\fR:\fInew-name\fR]
[\fB\-\-deltapos\fR|\fB\-p\fR\ \fIscale-value\fR]
[\fB\-\-deltaneg\fR|\fB\-n\fR\ \fIscale-value\fR]
[\fB\-\-failure\-threshold\fR|\fB\-f\fR\ \fIfailure-threshold\fR]
[\fB\-\-window\-length\fR|\fB\-w\fR\ \fIwindow-length\fR]
[\fB\-\-alpha\fR|\fB\-x\fR\ \fIadaption-parameter\fR]
[\fB\-\-beta\fR|\fB\-y\fR\ \fIadaption-parameter\fR]
[\fB\-\-gamma\fR|\fB\-z\fR\ \fIadaption-parameter\fR]
[\fB\-\-gamma\-deviation\fR|\fB\-v\fR\ \fIadaption-parameter\fR]
[\fB\-\-smoothing\-window\fR|\fB\-s\fR\ \fIfraction-of-season\fR]
[\fB\-\-smoothing\-window\-deviation\fR|\fB\-S\fR\ \fIfraction-of-season\fR]
[\fB\-\-aberrant\-reset\fR|\fB\-b\fR\ \fIds-name\fR]
[\fB\-\-step\fR|\fB\-t\fR\ \fInewstep\fR]
[\fB\-\-daemon\fR|\fB\-D\fR\ \fIaddress\fR]
[\fB\s-1DEL:\s0\fR\fIds-name\fR]
[\fB\s-1DS:\s0\fR\fIds-spec\fR]
[\fB\s-1DELRRA:\s0\fR\fIindex\fR]
[\fB\s-1RRA:\s0\fR\fIrra-spec\fR]
[\fBRRA#\fR\fIindex\fR:[+\-=]<number]>
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The tune option allows you to alter some of the basic configuration
values stored in the header area of a Round Robin Database (\fB\s-1RRD\s0\fR).
.PP
One application of the \fBtune\fR function is to relax the
validation rules on an \fB\s-1RRD\s0\fR. This allows you to fill a new \fB\s-1RRD\s0\fR with
data available in larger intervals than what you would normally want
to permit. Be very careful with tune operations for \s-1COMPUTE\s0 data sources.
Setting the \fImin\fR, \fImax\fR, and  \fIheartbeat\fR for a \s-1COMPUTE\s0 data source
without changing the data source type to a non-COMPUTE \fB\s-1DST\s0\fR \s-1WILL\s0 corrupt
the data source header in the \fB\s-1RRD\s0\fR.
.PP
A second application of the \fBtune\fR function is to set or alter parameters
used by the specialized function \fBRRAs\fR for aberrant behavior detection.
.PP
Still another application is to add or remove data sources (\s-1DS\s0) or 
add / remove or alter some aspects of round-robin archives (\s-1RRA\s0). These operations 
are not really done in-place, but rather generate a new \s-1RRD\s0 file internally and 
move it over the original file. Data is kept intact during theses operations.
For even more in-depth modifications you may review the 
\&\fB\-\-source\fR and \fB\-\-template\fR options of the \fBcreate\fR function which  
allow you to combine multiple \s-1RRD\s0 files into a new one and which is even more clever 
in what data it is able to keep or \*(L"regenerate\*(R".
.IP "\fIfilename\fR" 8
.IX Item "filename"
The name of the \fB\s-1RRD\s0\fR you want to tune.
.IP "\fB\-\-heartbeat\fR|\fB\-h\fR\ \fIds-name\fR:\fIheartbeat\fR" 8
.IX Item "--heartbeat|-hds-name:heartbeat"
modify the \fIheartbeat\fR of a data source. By setting this to a high
value the \s-1RRD\s0 will accept things like one value per day.
.IP "\fB\-\-minimum\fR|\fB\-i\fR\ \fIds-name\fR:\fImin\fR" 8
.IX Item "--minimum|-ids-name:min"
alter the minimum value acceptable as input from the data source.
Setting \fImin\fR to 'U' will disable this limit.
.IP "\fB\-\-maximum\fR|\fB\-a\fR\ \fIds-name\fR:\fImax\fR" 8
.IX Item "--maximum|-ads-name:max"
alter the maximum value acceptable as input from the data source.
Setting \fImax\fR to 'U' will disable this limit.
.IP "\fB\-\-data\-source\-type\fR|\fB\-d\fR\ \fIds-name\fR:\fI\s-1DST\s0\fR" 8
.IX Item "--data-source-type|-dds-name:DST"
alter the type \fB\s-1DST\s0\fR of a data source.
.IP "\fB\-\-data\-source\-rename\fR|\fB\-r\fR\ \fIold-name\fR:\fInew-name\fR" 8
.IX Item "--data-source-rename|-rold-name:new-name"
rename a data source.
.IP "\fB\-\-deltapos\fR|\fB\-p\fR\ \fIscale-value\fR" 8
.IX Item "--deltapos|-pscale-value"
Alter the deviation scaling factor for the upper bound of the
confidence band used internally to calculate violations for the
\&\s-1FAILURES \s0\fB\s-1RRA\s0\fR. The default value is 2. Note that this parameter is
not related to graphing confidence bounds which must be specified as a
\&\s-1CDEF\s0 argument to generate a graph with confidence bounds. The graph
scale factor need not to agree with the value used internally by the
\&\s-1FAILURES \s0\fB\s-1RRA\s0\fR.
.IP "\fB\-\-deltaneg\fR|\fB\-n\fR\ \fIscale-value\fR" 8
.IX Item "--deltaneg|-nscale-value"
Alter the deviation scaling factor for the lower bound of the confidence band
used internally to calculate violations for the \s-1FAILURES \s0\fB\s-1RRA\s0\fR. The default
value is 2. As with \fB\-\-deltapos\fR, this argument is unrelated to the scale
factor chosen when graphing confidence bounds.
.IP "\fB\-\-failure\-threshold\fR|\fB\-f\fR\ \fIfailure-threshold\fR" 8
.IX Item "--failure-threshold|-ffailure-threshold"
Alter the number of confidence bound violations that constitute a failure for
purposes of the \s-1FAILURES \s0\fB\s-1RRA\s0\fR. This must be an integer less than or equal to
the window length of the \s-1FAILURES \s0\fB\s-1RRA\s0\fR. This restriction is not verified by
the tune option, so one can reset failure-threshold and window-length
simultaneously. Setting this option will reset the count of violations to 0.
.IP "\fB\-\-window\-length\fR|\fB\-w\fR\ \fIwindow-length\fR" 8
.IX Item "--window-length|-wwindow-length"
Alter the number of time points in the temporal window for determining
failures. This must be an integer greater than or equal to the window
length of the \s-1FAILURES \s0\fB\s-1RRA\s0\fR and less than or equal to 28. Setting
this option will reset the count of violations to 0.
.IP "\fB\-\-alpha\fR|\fB\-x\fR\ \fIadaption-parameter\fR" 8
.IX Item "--alpha|-xadaption-parameter"
Alter the intercept adaptation parameter for the Holt-Winters
forecasting algorithm. This parameter must be between 0 and 1.
.IP "\fB\-\-beta\fR|\fB\-y\fR\ \fIadaption-parameter\fR" 8
.IX Item "--beta|-yadaption-parameter"
Alter the slope adaptation parameter for the Holt-Winters forecasting
algorithm. This parameter must be between 0 and 1.
.IP "\fB\-\-gamma\fR|\fB\-z\fR\ \fIadaption-parameter\fR" 8
.IX Item "--gamma|-zadaption-parameter"
Alter the seasonal coefficient adaptation parameter for the \s-1SEASONAL
\&\s0\fB\s-1RRA\s0\fR. This parameter must be between 0 and 1.
.IP "\fB\-\-gamma\-deviation\fR|\fB\-v\fR\ \fIadaption-parameter\fR" 8
.IX Item "--gamma-deviation|-vadaption-parameter"
Alter the seasonal deviation adaptation parameter for the \s-1DEVSEASONAL
\&\s0\fB\s-1RRA\s0\fR. This parameter must be between 0 and 1.
.IP "\fB\-\-smoothing\-window\fR|\fB\-s\fR\ \fIfraction-of-season\fR" 8
.IX Item "--smoothing-window|-sfraction-of-season"
Alter the size of the smoothing window for the \s-1SEASONAL \s0\fB\s-1RRA\s0\fR. This must
be between 0 and 1.
.IP "\fB\-\-smoothing\-window\-deviation\fR|\fB\-S\fR\ \fIfraction-of-season\fR" 8
.IX Item "--smoothing-window-deviation|-Sfraction-of-season"
Alter the size of the smoothing window for the \s-1DEVSEASONAL \s0\fB\s-1RRA\s0\fR. This must
be between 0 and 1.
.IP "\fB\-\-aberrant\-reset\fR|\fB\-b\fR\ \fIds-name\fR" 8
.IX Item "--aberrant-reset|-bds-name"
This option causes the aberrant behavior detection algorithm to reset
for the specified data source; that is, forget all it is has learnt so far.
Specifically, for the \s-1HWPREDICT\s0 or \s-1MHWPREDICT \s0\fB\s-1RRA\s0\fR, it sets the intercept and
slope coefficients to unknown. For the \s-1SEASONAL \s0\fB\s-1RRA\s0\fR, it sets all seasonal
coefficients to unknown. For the \s-1DEVSEASONAL \s0\fB\s-1RRA\s0\fR, it sets all seasonal
deviation coefficients to unknown. For the \s-1FAILURES \s0\fB\s-1RRA\s0\fR, it erases the
violation history. Note that reset does not erase past predictions
(the values of the \s-1HWPREDICT\s0 or \s-1MHWPREDICT \s0\fB\s-1RRA\s0\fR), predicted deviations (the
values of the \s-1DEVPREDICT \s0\fB\s-1RRA\s0\fR), or failure history (the values of the 
\&\s-1FAILURES \s0\fB\s-1RRA\s0\fR).  This option will function even if not all the listed 
\&\fBRRAs\fR are present.
.Sp
Due to the implementation of this option, there is an indirect impact on
other data sources in the \s-1RRD. A\s0 smoothing algorithm is applied to
\&\s-1SEASONAL\s0 and \s-1DEVSEASONAL\s0 values on a periodic basis. During bootstrap
initialization this smoothing is deferred. For efficiency, the implementation
of smoothing is not data source specific. This means that utilizing
reset for one data source will delay running the smoothing algorithm
for all data sources in the file. This is unlikely to have serious
consequences, unless the data being collected for the non-reset data sources
is unusually volatile during the reinitialization period of the reset
data source.
.Sp
Use of this tuning option is advised when the behavior of the data source
time series changes in a drastic and permanent manner.
.IP "\fB\-\-step\fR|\fB\-t\fR \fInewstep\fR" 8
.IX Item "--step|-t newstep"
Changes the step size of the \s-1RRD\s0 to newstep.
.Sp
\&\s-1TODO:\s0 add proper documentation
.IP "\fB\-\-daemon\fR|\fB\-D\fR \fIaddress\fR" 8
.IX Item "--daemon|-D address"
\&\fB\s-1NOTE\s0\fR: Because the \fB\-d\fR (small letter 'd') option was already taken, this 
function (unlike most other) uses the capital letter 'D' for the one-letter 
option to name the cache daemon.
.Sp
If given, \fBRRDTool\fR will try to connect to the caching daemon
rrdcached at \fIaddress\fR and will fail if the connection cannot be
established. If the connection is successfully established the data
for the \fIfilename\fR will be flushed before performing the
copy/modify operation. Afterwards the \fIfilename\fR will be
forgotten by the cache daemon, so that the next access using the
caching daemon will read the proper structure.
.Sp
This sequence of operations is designed to achieve a consistent overall 
result with respect to
\&\s-1RRD\s0 internal file consistency when using one of the \fB\s-1DS\s0\fR or \fB\s-1RRA\s0\fR changing 
operations (that is: the resulting file should always be a valid \s-1RRD\s0 file,
regardless of concurrent updates through the caching daemon).
Regarding data consistency such guarantees are not made: Without external 
synchronization concurrent updates may be lost.
.Sp
For a list of accepted formats, see the \fB\-l\fR option in the rrdcached manual.
.IP "\fB\s-1DEL:\s0\fR\fIds-name\fR" 8
.IX Item "DEL:ds-name"
Every data source named with a \s-1DEL\s0 specification will be removed.
The resulting \s-1RRD\s0 will miss both the definition and the data for that 
data source. Multiple \s-1DEL\s0 specifications are permitted.
.IP "\fB\s-1DS:\s0\fR\fIds-spec\fR" 8
.IX Item "DS:ds-spec"
For every such data source definition (for the exact syntax see the
\&\fBcreate\fR command), a new data source will be added to the \s-1RRD.\s0 Multiple \s-1DS \s0
specifications are permitted.
.IP "\fB\s-1DELRRA:\s0\fR\fIindex\fR" 8
.IX Item "DELRRA:index"
Removes the \s-1RRA\s0 with index \fIindex\fR. The index is zero-based, 
that is the very first \s-1RRA\s0 has index 0.
.IP "\fB\s-1RRA:\s0\fR\fIrra-spec\fR" 8
.IX Item "RRA:rra-spec"
For every such archive definition (for the exact syntax see the
\&\fBcreate\fR command), a new \s-1RRA\s0 will be added to the output
\&\s-1RRD.\s0 Multiple \s-1RRA\s0 specifications are permitted.
.IP "\fBRRA#\fR\fIindex\fR:[+\-=]<number>" 8
.IX Item "RRA#index:[+-=]<number>"
Adds/removes or sets the given number of rows for the \s-1RRA\s0 with index
<index>. The index is zero-based, that is the very first \s-1RRA\s0 has index 0.
.SH "EXAMPLE 1"
.IX Header "EXAMPLE 1"
\&\f(CW\*(C`rrdtool tune data.rrd \-h in:100000 \-h out:100000 \-h through:100000\*(C'\fR
.PP
Set the minimum required heartbeat for data sources 'in', 'out'
and 'through' to 10'000 seconds which is a little over one day in data.rrd.
This would allow to feed old data from \s-1MRTG\-2.0\s0 right into
RRDtool without generating *UNKNOWN* entries.
.SH "EXAMPLE 2"
.IX Header "EXAMPLE 2"
\&\f(CW\*(C`rrdtool tune monitor.rrd \-\-window\-length 5 \-\-failure\-threshold 3\*(C'\fR
.PP
If the \s-1FAILURES \s0\fB\s-1RRA\s0\fR is implicitly created, the default
window-length is 9 and the default failure-threshold is 7. This
command now defines a failure as 3 or more violations in a temporal
window of 5 time points.
.SH "EXAMPLE 3"
.IX Header "EXAMPLE 3"
\&\f(CW\*(C`rrdtool tune some.rrd DEL:a RRA#0:+10\*(C'\fR
.PP
Delete the data source named \fBa\fR and extend the very first archive by 10 rows.
This will in fact replace the input \s-1RRD\s0 with a new \s-1RRD\s0 keeping all existing data.
For most practical use cases this is identical to a real in-place modification.
.SH "AUTHORS"
.IX Header "AUTHORS"
Tobias Oetiker <tobi@oetiker.ch>, Peter Stamfest <peter@stamfest.at>
