.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-architecture 1 "15 de Agosto de 2009" "Proyecto Debian" "Herramientas de dpkg"
.SH NOMBRE
dpkg\-architecture \- Configurar y determinar la arquitectura para la
construcción de paquetes
.
.SH SINOPSIS
\fBdpkg\-architecture\fP [\fIopciones\fP] [\fIórdenes\fP]
.PP
.
.SH DESCRIPCIÓN
dpkg\-architecture facilita determinar y configurar la arquitectura de
construcción y de la máquina anfitrión para la construcción de un paquete.
.PP
La arquitectura de construcción siempre se determina con una invocación
externa a \fBdpkg\fP(1), y no se puede definir en la línea de órdenes.
.PP
Puede definir la arquitectura del anfitrión introduciendo una o ambas
opciones \fB\-a\fP y \fB\-t\fP. El valor por omisión es una invocación externa a
\fBgcc\fP(1), o la misma que la arquitectura de construcción en caso de no
disponer de \s-1CC\s0 o gcc. Es suficiente usar \fB\-a\fP o \fB\-t\fP, el valor del
otro se definirá con un valor predefinido adecuado. De hecho, a veces es
mejor definir sólo uno, ya que \fBdpkg\-architecture\fP le avisará si su opción
no encaja con la opción predefinida.
.
.SH ÓRDENES
.TP 
\fB\-l\fP
Muestra las variables de entorno, una por línea, con el formato
\fIVARIABLE=valor\fP. Esta es la acción predefinida.
.TP 
\fB\-e\fP\fIdebian\-architecture\fP
Revisa si la arquitectura es la misma. Por omisión, \fIdebian\-architecture\fP
se compara con la arquitectura del sistema Debian actual, el sistema
anfitrión. Esta acción no expande los comodines de arquitectura. La orden
finaliza con un estado de salida de cero si coinciden, y de 1 en caso
contrario.
.TP 
\fB\-i\fP\fIcomodín\-arquitectura\fP
Revisa la identidad de la arquitectura expandiendo \fIcomodin\-arquitectura\fP
como un comodín de arquitectura, y comparándola con la arquitectura del
sistema Debian actual. La orden finaliza con un estado de salida de cero si
coincide, y de 1 en caso contrario.
.TP 
\fB\-q\fP\fInombre\-variable\fP
Muestra el valor de una única variable.
.TP 
\fB\-s\fP
Muestra una orden «export». Se puede usar para definir las variables de
entorno mediante eval.
.TP 
\fB\-u\fP
Muestra una orden similar a \fB\-s\fP, pero para eliminar la definición
(«unset») de todas las variables.
.TP 
\fB\-c\fP\fI orden\fP
Ejecuta una \fIorden\fP en un entorno cuyas variables ya están definidas con un
valor predefinido.
.TP 
\fB\-L\fP
Muestra una lista de nombres de arquitectura válidos.
.TP 
\fB\-\-help\fP
Muestra el modo de uso y termina.
.TP 
\fB\-\-version\fP
Muestra la versión y termina.
.
.SH OPCIONES
.TP 
\fB\-a\fP\fIdebian\-architecture\fP
Define la arquitectura de Debian.
.TP 
\fB\-t\fP\fItipo\-sistema\-gnu\fP
Define el tipo de sistema GNU.
.TP 
\fB\-f\fP
Los scripts respetan los valores de variables de entorno preexistentes que
tienen el mismo nombre que los valores contenidos en el script (por ejemplo,
usados por \fBdpkg\-architecture\fP), a menos que se use esta marca de
forzado. Permite al usuario sobreescribir un valor, aún cuando la invocación
a \fBdpkg\-architecture\fP se encuentra en otro script (por ejemplo,
\fBdpkg\-buildpackage\fP(1)).
.
.SH TÉRMINOS
.IP "máquina de construcción" 4
La máquina en la que se construye el paquete.
.IP "máquina anfitrión" 4
La máquina para la cual se construye el paquete.
.IP "Arquitectura de Debian" 4
La cadena de la arquitectura de Debian, que especifica el árbol binario en
el archivo \s-1FTP\s0. Ejemplos: i386, sparc, hurd\-i386.
.IP "comodín de arquitectura" 4
Un comodín de arquitectura es una cadena especial de arquitectura que encaja
con cualquier arquitectura real del que es parte. La forma habitual es
<kernel>\-<cpu>. Ejemplos: linux\-any, any\-i386, hurd\-any.
.IP "tipo de sistema \s-1GNU\s0" 4
Una cadena de definición de arquitectura que consiste de dos partes
separadas por un guión: el procesador y el sistema. Ejemplos:
i386\-linux\-gnu, sparc\-linux\-gnu, i386\-gnu, x86_64\-netbsd.
.
.SH VARIABLES
Las siguientes variables se definen mediante \fBdpkg\-architecture\fP:
.IP \s-1DEB_BUILD_ARCH\s0 4
La arquitectura de Debian de la máquina de construcción.
.IP \s-1DEB_BUILD_ARCH_OS\s0 4
El nombre del sistema Debian de la máquina de construcción.
.IP \s-1DEB_BUILD_ARCH_CPU\s0 4
El nombre de Debian del procesador de la máquina de construcción.
.IP \s-1DEB_BUILD_ARCH_BITS\s0 4
El tamaño del puntero de la máquina de construcción, en bits.
.IP \s-1DEB_BUILD_ARCH_ENDIAN\s0 4
El nivel de «endianización» de la máquina de construcción, «little» o «big».
.IP \s-1DEB_BUILD_GNU_CPU\s0 4
La parte \s-1CPU\s0 de \s-1DEB_BUILD_GNU_TYPE\s0.
.IP \s-1DEB_BUILD_GNU_SYSTEM\s0 4
La parte de «System» de \s-1DEB_BUILD_GNU_TYPE\s0.
.IP \s-1DEB_BUILD_GNU_TYPE\s0 4
El tipo de sistema \s-1GNU\s0 de la máquina de construcción.
.IP \s-1DEB_HOST_ARCH\s0 4
La arquitectura de Debian de la máquina anfitrión.
.IP \s-1DEB_HOST_ARCH_OS\s0 4
El nombre de sistema Debian de la máquina anfitrión.
.IP \s-1DEB_HOST_ARCH_CPU\s0 4
El nombre del procesador Debian de la máquina anfitrión.
.IP \s-1DEB_HOST_ARCH_BITS\s0 4
El tamaño del puntero de la máquina anfitrión, en bits.
.IP \s-1DEB_HOST_ARCH_ENDIAN\s0 4
El nivel de «endianización» de la máquina anfitrión, «little» o «big».
.IP \s-1DEB_HOST_GNU_CPU\s0 4
La parte de \s-1CPU\s0 de \s-1DEB_HOST_GNU_TYPE\s0.
.IP \s-1DEB_HOST_GNU_SYSTEM\s0 4
La parte de «System» de \s-1DEB_HOST_GNU_TYPE\s0.
.IP \s-1DEB_HOST_GNU_TYPE\s0 4
El tipo de sistema \s-1GNU\s0 de la máquina anfitrión.
.
.SH DEBIAN/RULES
Las variables de entorno definidas por \fBdpkg\-architecture\fP se introducen a
\fIdebian/rules\fP como variables de «make» (consulte la documentación de
make). Por otra parte, no debería depender de ellos, ya que esto rompe la
invocación manual del script. En lugar de ello, se deberían iniciar mediante
\fBdpkg\-architecture\fP con la opción «\-q». Aquí hay algunos ejemplos, que
muestran también como mejorar la compatibilidad de su paquete con la
construcción para varias arquitecturas.
.PP

En lugar de:
.IP
.nf
ARCH=\`dpkg \-\-print\-architecture\`
configure $(\s-1ARCH\s0)\-linux
.fi
.PP
use lo siguiente:
.IP
.nf
\&\s-1DEB_BUILD_GNU_TYPE\s0 := $(shell dpkg\-architecture \-qDEB_BUILD_GNU_TYPE)
\&\s-1DEB_HOST_GNU_TYPE\s0 := $(shell dpkg\-architecture \-qDEB_HOST_GNU_TYPE)

configure \-\-build=$(\s-1DEB_BUILD_GNU_TYPE\s0) \-\-host=$(\s-1DEB_HOST_GNU_TYPE\s0)
.fi
.PP

En lugar de:
.IP
.nf
ARCH=\`dpkg \-\-print\-architecture\`
ifeq ($(\s-1ARCH\s0),alpha)
  ...
endif
.fi
.PP
use:
.IP
.nf
\&\s-1DEB_HOST_ARCH\s0 := $(shell dpkg\-architecture \-qDEB_HOST_ARCH)

ifeq ($(\s-1DEB_HOST_ARCH\s0),alpha)
  ...
endif
.fi
.PP
o si sólo precisa revisar el tipo de sistema o CPU, use las variables
«DEB_HOST_ARCH_OS» o «DEB_HOST_ARCH_CPU».
.PP
En general, invocar dpkg en el fichero de reglas («rules») para obtener la
información de arquitectura está obsoleto (a menos que desee ofrecer
compatibilidad con versiones anteriores, véase a continuación). La opción
«\-\-print\-architecture» es particularmente inestable, ya que existen
arquitecturas de Debian que no encajan con el nombre de un procesador.
.
.SH "COMPATIBILIDAD CON VERSIONES ANTERIORES"
Las variables «DEB_*_ARCH_BITS» y «DEB_*_ARCH_ENDIAN» se introdujeron a
partir de la versión 1.15.4 de dpkg\-dev. Su uso en \fIdebian/rules\fP requiere
una dependencia de construcción sobre dpkg\-dev (>= 1.15.4).
.PP
Las variables «DEB_HOST_ARCH_CPU» y «DEB_HOST_ARCH_OS» se introdujeron a
partir de la versión 1.13.2 de dpkg\-dev. Antes, los ficheros \fIdebian/rules\fP
solían revisar aquellos valores de «DEB_HOST_GNU_CPU» o «DEB_HOST_GNU_TYPE»
susceptibles de haber cambiado.
.PP
Se deberían actualizar aquellas partes de los ficheros \fIdebian/rules\fP que
revisan las variables que deciden el modo o el objetivo a compilar. Puede
usar el siguiente código si desea permitir la compatibilidad con versiones
anteriores de dpkg\-dev:
.IP
.nf
DEB_HOST_ARCH_CPU := $(shell dpkg\-architecture \-qDEB_HOST_ARCH_CPU 2>/dev/null)
DEB_HOST_ARCH_OS := $(shell dpkg\-architecture \-qDEB_HOST_ARCH_OS 2>/dev/null)

# Take account of old dpkg\-architecture output.
ifeq ($(DEB_HOST_ARCH_CPU),)
  DEB_HOST_ARCH_CPU := $(shell dpkg\-architecture \-qDEB_HOST_GNU_CPU)
  ifeq ($(DEB_HOST_ARCH_CPU),x86_64)
    DEB_HOST_ARCH_CPU := amd64
  endif
endif
ifeq ($(DEB_HOST_ARCH_OS),)
  DEB_HOST_ARCH_OS := $(subst \-gnu,,$(shell dpkg\-architecture \-qDEB_HOST_GNU_SYSTEM))
  ifeq ($(DEB_HOST_ARCH_OS),gnu)
    DEB_HOST_ARCH_OS := hurd
  endif
endif
.fi
.PP
Y de forma parecida con «DEB_BUILD_ARCH_CPU» y «DEB_BUILD_ARCH_OS».
.PP
Si desea la compatibilidad con versiones de dpkg\-dev que no incluían
\fBdpkg\-architecture\fP, puede usar lo siguiente:
.IP
.nf
\&\s-1DEB_BUILD_ARCH\s0 := $(shell dpkg \-\-print\-architecture)
\&\s-1DEB_BUILD_GNU_CPU\s0 := $(patsubst hurd\-%,%,$(\s-1DEB_BUILD_ARCH\s0))
ifeq ($(filter\-out hurd\-%,$(\s-1DEB_BUILD_ARCH\s0)),)
  \s-1DEB_BUILD_GNU_SYSTEM\s0 := gnu
else
  \s-1DEB_BUILD_GNU_SYSTEM\s0 := linux\-gnu
endif
DEB_BUILD_GNU_TYPE=$(\s-1DEB_BUILD_GNU_CPU\s0)\-$(\s-1DEB_BUILD_GNU_SYSTEM\s0)

\&\s-1DEB_HOST_ARCH\s0 := $(\s-1DEB_BUILD_ARCH\s0)
\&\s-1DEB_HOST_GNU_CPU\s0 := $(\s-1DEB_BUILD_GNU_CPU\s0)
\&\s-1DEB_HOST_GNU_SYSTEM\s0 := $(\s-1DEB_BUILD_GNU_SYSTEM\s0)
\&\s-1DEB_HOST_GNU_TYPE\s0 := $(\s-1DEB_BUILD_GNU_TYPE\s0)
.fi
.PP
Inserte un subconjunto de estas líneas al inicio del fichero «debian/rules»;
estos valores predefinidos se sobreescribirán en caso de usar
dpkg\-architecture.
.PP
No necesita el conjunto completo. Seleccione un conjunto consistente que
contenga los valores que usa en el fichero de reglas. Por ejemplo, si sólo
necesita la arquitectura Debian del sistema de destino, tiene suficiente con
«DEB_HOST_ARCH=\`dpkg \-\-print\-architecture\» (de hecho, esta es la
arquitectura de Debian de la máquina de construcción, pero recuerde que sólo
intentamos crear la compatibilidad con versiones anteriores que tienen una
compilación nativa).
.PP
Las opciones \fB\-e\fP y \fB\-i\fP aparecieron en recientes versiones de
\fBdpkg\-architecture\fP (a partir de la versión 1.13.13 de dpkg).
.
.SH EJEMPLOS
\fBdpkg\-buildpackage\fP acepta la opción \fB\-a\fP y la introduce a
\fBdpkg\-architecture\fP. Otros ejemplos:
.IP
CC=i386\-gnu\-gcc dpkg\-architecture \-c debian/rules build
.IP
eval \`dpkg\-architecture \-u\`
.PP
Revisa si una arquitectura equivale a la arquitectura actual o dada:
.IP
dpkg\-architecture \-elinux\-alpha
.IP
dpkg\-architecture \-amips \-elinux\-mips
.PP
Revisa si la arquitectura actual o introducida con «\-a» es de un sistema
Linux:
.IP
dpkg\-architecture \-ilinux\-any
.IP
dpkg\-architecture \-ai386 \-ilinux\-any
.
.SH FICHEROS
Todos los ficheros deben estar presentes para que \fBdpkg\-architecture\fP
funcione. Puede sobreescribir la ubicación en tiempo de ejecución mediante
la variable de entorno «DPKG_DATADIR».
.TP 
\fI/usr/share/dpkg/cputable\fP
Tabla de nombres de CPU conocidos y su correlación con su nombre GNU.
.TP 
\fI/usr/share/dpkg/ostable\fP
Tabla de sistemas operativos conocidos y su correlación con su nombre GNU.
.TP 
\fI/usr/share/dpkg/triplettable\fP
Correlación entre tuples de 3 de la arquitectura de Debian, y los nombres de
arquitectura de Debian.
.
.SH "VÉASE TAMBIÉN"
\fBdpkg\-buildpackage\fP(1), \fBdpkg\-cross\fP(1).
.
.SH AUTOR
\fBdpkg\-architecture\fP y su página de manual fueron escritos originalmente por
Marcus Brinkmann <brinkmd@debian.org>.

.SH "TRADUCTOR"
Rudy Godoy <rudy@kernel\-panik.org>,
Rubén Porras <nahoo@inicia.es>,
Bruno Barrera C. <bruno.barrera@igloo.cl>,
Carlos Izquierdo <gheesh@ertis.net>,
Esteban Manchado y
NOK.
Debian L10n Spanish <debian\-l10n\-spanish@lists.debian.org>.
.br
Revisiones por Santiago Vila <sanvila@unex.es>,
Javier Fernández\-Sanguino, Rubén Porras,
Luis Uribe y Omar Campagne.
