.\"
.\" ypmake(8)	Copyright (C) 1996, Olaf Kirch <okir@monad.swb.de>
.\"
.TH ypmake 8 "16 July 1996"
.\"------------------------------------------------------------------
.SH NAME
ypmake \- create NIS maps
.\"------------------------------------------------------------------
.SH SYNOPSIS
.B ypmake
.B [-fnvxMAS]
.BI "[-d " domain "]"
.BI "[-m " master "]"
.I maps...
.\"------------------------------------------------------------------
.SH DESCRIPTION
The
.I ypmake
utility helps create and maintain the maps of your NIS server. It is
written as a set of perl modules in order to speed up the process of map
generation.
.P
When called without any arguments,
.I ypmake
checks whether all maps are up to date relative to their source, and rebuilds
them if needed. See section MAPS below for what all means in this context.
.P
Alternatively, you may specify a list of map names to be rebuilt. Valid
targets include both specific maps such as
.BR passwd.byname ,
as well as groups of maps (called
.I map aliases
in this document), such as
.B passwd
or
.BR hosts .
.P
The source files from which maps are built default to the normal system
files such as
.B /etc/passwd
etc. However, you can override these by specifying alternative source files
in the
.B ypmake.conf
file in your
.B @(YPMAPDIR)
directory. This file can also be used to specify additional maps, and 
procedures how to build them. See
.BR ypmake.conf (5)
for details.
.\"------------------------------------------------------------------
.SH OPTIONS
.I ypmake
takes the following options:
.TP
.BI "-d " domain
Override the NIS domain. By default,
.I ypmake
uses the system-wide NIS domain name returned by
.BR domainname (8).
.TP
.BI "-m " master
By default, 
.I ypmake
will enter the local hostname (from
.BR hostname (1))
as the maps' NIS master. This option is intended for emergencies only,
in case you have to rebuild the maps on a slave server.
.TP
.B -f
Force the regeneration of all maps, regardless of whether they are newer
than their source files or not.
.TP
.B -n
Don't change any maps, just tell the user which would be rebuilt
.TP
.BI -c " confname"
Use the specified file as the configuaration file rather than
.BR @(YPMAPDIR)/ypmake.conf .
.TP
.B -v
Print the version string and exit.
.TP
.B -x
Debug mode. Instead of generating the map, dump its contents to stdout.
.TP
.B -M
Print a list of all map targets for the specified NIS domain.
.TP
.B -A
Print a list of all map aliases for the specified NIS domain.
.TP
.B -S
Print a list of source files user for all built-in maps.
.\"------------------------------------------------------------------
.SH MAPS
Currently,
.I ypmake
supports a fairly standard set of NIS maps. The list below shows the
maps used most commonly, along with their map alias.
To obtain the full list of supported maps and map aliases, invoke
.BR "ypmake -A" .
.nr XN \n(IN
.nr IN 12n	\" increase TP indentation
.P
.TP
.B hosts
.BR hosts.byname ", " hosts.byaddr .
.TP
.B networks
.BR networks.byname ", " networks.byaddr .
.TP
.B passwd
.BR passwd.byname ", " passwd.byuid .
.TP
.B group
.BR group.byname ", " group.bygid .
.TP
.B services
.BR services.byname .
.TP
.B protocols
.BR protocols.byname ", " protocols.bynumber .
.TP
.B rpc
.BR rpc.byname ", " rpc.bynumber .
.TP
.B netgroup
.BR netgroup.byuser ", " netgroup.byhost .
.TP
.B netid
.BR netid.byname
.TP
.B publickey
.BR publickey.byname .
.P
.nr IN \n(XN
The special map alias
.B default
refers to all maps given above, except the
.BR publickey " and " netid " maps.
.P
All maps are generated from the corresponding system configuration
file in the
.B /etc
directory, except for
.BR netid.byname ,
which is generated by combining data from
.BR /etc/passwd ", " /etc/group ", and " /etc/hosts ,
and
.BR ypservers ,
which is generated from
.BR /var/yp/ypservers .
.\"------------------------------------------------------------------
.SH "SEE ALSO
.BR ypmake.conf(5) .
.\"------------------------------------------------------------------
.SH FILES
.TP
.B @(YPMAPDIR)/ypmake.conf
The configuration file which lets you override some rules when
building NIS maps.
.TP
.BI @(YPMAPDIR)/ domain
Directory containing the maps for 
.IR domain .
.TP
.B @(YPBINDIR)/ypmake
Location of the
.I ypmake
script.
.TP
.B @(YPMODDIR)
Location of the perl include files that generate the individual maps.
.SH AUTHOR
Olaf Kirch, <okir@monad.swb.de>
