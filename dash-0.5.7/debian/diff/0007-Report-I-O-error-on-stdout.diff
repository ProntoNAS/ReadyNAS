From 2f6a5c87e01311cd6da701e6602329e6daa9997c Mon Sep 17 00:00:00 2001
From: Gerrit Pape <pape@smarden.org>
Date: Wed, 8 Jan 2014 12:29:44 +0000
Subject: Report I/O error on stdout

Suggested by Roger Leigh through
 http://bugs.debian.org/690473

Signed-off-by: Gerrit Pape <pape@smarden.org>
---
 src/eval.c |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/eval.c b/src/eval.c
index 7252463..863aa77 100644
--- a/src/eval.c
+++ b/src/eval.c
@@ -899,6 +899,8 @@ evalbltin(const struct builtincmd *cmd, int argc, char **argv, int flags)
 	else
 		status = (*cmd->builtin)(argc, argv);
 	flushall();
+	if (outerr(out1))
+		warnx("%s: I/O error", commandname);
 	status |= outerr(out1);
 	exitstatus = status;
 cmddone:
-- 
1.7.10.4

