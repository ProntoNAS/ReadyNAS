From 4c94222125529bf275b7288b387f9d8d8084a225 Mon Sep 17 00:00:00 2001
From: Justin Maggard <jmaggard@netgear.com>
Date: Wed, 12 Aug 2015 11:16:45 -0700
Subject: [PATCH 1/8] Silently skip YOUKU-NOTIFY packets.

---
 minissdpd.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/minissdpd.c b/minissdpd.c
index 6295af9..a1efcf5 100644
--- a/minissdpd.c
+++ b/minissdpd.c
@@ -482,6 +482,7 @@ containsForbiddenChars(const unsigned char * p, int len)
 
 #define METHOD_MSEARCH 1
 #define METHOD_NOTIFY 2
+#define METHOD_YOUKU 3
 
 /* ParseSSDPPacket() :
  * parse a received SSDP Packet and call
@@ -531,6 +532,8 @@ ParseSSDPPacket(int s, const char * p, ssize_t n,
 		method = METHOD_NOTIFY;
 		nts = NTS_SSDP_ALIVE;
 	}
+	else if(methodlen==12 && 0==memcmp(p, "YOUKU-NOTIFY", 12))
+		method = METHOD_YOUKU;
 	linestart = p;
 	while(linestart < p + n - 2) {
 		/* start parsing the line : detect line end */
@@ -666,6 +669,8 @@ ParseSSDPPacket(int s, const char * p, ssize_t n,
 	case METHOD_MSEARCH:
 		processMSEARCH(s, st, st_len, addr);
 		break;
+	case METHOD_YOUKU:
+		break;
 	default:
 		syslog(LOG_WARNING, "method %.*s, don't know what to do", methodlen, p);
 	}
-- 
1.9.1

