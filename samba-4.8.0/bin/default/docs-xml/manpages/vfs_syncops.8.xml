<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<refentry id="vfs_syncops.8">

<refmeta>
	<refentrytitle>vfs_syncops</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo class="source">Samba</refmiscinfo>
	<refmiscinfo class="manual">System Administration tools</refmiscinfo>
	<refmiscinfo class="version">4.8.0</refmiscinfo>
</refmeta>


<refnamediv>
	<refname>vfs_syncops</refname>
	<refpurpose>Ensure meta data operations are performed synchronously.</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis sepchar=" ">
		<literal>vfs objects = syncops</literal>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>DESCRIPTION</title>

	<para>This VFS module is part of the
	<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> suite.</para>

	<para>
	Some filesystems (even some journaled filesystems) require that a
	fsync() be performed on many meta data operations to ensure that the
	operation is guaranteed to remain in the filesystem after a power
	failure. This is particularly important for some cluster filesystems
	which are participating in a node failover system with clustered
	Samba. On those filesystems the <literal>vfs_syncops</literal> VFS module
	provides a way to perform those	operations safely.
	</para>

	<para>This module is stackable.</para>

</refsect1>

<refsect1>
	<title>CONFIGURATION</title>

	<para>
	Most of the performance loss with the <literal>vfs_syncops</literal>
	VFS module is in fsync on close(). You can disable that with
	<literal>syncops:onclose = no</literal> that can be set either globally
	or per share.
	</para>

	<para>
	On certain filesystems that only require the last data written to be
	fsync()'ed, you can disable the metadata synchronization of this module with
	<literal>syncops:onmeta = no</literal>. This option can be set either
	globally or per share.
	</para>

	<para>
	The <literal>vfs_syncops</literal> VFS module can also be disabled
	completely for a share with <literal>syncops:disable = true</literal>.
	</para>
</refsect1>

<refsect1>
	<title>EXAMPLES</title>

	<para>Add syncops functionality for [share]:</para>
<programlisting format="linespecific">
        <parameter>[share]</parameter>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="PATH" xlink:href="smb.conf.5.html#PATH">path = /data/share</link>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="VFSOBJECTS" xlink:href="smb.conf.5.html#VFSOBJECTS">vfs objects = syncops</link>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="SYNCOPS:ONCLOSE" xlink:href="smb.conf.5.html#SYNCOPS:ONCLOSE">syncops:onclose = no</link>
</programlisting>

</refsect1>

<refsect1>
	<title>VERSION</title>

	<para>This man page is part of version 4.8.0 of the Samba suite.
	</para>
</refsect1>

<refsect1>
	<title>AUTHOR</title>

	<para>The original Samba software and related utilities
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar
	to the way the Linux kernel is developed.</para>

</refsect1>

</refentry>
