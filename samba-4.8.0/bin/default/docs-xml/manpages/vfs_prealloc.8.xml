<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<refentry id="vfs_prealloc.8">

<refmeta>
	<refentrytitle>vfs_prealloc</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo class="source">Samba</refmiscinfo>
	<refmiscinfo class="manual">System Administration tools</refmiscinfo>
	<refmiscinfo class="version">4.8.0</refmiscinfo>
</refmeta>


<refnamediv>
	<refname>vfs_prealloc</refname>
	<refpurpose>preallocate matching files to a predetermined size</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis sepchar=" ">
		<literal>vfs objects = prealloc</literal>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>DESCRIPTION</title>

	<para>This VFS module is part of the
	<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> suite.</para>

	<para>The <literal>vfs_prealloc</literal> VFS module preallocates
	files to a specified size each time a new file is created. This
	is useful in environments where files are of a predetermined
	size will be written to a disk subsystem where extending file
	allocations is expensive.  </para>

	<para>This module is stackable.</para>

</refsect1>


<refsect1>
	<title>OPTIONS</title>

	<variablelist>

		<varlistentry>
		<term>prealloc:EXT = BYTES</term>
		<listitem>
		<para>Preallocate all files with the extension EXT to
		the size specified by BYTES.
		</para>

		<para>The following suffixes may be applied to BYTES:</para>
		<itemizedlist>
		<listitem><para><literal>K</literal> - BYTES is a number of kilobytes</para></listitem>
		<listitem><para><literal>M</literal> - BYTES is a number of megabytes</para></listitem>
		<listitem><para><literal>G</literal> - BYTES is a number of gigabytes</para></listitem>
		</itemizedlist>

		</listitem>
		</varlistentry>

	</variablelist>
</refsect1>

<refsect1>
	<title>EXAMPLES</title>

	<para>A process writes TIFF files to a Samba share, and the
	is known these files will almost always be around 4 megabytes
	(4194304 bytes): </para>

<programlisting format="linespecific">
        <parameter>[frames]</parameter>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="PATH" xlink:href="smb.conf.5.html#PATH">path = /data/frames</link>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="VFSOBJECTS" xlink:href="smb.conf.5.html#VFSOBJECTS">vfs objects = prealloc</link>
	<link xmlns:xlink="http://www.w3.org/1999/xlink" linkend="PREALLOC:TIFF" xlink:href="smb.conf.5.html#PREALLOC:TIFF">prealloc:tiff = 4M</link>
</programlisting>
</refsect1>

<refsect1>
	<title>CAVEATS</title>
	<para><literal>vfs_prealloc</literal> is not supported on all
	platforms and filesystems. Currently only XFS filesystems on
	Linux and IRIX are supported.
	</para>
</refsect1>

<refsect1>
	<title>VERSION</title>
	<para>This man page is part of version 4.8.0 of the Samba suite.
	</para>
</refsect1>

<refsect1>
	<title>AUTHOR</title>

	<para>The original Samba software and related utilities
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar
	to the way the Linux kernel is developed.</para>

</refsect1>

</refentry>
