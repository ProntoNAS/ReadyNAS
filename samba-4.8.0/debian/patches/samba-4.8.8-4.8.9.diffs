diff -Npur samba-4.8.8/WHATSNEW.txt samba-4.8.9/WHATSNEW.txt
--- samba-4.8.8/WHATSNEW.txt	2018-12-13 10:08:39.000000000 +0100
+++ samba-4.8.9/WHATSNEW.txt	2019-02-07 10:22:11.000000000 +0100
@@ -1,4 +1,89 @@
                    =============================
+                   Release Notes for Samba 4.8.9
+                         February 7, 2019
+                   =============================
+
+
+This is the latest stable release of the Samba 4.8 release series.
+
+
+Changes since 4.8.8:
+--------------------
+
+o  Jeremy Allison <jra@samba.org>
+   * BUG 11495: s3: lib: nmbname: Ensure we limit the NetBIOS name correctly.
+     CID: 1433607.
+
+o  Christian Ambach <ambi@samba.org>
+   * BUG 13199: s3:utils/smbget: Fix recursive download with empty source
+     directories.
+
+o  Tim Beale <timbeale@catalyst.net.nz>
+   * BUG 13736: s3:libsmb: cli_smb2_list() can sometimes fail initially on a
+     connection.
+   * BUG 13747: join: Throw CommandError instead of Exception for simple errors.
+
+o  Ralph Boehme <slow@samba.org>
+   * BUG 13688: Windows 2016 fails to restore previous version of a file from a
+     shadow_copy2 snapshot.
+   * BUG 13455: Restoring previous version of stream with vfs_shadow_copy2 fails
+     with NT_STATUS_OBJECT_NAME_INVALID.
+   * BUG 13736: s3: libsmb: Use smb2cli_conn_max_trans_size() in
+     cli_smb2_list().
+
+o  GÃ¼nther Deschner <gd@samba.org>
+   * BUG 13708: s3-vfs: Prevent NULL pointer dereference in vfs_glusterfs.
+   * BUG 13720: s3-smbd: Avoid assuming fsp is always intact after close_file
+     call.
+   * BUG 13725: s3-vfs-fruit,s3-vfs-streams_xattr: Add close call.
+   * BUG 13774: s3-vfs: Add glusterfs_fuse vfs module.
+
+o  Aaron Haslett <aaronhaslett@catalyst.net.nz>
+   * BUG 13738: dns: Changing onelevel search for wildcard to subtree.
+
+o  Stefan Metzmacher <metze@samba.org>
+   * BUG 13722: s3:auth_winbind: Ignore a missing winbindd as NT4 PDC/BDC
+     without trusts.
+   * BUG 13723: s3:auth_winbind: Return NT_STATUS_NO_LOGON_SERVERS if winbindd
+     is not available.
+   * BUG 13752: s4:messaging: Add support 'smbcontrol <pid> debug/debuglevel'.
+
+o  Anoop C S <anoopcs@redhat.com>
+   * BUG 13330: vfs_glusterfs: Adapt to changes in libgfapi signatures.
+   * BUG 13774: s3-vfs: Use ENOATTR in errno comparison for getxattr.
+
+o  Martin Schwenke <martin@meltin.net>
+   * BUG 13717: lib/util: Count a trailing line that doesn't end in a newline.
+
+o  Ralph Wuerthner <ralph.wuerthner@de.ibm.com>
+   * BUG 13741: vfs_fileid: Fix get_connectpath_ino.
+   * BUG 13744: vfs_fileid: Fix fsname_norootdir algorithm.
+
+
+#######################################
+Reporting bugs & Development Discussion
+#######################################
+
+Please discuss this release on the samba-technical mailing list or by
+joining the #samba-technical IRC channel on irc.freenode.net.
+
+If you do report problems then please try to send high quality
+feedback. If you don't provide vital information to help us track down
+the problem then you will probably be ignored.  All bug reports should
+be filed under the "Samba 4.1 and newer" product in the project's Bugzilla
+database (https://bugzilla.samba.org/).
+
+
+======================================================================
+== Our Code, Our Bugs, Our Responsibility.
+== The Samba Team
+======================================================================
+
+
+Release notes for older releases follow:
+----------------------------------------
+
+                   =============================
                    Release Notes for Samba 4.8.8
                          December 13, 2018
                    =============================
@@ -96,8 +181,8 @@ database (https://bugzilla.samba.org/).
 ======================================================================
 
 
-Release notes for older releases follow:
-----------------------------------------
+----------------------------------------------------------------------
+
 
                    =============================
                    Release Notes for Samba 4.8.7
diff -Npur samba-4.8.8/ctdb/doc/ctdb-etcd.7 samba-4.8.9/ctdb/doc/ctdb-etcd.7
--- samba-4.8.8/ctdb/doc/ctdb-etcd.7	2018-12-13 10:11:17.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb-etcd.7	2019-02-07 10:26:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-etcd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-ETCD" "7" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-ETCD" "7" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb-statistics.7 samba-4.8.9/ctdb/doc/ctdb-statistics.7
--- samba-4.8.8/ctdb/doc/ctdb-statistics.7	2018-12-13 10:11:16.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb-statistics.7	2019-02-07 10:26:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-statistics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-STATISTICS" "7" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-STATISTICS" "7" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb-tunables.7 samba-4.8.9/ctdb/doc/ctdb-tunables.7
--- samba-4.8.8/ctdb/doc/ctdb-tunables.7	2018-12-13 10:11:16.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb-tunables.7	2019-02-07 10:26:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-tunables
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-TUNABLES" "7" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-TUNABLES" "7" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb.1 samba-4.8.9/ctdb/doc/ctdb.1
--- samba-4.8.8/ctdb/doc/ctdb.1	2018-12-13 10:11:13.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb.1	2019-02-07 10:26:18.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb.7 samba-4.8.9/ctdb/doc/ctdb.7
--- samba-4.8.8/ctdb/doc/ctdb.7	2018-12-13 10:11:16.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb.7	2019-02-07 10:26:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "7" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "7" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb_diagnostics.1 samba-4.8.9/ctdb/doc/ctdb_diagnostics.1
--- samba-4.8.8/ctdb/doc/ctdb_diagnostics.1	2018-12-13 10:11:14.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb_diagnostics.1	2019-02-07 10:26:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdb_diagnostics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB_DIAGNOSTICS" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB_DIAGNOSTICS" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdb_mutex_ceph_rados_helper.7 samba-4.8.9/ctdb/doc/ctdb_mutex_ceph_rados_helper.7
--- samba-4.8.8/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-12-13 10:11:17.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2019-02-07 10:26:22.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: Ceph RADOS Mutex
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CEPH RADOS MUTEX" "7" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CEPH RADOS MUTEX" "7" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdbd.1 samba-4.8.9/ctdb/doc/ctdbd.1
--- samba-4.8.8/ctdb/doc/ctdbd.1	2018-12-13 10:11:13.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdbd.1	2019-02-07 10:26:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdbd.conf.5 samba-4.8.9/ctdb/doc/ctdbd.conf.5
--- samba-4.8.8/ctdb/doc/ctdbd.conf.5	2018-12-13 10:11:15.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdbd.conf.5	2019-02-07 10:26:21.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd.conf
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD\&.CONF" "5" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD\&.CONF" "5" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ctdbd_wrapper.1 samba-4.8.9/ctdb/doc/ctdbd_wrapper.1
--- samba-4.8.8/ctdb/doc/ctdbd_wrapper.1	2018-12-13 10:11:15.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ctdbd_wrapper.1	2019-02-07 10:26:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd_wrapper
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD_WRAPPER" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD_WRAPPER" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ltdbtool.1 samba-4.8.9/ctdb/doc/ltdbtool.1
--- samba-4.8.8/ctdb/doc/ltdbtool.1	2018-12-13 10:11:14.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ltdbtool.1	2019-02-07 10:26:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ltdbtool
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "LTDBTOOL" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "LTDBTOOL" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/onnode.1 samba-4.8.9/ctdb/doc/onnode.1
--- samba-4.8.8/ctdb/doc/onnode.1	2018-12-13 10:11:15.000000000 +0100
+++ samba-4.8.9/ctdb/doc/onnode.1	2019-02-07 10:26:20.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: onnode
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "ONNODE" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "ONNODE" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/ctdb/doc/ping_pong.1 samba-4.8.9/ctdb/doc/ping_pong.1
--- samba-4.8.8/ctdb/doc/ping_pong.1	2018-12-13 10:11:14.000000000 +0100
+++ samba-4.8.9/ctdb/doc/ping_pong.1	2019-02-07 10:26:19.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ping_pong
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "PING_PONG" "1" "12/13/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "PING_PONG" "1" "02/07/2019" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/cifsdd.8 samba-4.8.9/docs/manpages/cifsdd.8
--- samba-4.8.8/docs/manpages/cifsdd.8	2018-12-13 10:11:19.000000000 +0100
+++ samba-4.8.9/docs/manpages/cifsdd.8	2019-02-07 10:26:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: cifsdd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "CIFSDD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "CIFSDD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/dbwrap_tool.1 samba-4.8.9/docs/manpages/dbwrap_tool.1
--- samba-4.8.8/docs/manpages/dbwrap_tool.1	2018-12-13 10:11:19.000000000 +0100
+++ samba-4.8.9/docs/manpages/dbwrap_tool.1	2019-02-07 10:26:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: dbwrap_tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "DBWRAP_TOOL" "1" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "DBWRAP_TOOL" "1" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -301,7 +301,7 @@ dbwrap_tool
 Use with caution!
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/eventlogadm.8 samba-4.8.9/docs/manpages/eventlogadm.8
--- samba-4.8.8/docs/manpages/eventlogadm.8	2018-12-13 10:11:19.000000000 +0100
+++ samba-4.8.9/docs/manpages/eventlogadm.8	2019-02-07 10:26:24.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: eventlogadm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "EVENTLOGADM" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "EVENTLOGADM" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -339,7 +339,7 @@ Filter messages from the system log into
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/findsmb.1 samba-4.8.9/docs/manpages/findsmb.1
--- samba-4.8.8/docs/manpages/findsmb.1	2018-12-13 10:11:19.000000000 +0100
+++ samba-4.8.9/docs/manpages/findsmb.1	2019-02-07 10:26:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: findsmb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "FINDSMB" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "FINDSMB" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -119,7 +119,7 @@ IP ADDR         NETBIOS NAME   WORKGROUP
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/idmap_ad.8 samba-4.8.9/docs/manpages/idmap_ad.8
--- samba-4.8.8/docs/manpages/idmap_ad.8	2018-12-13 10:11:20.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_ad.8	2019-02-07 10:26:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ad
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_AD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_AD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_autorid.8 samba-4.8.9/docs/manpages/idmap_autorid.8
--- samba-4.8.8/docs/manpages/idmap_autorid.8	2018-12-13 10:11:20.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_autorid.8	2019-02-07 10:26:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_autorid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_AUTORID" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_AUTORID" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_hash.8 samba-4.8.9/docs/manpages/idmap_hash.8
--- samba-4.8.8/docs/manpages/idmap_hash.8	2018-12-13 10:11:20.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_hash.8	2019-02-07 10:26:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_hash
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_HASH" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_HASH" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_ldap.8 samba-4.8.9/docs/manpages/idmap_ldap.8
--- samba-4.8.8/docs/manpages/idmap_ldap.8	2018-12-13 10:11:20.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_ldap.8	2019-02-07 10:26:25.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ldap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_LDAP" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_LDAP" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_nss.8 samba-4.8.9/docs/manpages/idmap_nss.8
--- samba-4.8.8/docs/manpages/idmap_nss.8	2018-12-13 10:11:20.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_nss.8	2019-02-07 10:26:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_nss
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_NSS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_NSS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_rfc2307.8 samba-4.8.9/docs/manpages/idmap_rfc2307.8
--- samba-4.8.8/docs/manpages/idmap_rfc2307.8	2018-12-13 10:11:21.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_rfc2307.8	2019-02-07 10:26:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rfc2307
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_RFC2307" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_RFC2307" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_rid.8 samba-4.8.9/docs/manpages/idmap_rid.8
--- samba-4.8.8/docs/manpages/idmap_rid.8	2018-12-13 10:11:21.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_rid.8	2019-02-07 10:26:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_RID" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_RID" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_script.8 samba-4.8.9/docs/manpages/idmap_script.8
--- samba-4.8.8/docs/manpages/idmap_script.8	2018-12-13 10:11:21.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_script.8	2019-02-07 10:26:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_script
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_SCRIPT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_SCRIPT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_tdb.8 samba-4.8.9/docs/manpages/idmap_tdb.8
--- samba-4.8.8/docs/manpages/idmap_tdb.8	2018-12-13 10:11:21.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_tdb.8	2019-02-07 10:26:26.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_TDB" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/idmap_tdb2.8 samba-4.8.9/docs/manpages/idmap_tdb2.8
--- samba-4.8.8/docs/manpages/idmap_tdb2.8	2018-12-13 10:11:21.000000000 +0100
+++ samba-4.8.9/docs/manpages/idmap_tdb2.8	2019-02-07 10:26:27.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB2" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "IDMAP_TDB2" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/libsmbclient.7 samba-4.8.9/docs/manpages/libsmbclient.7
--- samba-4.8.8/docs/manpages/libsmbclient.7	2018-12-13 10:11:22.000000000 +0100
+++ samba-4.8.9/docs/manpages/libsmbclient.7	2019-02-07 10:26:27.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: libsmbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: 7
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "LIBSMBCLIENT" "7" "12/13/2018" "Samba 4\&.8\&.8" "7"
+.TH "LIBSMBCLIENT" "7" "02/07/2019" "Samba 4\&.8\&.9" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -86,7 +86,7 @@ parameter was not included in the URL\&.
 Watch this space for future updates\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/lmhosts.5 samba-4.8.9/docs/manpages/lmhosts.5
--- samba-4.8.8/docs/manpages/lmhosts.5	2018-12-13 10:11:22.000000000 +0100
+++ samba-4.8.9/docs/manpages/lmhosts.5	2019-02-07 10:26:27.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: lmhosts
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "LMHOSTS" "5" "12/13/2018" "Samba 4\&.8\&.8" "File Formats and Conventions"
+.TH "LMHOSTS" "5" "02/07/2019" "Samba 4\&.8\&.9" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ or
 /usr/local/samba/lib\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbclient\fR(1),
diff -Npur samba-4.8.8/docs/manpages/log2pcap.1 samba-4.8.9/docs/manpages/log2pcap.1
--- samba-4.8.8/docs/manpages/log2pcap.1	2018-12-13 10:11:22.000000000 +0100
+++ samba-4.8.9/docs/manpages/log2pcap.1	2019-02-07 10:26:27.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: log2pcap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "LOG2PCAP" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "LOG2PCAP" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -107,7 +107,7 @@ Convert to pcap using text2pcap:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "BUGS"
 .PP
 Only SMB data is extracted from the samba logs, no LDAP, NetBIOS lookup or other data\&.
diff -Npur samba-4.8.8/docs/manpages/mvxattr.1 samba-4.8.9/docs/manpages/mvxattr.1
--- samba-4.8.8/docs/manpages/mvxattr.1	2018-12-13 10:11:22.000000000 +0100
+++ samba-4.8.9/docs/manpages/mvxattr.1	2019-02-07 10:26:27.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: mvxattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "MVXATTR" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "MVXATTR" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -76,7 +76,7 @@ Force overwriting of destination xattr\&
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/net.8 samba-4.8.9/docs/manpages/net.8
--- samba-4.8.8/docs/manpages/net.8	2018-12-13 10:11:22.000000000 +0100
+++ samba-4.8.9/docs/manpages/net.8	2019-02-07 10:26:28.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: net
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "NET" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "NET" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/nmbd.8 samba-4.8.9/docs/manpages/nmbd.8
--- samba-4.8.8/docs/manpages/nmbd.8	2018-12-13 10:11:23.000000000 +0100
+++ samba-4.8.9/docs/manpages/nmbd.8	2019-02-07 10:26:28.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: nmbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "NMBD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "NMBD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -278,7 +278,7 @@ The debug log level of nmbd may be raise
 (SIGUSR[1|2] signals are no longer used since Samba 2\&.2)\&. This is to allow transient problems to be diagnosed, whilst still running at a normally low log level\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBinetd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/nmblookup.1 samba-4.8.9/docs/manpages/nmblookup.1
--- samba-4.8.8/docs/manpages/nmblookup.1	2018-12-13 10:11:23.000000000 +0100
+++ samba-4.8.9/docs/manpages/nmblookup.1	2019-02-07 10:26:28.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: nmblookup
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "NMBLOOKUP" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "NMBLOOKUP" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -214,7 +214,7 @@ nmblookup \-U samba\&.org \-R \*(AqIRIX#
 would query the WINS server samba\&.org for the domain master browser (1B name type) for the IRIX workgroup\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/ntlm_auth.1 samba-4.8.9/docs/manpages/ntlm_auth.1
--- samba-4.8.8/docs/manpages/ntlm_auth.1	2018-12-13 10:11:23.000000000 +0100
+++ samba-4.8.9/docs/manpages/ntlm_auth.1	2019-02-07 10:26:28.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: ntlm_auth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "NTLM_AUTH" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "NTLM_AUTH" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -421,7 +421,7 @@ If you\*(Aqre experiencing problems with
 the Microsoft Knowledge Base article #239869 and follow instructions described there\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/pam_winbind.8 samba-4.8.9/docs/manpages/pam_winbind.8
--- samba-4.8.8/docs/manpages/pam_winbind.8	2018-12-13 10:11:23.000000000 +0100
+++ samba-4.8.9/docs/manpages/pam_winbind.8	2019-02-07 10:26:29.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: 8
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND" "8" "12/13/2018" "Samba 4\&.8\&.8" "8"
+.TH "PAM_WINBIND" "8" "02/07/2019" "Samba 4\&.8\&.9" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -172,7 +172,7 @@ This is the profile path set in the prof
 \fBsmb.conf\fR(5)
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of Samba\&.
+This man page is part of version 4\&.8\&.9 of Samba\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/pam_winbind.conf.5 samba-4.8.9/docs/manpages/pam_winbind.conf.5
--- samba-4.8.8/docs/manpages/pam_winbind.conf.5	2018-12-13 10:11:24.000000000 +0100
+++ samba-4.8.9/docs/manpages/pam_winbind.conf.5	2019-02-07 10:26:29.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: 5
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND\&.CONF" "5" "12/13/2018" "Samba 4\&.8\&.8" "5"
+.TH "PAM_WINBIND\&.CONF" "5" "02/07/2019" "Samba 4\&.8\&.9" "5"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -137,7 +137,7 @@ Defines number of days before pam_winbin
 \fBsmb.conf\fR(5)
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of Samba\&.
+This man page is part of version 4\&.8\&.9 of Samba\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/pdbedit.8 samba-4.8.9/docs/manpages/pdbedit.8
--- samba-4.8.8/docs/manpages/pdbedit.8	2018-12-13 10:11:24.000000000 +0100
+++ samba-4.8.9/docs/manpages/pdbedit.8	2019-02-07 10:26:29.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: pdbedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "PDBEDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "PDBEDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -619,7 +619,7 @@ option "<name>" to value "<value>" from
 This command may be used only by root\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(5),
diff -Npur samba-4.8.8/docs/manpages/profiles.1 samba-4.8.9/docs/manpages/profiles.1
--- samba-4.8.8/docs/manpages/profiles.1	2018-12-13 10:11:24.000000000 +0100
+++ samba-4.8.9/docs/manpages/profiles.1	2019-02-07 10:26:29.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: profiles
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "PROFILES" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "PROFILES" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ Display brief usage message\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/rpcclient.1 samba-4.8.9/docs/manpages/rpcclient.1
--- samba-4.8.8/docs/manpages/rpcclient.1	2018-12-13 10:11:24.000000000 +0100
+++ samba-4.8.9/docs/manpages/rpcclient.1	2019-02-07 10:26:29.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: rpcclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "RPCCLIENT" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "RPCCLIENT" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -803,7 +803,7 @@ and
 that are incompatible for some commands or services\&. Additionally, the developers are sending reports to Microsoft, and problems found or reported to Microsoft are fixed in Service Packs, which may result in incompatibilities\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/samba-regedit.8 samba-4.8.9/docs/manpages/samba-regedit.8
--- samba-4.8.8/docs/manpages/samba-regedit.8	2018-12-13 10:11:24.000000000 +0100
+++ samba-4.8.9/docs/manpages/samba-regedit.8	2019-02-07 10:26:30.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba-regedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SAMBA\-REGEDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SAMBA\-REGEDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -207,7 +207,7 @@ The supplied password is the NT hash\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/samba-tool.8 samba-4.8.9/docs/manpages/samba-tool.8
--- samba-4.8.8/docs/manpages/samba-tool.8	2018-12-13 10:11:25.000000000 +0100
+++ samba-4.8.9/docs/manpages/samba-tool.8	2019-02-07 10:26:30.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba-tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SAMBA\-TOOL" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SAMBA\-TOOL" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -470,7 +470,7 @@ because the repsFrom/To objects are not
 Gives usage information\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.8 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/samba.7 samba-4.8.9/docs/manpages/samba.7
--- samba-4.8.8/docs/manpages/samba.7	2018-12-13 10:11:25.000000000 +0100
+++ samba-4.8.9/docs/manpages/samba.7	2019-02-07 10:26:30.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: Miscellanea
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SAMBA" "7" "12/13/2018" "Samba 4\&.8\&.8" "Miscellanea"
+.TH "SAMBA" "7" "02/07/2019" "Samba 4\&.8\&.9" "Miscellanea"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -145,6 +145,7 @@ is a helper utility for printing on prin
 .RS 4
 smbcontrol
 is a utility that can change the behaviour of running
+samba,
 smbd,
 nmbd
 and
@@ -237,7 +238,7 @@ https://lists\&.samba\&.org
 you can find a lot of information in the archives and you can subscribe to the samba list and ask for help or discuss things\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "CONTRIBUTIONS"
 .PP
 If you wish to contribute to the Samba project, then I suggest you join the Samba mailing list at
diff -Npur samba-4.8.8/docs/manpages/samba.8 samba-4.8.9/docs/manpages/samba.8
--- samba-4.8.8/docs/manpages/samba.8	2018-12-13 10:11:25.000000000 +0100
+++ samba-4.8.9/docs/manpages/samba.8	2019-02-07 10:26:30.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SAMBA" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SAMBA" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -198,7 +198,7 @@ The number and nature of diagnostics ava
 Most messages are reasonably self\-explanatory\&. Unfortunately, at the time this man page was created, there are too many diagnostics available in the source code to warrant describing each and every diagnostic\&. At this stage your best bet is still to grep the source code and inspect the conditions that gave rise to the diagnostics you are seeing\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBhosts_access\fR(5)
diff -Npur samba-4.8.8/docs/manpages/sharesec.1 samba-4.8.9/docs/manpages/sharesec.1
--- samba-4.8.8/docs/manpages/sharesec.1	2018-12-13 10:11:25.000000000 +0100
+++ samba-4.8.9/docs/manpages/sharesec.1	2019-02-07 10:26:30.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: sharesec
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SHARESEC" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SHARESEC" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -337,7 +337,7 @@ List all ACEs for
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/smb.conf.5 samba-4.8.9/docs/manpages/smb.conf.5
--- samba-4.8.8/docs/manpages/smb.conf.5	2018-12-13 10:11:27.000000000 +0100
+++ samba-4.8.9/docs/manpages/smb.conf.5	2019-02-07 10:26:32.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smb.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMB\&.CONF" "5" "12/13/2018" "Samba 4\&.8\&.8" "File Formats and Conventions"
+.TH "SMB\&.CONF" "5" "02/07/2019" "Samba 4\&.8\&.9" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -12953,7 +12953,7 @@ and
 special sections make life for an administrator easy, but the various combinations of default attributes can be tricky\&. Take extreme care when designing these sections\&. In particular, ensure that the permissions on spool directories are correct\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsamba\fR(7),
diff -Npur samba-4.8.8/docs/manpages/smbcacls.1 samba-4.8.9/docs/manpages/smbcacls.1
--- samba-4.8.8/docs/manpages/smbcacls.1	2018-12-13 10:11:27.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbcacls.1	2019-02-07 10:26:32.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcacls
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBCACLS" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBCACLS" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -491,7 +491,7 @@ smbcacls
 couldn\*(Aqt connect to the specified server, or there was an error getting or setting the ACLs, an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/smbclient.1 samba-4.8.9/docs/manpages/smbclient.1
--- samba-4.8.8/docs/manpages/smbclient.1	2018-12-13 10:11:27.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbclient.1	2019-02-07 10:26:32.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBCLIENT" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBCLIENT" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -1151,7 +1151,7 @@ Most diagnostics issued by the client ar
 The number and nature of diagnostics available depends on the debug level used by the client\&. If you have problems, set the debug level to 3 and peruse the log files\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/smbcontrol.1 samba-4.8.9/docs/manpages/smbcontrol.1
--- samba-4.8.8/docs/manpages/smbcontrol.1	2018-12-13 10:11:27.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbcontrol.1	2019-02-07 10:26:33.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcontrol
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBCONTROL" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBCONTROL" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -309,7 +309,7 @@ Query the number of smbd child processes
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8)
diff -Npur samba-4.8.8/docs/manpages/smbcquotas.1 samba-4.8.9/docs/manpages/smbcquotas.1
--- samba-4.8.8/docs/manpages/smbcquotas.1	2018-12-13 10:11:28.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbcquotas.1	2019-02-07 10:26:33.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbcquotas
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBCQUOTAS" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBCQUOTAS" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -247,7 +247,7 @@ smbcquotas
 couldn\*(Aqt connect to the specified server, or when there was an error getting or setting the quota(s), an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/smbd.8 samba-4.8.9/docs/manpages/smbd.8
--- samba-4.8.8/docs/manpages/smbd.8	2018-12-13 10:11:28.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbd.8	2019-02-07 10:26:33.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SMBD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -252,7 +252,7 @@ parameter\&. When this is set, the follo
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "DIAGNOSTICS"
 .PP
 Most diagnostics issued by the server are logged in a specified log file\&. The log file name is specified at compile time, but may be overridden on the command line\&.
diff -Npur samba-4.8.8/docs/manpages/smbget.1 samba-4.8.9/docs/manpages/smbget.1
--- samba-4.8.8/docs/manpages/smbget.1	2018-12-13 10:11:28.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbget.1	2019-02-07 10:26:33.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbget
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBGET" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBGET" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -189,7 +189,7 @@ smbget \-Rr smb://rhonwyn/
 Permission denied is returned in some cases where the cause of the error is unknown (such as an illegally formatted smb:// url or trying to get a directory without \-R turned on)\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/smbgetrc.5 samba-4.8.9/docs/manpages/smbgetrc.5
--- samba-4.8.8/docs/manpages/smbgetrc.5	2018-12-13 10:11:28.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbgetrc.5	2019-02-07 10:26:33.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbgetrc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBGETRC" "5" "12/13/2018" "Samba 4\&.8\&.8" "File Formats and Conventions"
+.TH "SMBGETRC" "5" "02/07/2019" "Samba 4\&.8\&.9" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -87,7 +87,7 @@ Number of bytes to put in a block\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbget\fR(1)
diff -Npur samba-4.8.8/docs/manpages/smbpasswd.5 samba-4.8.9/docs/manpages/smbpasswd.5
--- samba-4.8.8/docs/manpages/smbpasswd.5	2018-12-13 10:11:28.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbpasswd.5	2019-02-07 10:26:34.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "5" "12/13/2018" "Samba 4\&.8\&.8" "File Formats and Conventions"
+.TH "SMBPASSWD" "5" "02/07/2019" "Samba 4\&.8\&.9" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -165,7 +165,7 @@ This field consists of the time the acco
 All other colon separated fields are ignored at this time\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/smbpasswd.8 samba-4.8.9/docs/manpages/smbpasswd.8
--- samba-4.8.8/docs/manpages/smbpasswd.8	2018-12-13 10:11:29.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbpasswd.8	2019-02-07 10:26:34.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SMBPASSWD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -316,7 +316,7 @@ file and neglecting to allow "localhost"
 In addition, the smbpasswd command is only useful if Samba has been set up to use encrypted passwords\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(5),
diff -Npur samba-4.8.8/docs/manpages/smbspool.8 samba-4.8.9/docs/manpages/smbspool.8
--- samba-4.8.8/docs/manpages/smbspool.8	2018-12-13 10:11:29.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbspool.8	2019-02-07 10:26:34.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbspool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBSPOOL" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SMBSPOOL" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -173,7 +173,7 @@ The filename argument (argv[6]) contains
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8)
diff -Npur samba-4.8.8/docs/manpages/smbspool_krb5_wrapper.8 samba-4.8.9/docs/manpages/smbspool_krb5_wrapper.8
--- samba-4.8.8/docs/manpages/smbspool_krb5_wrapper.8	2018-12-13 10:11:29.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbspool_krb5_wrapper.8	2019-02-07 10:26:34.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbspool_krb5_wrapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBSPOOL_KRB5_WRAPPE" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "SMBSPOOL_KRB5_WRAPPE" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/smbstatus.1 samba-4.8.9/docs/manpages/smbstatus.1
--- samba-4.8.8/docs/manpages/smbstatus.1	2018-12-13 10:11:29.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbstatus.1	2019-02-07 10:26:34.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbstatus
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBSTATUS" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBSTATUS" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -154,7 +154,7 @@ causes smbstatus to display numeric UIDs
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8)
diff -Npur samba-4.8.8/docs/manpages/smbtar.1 samba-4.8.9/docs/manpages/smbtar.1
--- samba-4.8.8/docs/manpages/smbtar.1	2018-12-13 10:11:29.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbtar.1	2019-02-07 10:26:35.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbtar
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBTAR" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBTAR" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -145,7 +145,7 @@ section for the
 command\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.8/docs/manpages/smbtree.1 samba-4.8.9/docs/manpages/smbtree.1
--- samba-4.8.8/docs/manpages/smbtree.1	2018-12-13 10:11:30.000000000 +0100
+++ samba-4.8.9/docs/manpages/smbtree.1	2019-02-07 10:26:35.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: smbtree
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "SMBTREE" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "SMBTREE" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -191,7 +191,7 @@ Display brief usage message\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/testparm.1 samba-4.8.9/docs/manpages/testparm.1
--- samba-4.8.8/docs/manpages/testparm.1	2018-12-13 10:11:30.000000000 +0100
+++ samba-4.8.9/docs/manpages/testparm.1	2019-02-07 10:26:35.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: testparm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "TESTPARM" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "TESTPARM" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -169,7 +169,7 @@ This is usually the name of the configur
 The program will issue a message saying whether the configuration file loaded OK or not\&. This message may be preceded by errors and warnings if the file did not load\&. If the file was loaded OK, the program then dumps all known service details to stdout\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmb.conf\fR(5),
diff -Npur samba-4.8.8/docs/manpages/traffic_learner.7 samba-4.8.9/docs/manpages/traffic_learner.7
--- samba-4.8.8/docs/manpages/traffic_learner.7	2018-12-13 10:11:30.000000000 +0100
+++ samba-4.8.9/docs/manpages/traffic_learner.7	2019-02-07 10:26:35.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: traffic_learner
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "TRAFFIC_LEARNER" "7" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "TRAFFIC_LEARNER" "7" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ There are two special packet types here\
 The other special packet is "\-", which represents the limit of the conversation\&. In the example, this indicates that one observed conversation ended after this particular ngram\&. This special opcode is also used at the beginning of conversations, which are indicated by the ngram "\-\et\-"\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.8 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBtraffic_replay\fR(7)\&.
diff -Npur samba-4.8.8/docs/manpages/traffic_replay.7 samba-4.8.9/docs/manpages/traffic_replay.7
--- samba-4.8.8/docs/manpages/traffic_replay.7	2018-12-13 10:11:30.000000000 +0100
+++ samba-4.8.9/docs/manpages/traffic_replay.7	2019-02-07 10:26:35.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: traffic_replay
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "TRAFFIC_REPLAY" "7" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "TRAFFIC_REPLAY" "7" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -327,7 +327,7 @@ traffic_replay traffic\-model\&.txt my\-
 The users created by the test will have names like STGU\-0\-xyz\&. The groups generated have names like STGG\-0\-xyz\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.8 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBtraffic_learner\fR(7)\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_acl_tdb.8 samba-4.8.9/docs/manpages/vfs_acl_tdb.8
--- samba-4.8.8/docs/manpages/vfs_acl_tdb.8	2018-12-13 10:11:30.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_acl_tdb.8	2019-02-07 10:26:36.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_ACL_TDB" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_ACL_TDB" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_acl_xattr.8 samba-4.8.9/docs/manpages/vfs_acl_xattr.8
--- samba-4.8.8/docs/manpages/vfs_acl_xattr.8	2018-12-13 10:11:31.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_acl_xattr.8	2019-02-07 10:26:36.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_ACL_XATTR" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_ACL_XATTR" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_aio_fork.8 samba-4.8.9/docs/manpages/vfs_aio_fork.8
--- samba-4.8.8/docs/manpages/vfs_aio_fork.8	2018-12-13 10:11:31.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_aio_fork.8	2019-02-07 10:26:36.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_fork
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_AIO_FORK" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_AIO_FORK" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Straight forward use:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_aio_pthread.8 samba-4.8.9/docs/manpages/vfs_aio_pthread.8
--- samba-4.8.8/docs/manpages/vfs_aio_pthread.8	2018-12-13 10:11:31.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_aio_pthread.8	2019-02-07 10:26:36.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_pthread
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_AIO_PTHREAD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_AIO_PTHREAD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -78,7 +78,7 @@ By default this is set to 100\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_audit.8 samba-4.8.9/docs/manpages/vfs_audit.8
--- samba-4.8.8/docs/manpages/vfs_audit.8	2018-12-13 10:11:31.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_audit.8	2019-02-07 10:26:36.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_AUDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_AUDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -118,7 +118,7 @@ Log operations on all shares using the L
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_btrfs.8 samba-4.8.9/docs/manpages/vfs_btrfs.8
--- samba-4.8.8/docs/manpages/vfs_btrfs.8	2018-12-13 10:11:31.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_btrfs.8	2019-02-07 10:26:37.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_btrfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_BTRFS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_BTRFS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -104,7 +104,7 @@ to Windows Explorer as file / directory
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_cacheprime.8 samba-4.8.9/docs/manpages/vfs_cacheprime.8
--- samba-4.8.8/docs/manpages/vfs_cacheprime.8	2018-12-13 10:11:32.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_cacheprime.8	2019-02-07 10:26:37.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cacheprime
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_CACHEPRIME" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_CACHEPRIME" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ cacheprime
 is not a substitute for a general\-purpose readahead mechanism\&. It is intended for use only in very specific environments where disk operations must be aligned and sized to known values (as much as that is possible)\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_cap.8 samba-4.8.9/docs/manpages/vfs_cap.8
--- samba-4.8.8/docs/manpages/vfs_cap.8	2018-12-13 10:11:32.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_cap.8	2019-02-07 10:26:37.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_CAP" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_CAP" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -63,7 +63,7 @@ On a system using GNU libiconv, use CAP
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_catia.8 samba-4.8.9/docs/manpages/vfs_catia.8
--- samba-4.8.8/docs/manpages/vfs_catia.8	2018-12-13 10:11:32.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_catia.8	2019-02-07 10:26:37.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_catia
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_CATIA" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_CATIA" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_ceph.8 samba-4.8.9/docs/manpages/vfs_ceph.8
--- samba-4.8.8/docs/manpages/vfs_ceph.8	2018-12-13 10:11:32.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_ceph.8	2019-02-07 10:26:37.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_ceph
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_CEPH" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_CEPH" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -94,7 +94,7 @@ Example: ceph:user_id = samba
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_commit.8 samba-4.8.9/docs/manpages/vfs_commit.8
--- samba-4.8.8/docs/manpages/vfs_commit.8	2018-12-13 10:11:32.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_commit.8	2019-02-07 10:26:38.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_commit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_COMMIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_COMMIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -116,7 +116,7 @@ commit
 may reduce performance\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_crossrename.8 samba-4.8.9/docs/manpages/vfs_crossrename.8
--- samba-4.8.8/docs/manpages/vfs_crossrename.8	2018-12-13 10:11:33.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_crossrename.8	2019-02-07 10:26:38.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_crossrename
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_CROSSRENAME" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_CROSSRENAME" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -89,7 +89,7 @@ To add server\-side cross\-device rename
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_default_quota.8 samba-4.8.9/docs/manpages/vfs_default_quota.8
--- samba-4.8.8/docs/manpages/vfs_default_quota.8	2018-12-13 10:11:33.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_default_quota.8	2019-02-07 10:26:38.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_default_quota
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_DEFAULT_QUOTA" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_DEFAULT_QUOTA" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -86,7 +86,7 @@ Store the default quota record in the qu
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_dirsort.8 samba-4.8.9/docs/manpages/vfs_dirsort.8
--- samba-4.8.8/docs/manpages/vfs_dirsort.8	2018-12-13 10:11:33.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_dirsort.8	2019-02-07 10:26:38.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_dirsort
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_DIRSORT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_DIRSORT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -59,7 +59,7 @@ Sort directories for all shares:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_extd_audit.8 samba-4.8.9/docs/manpages/vfs_extd_audit.8
--- samba-4.8.8/docs/manpages/vfs_extd_audit.8	2018-12-13 10:11:33.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_extd_audit.8	2019-02-07 10:26:38.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_extd_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_EXTD_AUDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_EXTD_AUDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -55,7 +55,7 @@ is identical to
 This module is stackable\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_fake_perms.8 samba-4.8.9/docs/manpages/vfs_fake_perms.8
--- samba-4.8.8/docs/manpages/vfs_fake_perms.8	2018-12-13 10:11:33.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_fake_perms.8	2019-02-07 10:26:39.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fake_perms
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_FAKE_PERMS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_FAKE_PERMS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -58,7 +58,7 @@ This module is stackable\&.
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_fileid.8 samba-4.8.9/docs/manpages/vfs_fileid.8
--- samba-4.8.8/docs/manpages/vfs_fileid.8	2018-12-13 10:11:34.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_fileid.8	2019-02-07 10:26:39.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fileid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_FILEID" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_FILEID" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -138,7 +138,7 @@ algorithm:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_fruit.8 samba-4.8.9/docs/manpages/vfs_fruit.8
--- samba-4.8.8/docs/manpages/vfs_fruit.8	2018-12-13 10:11:34.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_fruit.8	2019-02-07 10:26:39.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fruit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_FRUIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_FRUIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_full_audit.8 samba-4.8.9/docs/manpages/vfs_full_audit.8
--- samba-4.8.8/docs/manpages/vfs_full_audit.8	2018-12-13 10:11:34.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_full_audit.8	2019-02-07 10:26:39.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_full_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_FULL_AUDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_FULL_AUDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -400,7 +400,7 @@ Log file and directory open operations o
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_glusterfs.8 samba-4.8.9/docs/manpages/vfs_glusterfs.8
--- samba-4.8.8/docs/manpages/vfs_glusterfs.8	2018-12-13 10:11:34.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_glusterfs.8	2019-02-07 10:26:39.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_glusterfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_GLUSTERFS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_GLUSTERFS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -109,7 +109,7 @@ Defines the glusterfs volumename to use
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_glusterfs_fuse.8 samba-4.8.9/docs/manpages/vfs_glusterfs_fuse.8
--- samba-4.8.8/docs/manpages/vfs_glusterfs_fuse.8	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_glusterfs_fuse.8	2019-02-07 10:26:40.000000000 +0100
@@ -0,0 +1,82 @@
+'\" t
+.\"     Title: vfs_glusterfs_fuse
+.\"    Author: [see the "AUTHOR" section]
+.\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
+.\"      Date: 02/07/2019
+.\"    Manual: System Administration tools
+.\"    Source: Samba 4.8.9
+.\"  Language: English
+.\"
+.TH "VFS_GLUSTERFS_FUSE" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
+.\" -----------------------------------------------------------------
+.\" * Define some portability stuff
+.\" -----------------------------------------------------------------
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.\" http://bugs.debian.org/507673
+.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
+.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\" -----------------------------------------------------------------
+.\" * set default formatting
+.\" -----------------------------------------------------------------
+.\" disable hyphenation
+.nh
+.\" disable justification (adjust text to left margin only)
+.ad l
+.\" -----------------------------------------------------------------
+.\" * MAIN CONTENT STARTS HERE *
+.\" -----------------------------------------------------------------
+.SH "NAME"
+vfs_glusterfs_fuse \- Utilize features provided by GlusterFS
+.SH "SYNOPSIS"
+.HP \w'\ 'u
+vfs objects = glusterfs_fuse
+.SH "DESCRIPTION"
+.PP
+This VFS module is part of the
+\fBsamba\fR(8)
+suite\&.
+.PP
+GlusterFS (http://www\&.gluster\&.org) is an Open Source clustered file system capable of scaling to several peta\-bytes\&. With its FUSE based native client, GlusterFS is available as a POSIX compliant file system and can hence be shared by Samba without additional steps\&.
+.PP
+The
+vfs_glusterfs_fuse
+VFS module provides an enhanced way to access a Gluster filesystem using a Gluster FUSE mount\&. It provides support for the
+get_real_filename
+VFS call which enhances file access performance by avoiding multiple expensive case folding lookup calls to detect the appropriate case of an exisiting filename\&.
+.PP
+This module can be combined with other modules, but it should be the last module in the
+vfs objects
+list\&. Modules added to this list to the right of the glusterfs entry may not have any effect at all\&.
+.SH "CONFIGURATION"
+.PP
+A basic configuration looks like this\&.
+.sp
+.if n \{\
+.RS 4
+.\}
+.nf
+		\fI[share]\fR
+		\m[blue]\fBvfs objects = glusterfs_fuse\fR\m[]
+		\m[blue]\fBpath = /absolute/path_of_fusemount\fR\m[]
+	
+.fi
+.if n \{\
+.RE
+.\}
+.PP
+Note that
+vfs_glusterfs_fuse
+requires a Gluster mount\&. For accessing glusterfs directly over the GFAPI library please use the
+vfs_glusterfs
+module\&.
+.SH "OPTIONS"
+.PP
+This module does currently have no further options\&.
+.SH "VERSION"
+.PP
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
+.SH "AUTHOR"
+.PP
+The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_gpfs.8 samba-4.8.9/docs/manpages/vfs_gpfs.8
--- samba-4.8.8/docs/manpages/vfs_gpfs.8	2018-12-13 10:11:35.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_gpfs.8	2019-02-07 10:26:40.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_gpfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_GPFS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_GPFS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -692,7 +692,7 @@ gpfs\&.h
 in gpfs versions newer than 3\&.2\&.1 PTF8\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_linux_xfs_sgid.8 samba-4.8.9/docs/manpages/vfs_linux_xfs_sgid.8
--- samba-4.8.8/docs/manpages/vfs_linux_xfs_sgid.8	2018-12-13 10:11:35.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_linux_xfs_sgid.8	2019-02-07 10:26:40.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Add syncops functionality for [share]:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_media_harmony.8 samba-4.8.9/docs/manpages/vfs_media_harmony.8
--- samba-4.8.8/docs/manpages/vfs_media_harmony.8	2018-12-13 10:11:35.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_media_harmony.8	2019-02-07 10:26:40.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_media_harmony
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_MEDIA_HARMONY" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_MEDIA_HARMONY" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -138,7 +138,7 @@ vfs_media_harmony
 is designed to work with Avid editing applications that look in the Avid MediaFiles or OMFI MediaFiles directories for media\&. It is not designed to work as expected in all circumstances for general use\&. For example: It is possible to open a client\-specific file such as msmMMOB\&.mdb_192\&.168\&.1\&.10_userx even though it doesn\*(Aqt show up in a directory listing\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_netatalk.8 samba-4.8.9/docs/manpages/vfs_netatalk.8
--- samba-4.8.8/docs/manpages/vfs_netatalk.8	2018-12-13 10:11:35.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_netatalk.8	2019-02-07 10:26:40.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_netatalk
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_NETATALK" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_NETATALK" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Hide \&.AppleDouble files on the [data]
 This module is largely historic and unlikely to be of use in modern networks since current Apple systems are able to mount CIFS shares natively\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_nfs4acl_xattr.8 samba-4.8.9/docs/manpages/vfs_nfs4acl_xattr.8
--- samba-4.8.8/docs/manpages/vfs_nfs4acl_xattr.8	2018-12-13 10:11:35.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_nfs4acl_xattr.8	2019-02-07 10:26:41.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_nfs4acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_NFS4ACL_XATTR" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_NFS4ACL_XATTR" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_offline.8 samba-4.8.9/docs/manpages/vfs_offline.8
--- samba-4.8.8/docs/manpages/vfs_offline.8	2018-12-13 10:11:36.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_offline.8	2019-02-07 10:26:41.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_offline
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_OFFLINE" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_OFFLINE" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -59,7 +59,7 @@ Mark all files in a share as offline:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_prealloc.8 samba-4.8.9/docs/manpages/vfs_prealloc.8
--- samba-4.8.8/docs/manpages/vfs_prealloc.8	2018-12-13 10:11:36.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_prealloc.8	2019-02-07 10:26:41.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_prealloc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_PREALLOC" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_PREALLOC" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ vfs_prealloc
 is not supported on all platforms and filesystems\&. Currently only XFS filesystems on Linux and IRIX are supported\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_preopen.8 samba-4.8.9/docs/manpages/vfs_preopen.8
--- samba-4.8.8/docs/manpages/vfs_preopen.8	2018-12-13 10:11:36.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_preopen.8	2019-02-07 10:26:41.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_preopen
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_PREOPEN" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_PREOPEN" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -67,7 +67,7 @@ Number of files that should be speculati
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_readahead.8 samba-4.8.9/docs/manpages/vfs_readahead.8
--- samba-4.8.8/docs/manpages/vfs_readahead.8	2018-12-13 10:11:36.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_readahead.8	2019-02-07 10:26:41.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readahead
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_READAHEAD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_READAHEAD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ G
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_readonly.8 samba-4.8.9/docs/manpages/vfs_readonly.8
--- samba-4.8.8/docs/manpages/vfs_readonly.8	2018-12-13 10:11:36.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_readonly.8	2019-02-07 10:26:42.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readonly
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_READONLY" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_READONLY" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -81,7 +81,7 @@ Mark the [backup] share as read only dur
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_recycle.8 samba-4.8.9/docs/manpages/vfs_recycle.8
--- samba-4.8.8/docs/manpages/vfs_recycle.8	2018-12-13 10:11:37.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_recycle.8	2019-02-07 10:26:42.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_recycle
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_RECYCLE" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_RECYCLE" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -136,7 +136,7 @@ instead of deleting them:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_shadow_copy.8 samba-4.8.9/docs/manpages/vfs_shadow_copy.8
--- samba-4.8.8/docs/manpages/vfs_shadow_copy.8	2018-12-13 10:11:37.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_shadow_copy.8	2019-02-07 10:26:42.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SHADOW_COPY" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -167,7 +167,7 @@ vfs_shadow_copy
 is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_shadow_copy2.8 samba-4.8.9/docs/manpages/vfs_shadow_copy2.8
--- samba-4.8.8/docs/manpages/vfs_shadow_copy2.8	2018-12-13 10:11:37.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_shadow_copy2.8	2019-02-07 10:26:42.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY2" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SHADOW_COPY2" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -519,7 +519,7 @@ vfs_shadow_copy2
 is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_shell_snap.8 samba-4.8.9/docs/manpages/vfs_shell_snap.8
--- samba-4.8.8/docs/manpages/vfs_shell_snap.8	2018-12-13 10:11:37.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_shell_snap.8	2019-02-07 10:26:42.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shell_snap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SHELL_SNAP" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SHELL_SNAP" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -215,7 +215,7 @@ Samba\*(Aqs FSRVP server must be configu
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_snapper.8 samba-4.8.9/docs/manpages/vfs_snapper.8
--- samba-4.8.8/docs/manpages/vfs_snapper.8	2018-12-13 10:11:37.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_snapper.8	2019-02-07 10:26:43.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_snapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SNAPPER" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SNAPPER" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -85,7 +85,7 @@ Remote snapshot creation and deletion is
 The DiskShadow\&.exe FSRVP client initially authenticates as the Active Directory computer account\&. This account must therefore be granted the same permissions as the user account issuing the snapshot creation and deletion requests\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_streams_depot.8 samba-4.8.9/docs/manpages/vfs_streams_depot.8
--- samba-4.8.8/docs/manpages/vfs_streams_depot.8	2018-12-13 10:11:38.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_streams_depot.8	2019-02-07 10:26:43.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_depot
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_DEPOT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_STREAMS_DEPOT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_streams_xattr.8 samba-4.8.9/docs/manpages/vfs_streams_xattr.8
--- samba-4.8.8/docs/manpages/vfs_streams_xattr.8	2018-12-13 10:11:38.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_streams_xattr.8	2019-02-07 10:26:43.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_XATTR" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_STREAMS_XATTR" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_syncops.8 samba-4.8.9/docs/manpages/vfs_syncops.8
--- samba-4.8.8/docs/manpages/vfs_syncops.8	2018-12-13 10:11:38.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_syncops.8	2019-02-07 10:26:43.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -76,7 +76,7 @@ Add syncops functionality for [share]:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_time_audit.8 samba-4.8.9/docs/manpages/vfs_time_audit.8
--- samba-4.8.8/docs/manpages/vfs_time_audit.8	2018-12-13 10:11:38.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_time_audit.8	2019-02-07 10:26:43.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_time_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_TIME_AUDIT" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_TIME_AUDIT" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -72,7 +72,7 @@ This would log VFS calls that take longe
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_tsmsm.8 samba-4.8.9/docs/manpages/vfs_tsmsm.8
--- samba-4.8.8/docs/manpages/vfs_tsmsm.8	2018-12-13 10:11:38.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_tsmsm.8	2019-02-07 10:26:44.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_tsmsm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_TSMSM" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_TSMSM" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -83,7 +83,7 @@ A GPFS mount with TSM support can be exp
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_unityed_media.8 samba-4.8.9/docs/manpages/vfs_unityed_media.8
--- samba-4.8.8/docs/manpages/vfs_unityed_media.8	2018-12-13 10:11:39.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_unityed_media.8	2019-02-07 10:26:44.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_unityed_media
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_UNITYED_MEDIA" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_UNITYED_MEDIA" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -111,7 +111,7 @@ Enable unityed_media for Mac and Windows
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_virusfilter.8 samba-4.8.9/docs/manpages/vfs_virusfilter.8
--- samba-4.8.8/docs/manpages/vfs_virusfilter.8	2018-12-13 10:11:39.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_virusfilter.8	2019-02-07 10:26:44.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_virusfilter
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.8
 .\"  Language: English
 .\"
-.TH "VFS_VIRUSFILTER" "8" "12/13/2018" "Samba 4\&.8" "System Administration tools"
+.TH "VFS_VIRUSFILTER" "8" "02/07/2019" "Samba 4\&.8" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_worm.8 samba-4.8.9/docs/manpages/vfs_worm.8
--- samba-4.8.8/docs/manpages/vfs_worm.8	2018-12-13 10:11:39.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_worm.8	2019-02-07 10:26:44.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_worm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_WORM" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_WORM" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -68,7 +68,7 @@ Deny the write access to files and folde
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfs_xattr_tdb.8 samba-4.8.9/docs/manpages/vfs_xattr_tdb.8
--- samba-4.8.8/docs/manpages/vfs_xattr_tdb.8	2018-12-13 10:11:39.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_xattr_tdb.8	2019-02-07 10:26:44.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_xattr_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_XATTR_TDB" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_XATTR_TDB" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.8/docs/manpages/vfs_zfsacl.8 samba-4.8.9/docs/manpages/vfs_zfsacl.8
--- samba-4.8.8/docs/manpages/vfs_zfsacl.8	2018-12-13 10:11:39.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfs_zfsacl.8	2019-02-07 10:26:45.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfs_zfsacl
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFS_ZFSACL" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "VFS_ZFSACL" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -215,7 +215,7 @@ A ZFS mount can be exported via Samba as
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/vfstest.1 samba-4.8.9/docs/manpages/vfstest.1
--- samba-4.8.8/docs/manpages/vfstest.1	2018-12-13 10:11:40.000000000 +0100
+++ samba-4.8.9/docs/manpages/vfstest.1	2019-02-07 10:26:45.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: vfstest
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "VFSTEST" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "VFSTEST" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -807,7 +807,7 @@ exit
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/wbinfo.1 samba-4.8.9/docs/manpages/wbinfo.1
--- samba-4.8.8/docs/manpages/wbinfo.1	2018-12-13 10:11:40.000000000 +0100
+++ samba-4.8.9/docs/manpages/wbinfo.1	2019-02-07 10:26:45.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: wbinfo
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "WBINFO" "1" "12/13/2018" "Samba 4\&.8\&.8" "User Commands"
+.TH "WBINFO" "1" "02/07/2019" "Samba 4\&.8\&.9" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -440,7 +440,7 @@ wbinfo
 will always return failure\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBwinbindd\fR(8)
diff -Npur samba-4.8.8/docs/manpages/winbind_krb5_localauth.8 samba-4.8.9/docs/manpages/winbind_krb5_localauth.8
--- samba-4.8.8/docs/manpages/winbind_krb5_localauth.8	2018-12-13 10:11:40.000000000 +0100
+++ samba-4.8.9/docs/manpages/winbind_krb5_localauth.8	2019-02-07 10:26:45.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_localauth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: 8
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCALAU" "8" "12/13/2018" "Samba 4\&.8\&.8" "8"
+.TH "WINBIND_KRB5_LOCALAU" "8" "02/07/2019" "Samba 4\&.8\&.9" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -66,7 +66,7 @@ file\&.
 .sp
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/winbind_krb5_locator.8 samba-4.8.9/docs/manpages/winbind_krb5_locator.8
--- samba-4.8.8/docs/manpages/winbind_krb5_locator.8	2018-12-13 10:11:40.000000000 +0100
+++ samba-4.8.9/docs/manpages/winbind_krb5_locator.8	2019-02-07 10:26:45.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_locator
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: 8
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCATOR" "8" "12/13/2018" "Samba 4\&.8\&.8" "8"
+.TH "WINBIND_KRB5_LOCATOR" "8" "02/07/2019" "Samba 4\&.8\&.9" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -57,7 +57,7 @@ After copying the locator plugin to the
 /etc/krb5\&.conf\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.8/docs/manpages/winbindd.8 samba-4.8.9/docs/manpages/winbindd.8
--- samba-4.8.8/docs/manpages/winbindd.8	2018-12-13 10:11:41.000000000 +0100
+++ samba-4.8.9/docs/manpages/winbindd.8	2019-02-07 10:26:46.000000000 +0100
@@ -2,12 +2,12 @@
 .\"     Title: winbindd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 12/13/2018
+.\"      Date: 02/07/2019
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.8
+.\"    Source: Samba 4.8.9
 .\"  Language: English
 .\"
-.TH "WINBINDD" "8" "12/13/2018" "Samba 4\&.8\&.8" "System Administration tools"
+.TH "WINBINDD" "8" "02/07/2019" "Samba 4\&.8\&.9" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -579,7 +579,7 @@ Storage for cached user and group inform
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.8 of the Samba suite\&.
+This man page is part of version 4\&.8\&.9 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 nsswitch\&.conf(5),
diff -Npur samba-4.8.8/docs-xml/manpages/samba.7.xml samba-4.8.9/docs-xml/manpages/samba.7.xml
--- samba-4.8.8/docs-xml/manpages/samba.7.xml	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/docs-xml/manpages/samba.7.xml	2019-02-07 10:22:11.000000000 +0100
@@ -166,7 +166,7 @@
 		<manvolnum>1</manvolnum></citerefentry></term>
 		<listitem><para><command>smbcontrol</command> is a utility
 		that can change the behaviour of running
-		<command>smbd</command>, <command>nmbd</command> and
+		<command>samba</command>, <command>smbd</command>, <command>nmbd</command> and
 		<command>winbindd</command> daemons.
 		</para></listitem>
 		</varlistentry>
diff -Npur samba-4.8.8/docs-xml/manpages/vfs_glusterfs_fuse.8.xml samba-4.8.9/docs-xml/manpages/vfs_glusterfs_fuse.8.xml
--- samba-4.8.8/docs-xml/manpages/vfs_glusterfs_fuse.8.xml	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.9/docs-xml/manpages/vfs_glusterfs_fuse.8.xml	2019-02-07 10:22:11.000000000 +0100
@@ -0,0 +1,103 @@
+<?xml version="1.0" encoding="iso-8859-1"?>
+<!DOCTYPE refentry PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
+<refentry id="vfs_glusterfs_fuse.8">
+
+<refmeta>
+	<refentrytitle>vfs_glusterfs_fuse</refentrytitle>
+	<manvolnum>8</manvolnum>
+	<refmiscinfo class="source">Samba</refmiscinfo>
+	<refmiscinfo class="manual">System Administration tools</refmiscinfo>
+	<refmiscinfo class="version">&doc.version;</refmiscinfo>
+</refmeta>
+
+
+<refnamediv>
+	<refname>vfs_glusterfs_fuse</refname>
+	<refpurpose>
+		Utilize features provided by GlusterFS
+	</refpurpose>
+</refnamediv>
+
+<refsynopsisdiv>
+	<cmdsynopsis>
+		<command>vfs objects = glusterfs_fuse</command>
+	</cmdsynopsis>
+</refsynopsisdiv>
+
+<refsect1>
+	<title>DESCRIPTION</title>
+
+	<para>This VFS module is part of the
+	<citerefentry><refentrytitle>samba</refentrytitle>
+	<manvolnum>8</manvolnum></citerefentry> suite.</para>
+
+	<para>
+		GlusterFS
+		(<ulink url="http://www.gluster.org/">http://www.gluster.org</ulink>)
+		is an Open Source clustered file system capable of scaling to
+		several peta-bytes.  With its FUSE based native client,
+		GlusterFS is available as a POSIX compliant file system and can
+		hence be shared by Samba without additional steps.
+	</para>
+
+	<para>
+		The <command>vfs_glusterfs_fuse</command> VFS module provides an enhanced way
+		to access a Gluster filesystem using a Gluster FUSE mount. It provides support
+		for the <command>get_real_filename</command> VFS call which enhances file access performance
+		by avoiding multiple expensive case folding lookup calls to detect the appropriate
+		case of an exisiting filename.
+	</para>
+
+	<para>
+		This module can be combined with other modules, but it
+		should be the last module in the <command>vfs objects</command>
+		list. Modules added to this list to the right of the glusterfs
+		entry may not have any effect at all.
+	</para>
+</refsect1>
+
+<refsect1>
+	<title>CONFIGURATION</title>
+
+	<para>
+		A basic configuration looks like this.
+	</para>
+
+	<programlisting>
+		<smbconfsection name="[share]"/>
+		<smbconfoption name="vfs objects">glusterfs_fuse</smbconfoption>
+		<smbconfoption name="path">/absolute/path_of_fusemount</smbconfoption>
+	</programlisting>
+
+	<para>
+		Note that <command>vfs_glusterfs_fuse</command> requires a Gluster mount. For accessing glusterfs directly
+		over the GFAPI library please use the <command>vfs_glusterfs</command> module.
+	</para>
+</refsect1>
+
+<refsect1>
+	<title>OPTIONS</title>
+	<para>
+		This module does currently have no further options.
+	</para>
+</refsect1>
+
+<refsect1>
+	<title>VERSION</title>
+
+	<para>
+		This man page is part of version &doc.version; of the Samba suite.
+	</para>
+</refsect1>
+
+<refsect1>
+	<title>AUTHOR</title>
+
+	<para>The original Samba software and related utilities
+	were created by Andrew Tridgell. Samba is now developed
+	by the Samba Team as an Open Source project similar
+	to the way the Linux kernel is developed.</para>
+
+</refsect1>
+
+</refentry>
diff -Npur samba-4.8.8/docs-xml/wscript_build samba-4.8.9/docs-xml/wscript_build
--- samba-4.8.8/docs-xml/wscript_build	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/docs-xml/wscript_build	2019-02-07 10:22:11.000000000 +0100
@@ -69,6 +69,7 @@ manpages='''
          manpages/vfs_fruit.8
          manpages/vfs_full_audit.8
          manpages/vfs_glusterfs.8
+         manpages/vfs_glusterfs_fuse.8
          manpages/vfs_gpfs.8
          manpages/vfs_linux_xfs_sgid.8
          manpages/vfs_media_harmony.8
diff -Npur samba-4.8.8/lib/util/tests/file.c samba-4.8.9/lib/util/tests/file.c
--- samba-4.8.8/lib/util/tests/file.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/lib/util/tests/file.c	2019-02-07 10:22:11.000000000 +0100
@@ -60,6 +60,154 @@ static bool test_file_load_save(struct t
 	return true;
 }
 
+#define TEST_DATA_WITH_NEWLINE TEST_DATA "\n"
+#define TEST_DATA_NO_NEWLINE TEST_DATA
+#define TEST_DATA_EMPTY ""
+#define TEST_DATA_BLANKS_ONLY "\n\n\n\n\n"
+#define TEST_DATA_WITH_TRAILING_BLANKS TEST_DATA TEST_DATA_BLANKS_ONLY
+
+static bool test_file_lines_load(struct torture_context *tctx)
+{
+	char **lines;
+	int numlines;
+	TALLOC_CTX *mem_ctx = tctx;
+
+	/*
+	 * Last line has trailing whitespace
+	 */
+
+	torture_assert(tctx,
+		       file_save(TEST_FILENAME,
+				 TEST_DATA_WITH_NEWLINE,
+				 strlen(TEST_DATA_WITH_NEWLINE)),
+		       "saving file");
+
+	lines = file_lines_load(TEST_FILENAME, &numlines, 0, mem_ctx);
+
+	torture_assert_int_equal(tctx, numlines, 3, "Lines");
+
+	torture_assert_mem_equal(tctx,
+				 lines[0],
+				 TEST_LINE1,
+				 strlen(TEST_LINE1),
+				 "Line 1");
+
+	torture_assert_mem_equal(tctx,
+				 lines[1],
+				 TEST_LINE2,
+				 strlen(TEST_LINE2),
+				 "Line 2");
+
+	torture_assert_mem_equal(tctx,
+				 lines[2],
+				 TEST_LINE3,
+				 strlen(TEST_LINE3),
+				 "Line 3");
+
+	unlink(TEST_FILENAME);
+
+	/*
+	 * Last line has NO trailing whitespace
+	 */
+
+	torture_assert(tctx,
+		       file_save(TEST_FILENAME,
+				 TEST_DATA_NO_NEWLINE,
+				 strlen(TEST_DATA_NO_NEWLINE)),
+		       "saving file");
+
+	lines = file_lines_load(TEST_FILENAME, &numlines, 0, mem_ctx);
+
+	torture_assert_int_equal(tctx, numlines, 3, "Lines");
+
+	torture_assert_mem_equal(tctx,
+				 lines[0],
+				 TEST_LINE1,
+				 strlen(TEST_LINE1),
+				 "Line 1");
+
+	torture_assert_mem_equal(tctx,
+				 lines[1],
+				 TEST_LINE2,
+				 strlen(TEST_LINE2),
+				 "Line 2");
+
+	torture_assert_mem_equal(tctx,
+				 lines[2],
+				 TEST_LINE3,
+				 strlen(TEST_LINE3),
+				 "Line 3");
+
+	unlink(TEST_FILENAME);
+
+	/*
+	 * Empty file
+	 */
+
+	torture_assert(tctx,
+		       file_save(TEST_FILENAME,
+				 TEST_DATA_EMPTY,
+				 strlen(TEST_DATA_EMPTY)),
+		       "saving file");
+
+	lines = file_lines_load(TEST_FILENAME, &numlines, 0, mem_ctx);
+
+	torture_assert_int_equal(tctx, numlines, 0, "Lines");
+
+	unlink(TEST_FILENAME);
+
+	/*
+	 * Just blank lines
+	 */
+
+	torture_assert(tctx,
+		       file_save(TEST_FILENAME,
+				 TEST_DATA_BLANKS_ONLY,
+				 strlen(TEST_DATA_BLANKS_ONLY)),
+		       "saving file");
+
+	lines = file_lines_load(TEST_FILENAME, &numlines, 0, mem_ctx);
+
+	torture_assert_int_equal(tctx, numlines, 0, "Lines");
+
+	unlink(TEST_FILENAME);
+
+	/*
+	 * Several trailing blank lines
+	 */
+
+	torture_assert(tctx,
+		       file_save(TEST_FILENAME,
+				 TEST_DATA_WITH_TRAILING_BLANKS,
+				 strlen(TEST_DATA_WITH_TRAILING_BLANKS)),
+		       "saving file");
+
+	lines = file_lines_load(TEST_FILENAME, &numlines, 0, mem_ctx);
+
+	torture_assert_int_equal(tctx, numlines, 3, "Lines");
+
+	torture_assert_mem_equal(tctx,
+				 lines[0],
+				 TEST_LINE1,
+				 strlen(TEST_LINE1),
+				 "Line 1");
+
+	torture_assert_mem_equal(tctx,
+				 lines[1],
+				 TEST_LINE2,
+				 strlen(TEST_LINE2),
+				 "Line 2");
+
+	torture_assert_mem_equal(tctx,
+				 lines[2],
+				 TEST_LINE3,
+				 strlen(TEST_LINE3),
+				 "Line 3");
+
+	unlink(TEST_FILENAME);
+
+	return true;
+}
 
 static bool test_afdgets(struct torture_context *tctx)
 {
@@ -102,6 +250,10 @@ struct torture_suite *torture_local_util
 	torture_suite_add_simple_test(suite, "file_load_save", 
 				      test_file_load_save);
 
+	torture_suite_add_simple_test(suite,
+				      "file_lines_load",
+				      test_file_lines_load);
+
 	torture_suite_add_simple_test(suite, "afdgets", test_afdgets);
 
 	return suite;
diff -Npur samba-4.8.8/lib/util/util_file.c samba-4.8.9/lib/util/util_file.c
--- samba-4.8.8/lib/util/util_file.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/lib/util/util_file.c	2019-02-07 10:22:11.000000000 +0100
@@ -219,7 +219,7 @@ parse a buffer into lines
 **/
 char **file_lines_parse(char *p, size_t size, int *numlines, TALLOC_CTX *mem_ctx)
 {
-	int i;
+	unsigned int i;
 	char *s, **ret;
 
 	if (!p) return NULL;
@@ -237,11 +237,11 @@ char **file_lines_parse(char *p, size_t
 	talloc_steal(ret, p);
 
 	ret[0] = p;
-	for (s = p, i=0; s < p+size; s++) {
+	for (s = p, i=1; s < p+size; s++) {
 		if (s[0] == '\n') {
 			s[0] = 0;
-			i++;
 			ret[i] = s+1;
+			i++;
 		}
 		if (s[0] == '\r') s[0] = 0;
 	}
diff -Npur samba-4.8.8/libcli/smb/smbXcli_base.c samba-4.8.9/libcli/smb/smbXcli_base.c
--- samba-4.8.8/libcli/smb/smbXcli_base.c	2018-12-13 10:08:39.000000000 +0100
+++ samba-4.8.9/libcli/smb/smbXcli_base.c	2019-02-07 10:22:11.000000000 +0100
@@ -3231,6 +3231,9 @@ NTSTATUS smb2cli_req_compound_submit(str
 
 		avail = MIN(avail, state->conn->smb2.cur_credits);
 		if (avail < charge) {
+			DBG_ERR("Insufficient credits. "
+				"%"PRIu64" available, %"PRIu16" needed\n",
+				avail, charge);
 			return NT_STATUS_INTERNAL_ERROR;
 		}
 
diff -Npur samba-4.8.8/python/samba/join.py samba-4.8.9/python/samba/join.py
--- samba-4.8.8/python/samba/join.py	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/python/samba/join.py	2019-02-07 10:22:11.000000000 +0100
@@ -35,13 +35,14 @@ from samba.provision.sambadns import set
 from samba import read_and_sub_file
 from samba import werror
 from base64 import b64encode
-from samba import WERRORError
+from samba import WERRORError, NTSTATUSError
 from samba.dnsserver import ARecord, AAAARecord, PTRRecord, CNameRecord, NSRecord, MXRecord, SOARecord, SRVRecord, TXTRecord
 from samba import sd_utils
 import logging
 import talloc
 import random
 import time
+from samba.netcmd import CommandError
 
 class DCJoinException(Exception):
 
@@ -337,10 +338,10 @@ class dc_join(object):
         try:
             ctx.cldap_ret = ctx.net.finddc(domain=domain, flags=nbt.NBT_SERVER_LDAP | nbt.NBT_SERVER_DS | nbt.NBT_SERVER_WRITABLE)
         except NTSTATUSError as error:
-            raise Exception("Failed to find a writeable DC for domain '%s': %s" %
-                            (domain, error[1]))
+            raise CommandError("Failed to find a writeable DC for domain '%s': %s" %
+                               (domain, error.args[1]))
         except Exception:
-            raise Exception("Failed to find a writeable DC for domain '%s'" % domain)
+            raise CommandError("Failed to find a writeable DC for domain '%s'" % domain)
         if ctx.cldap_ret.client_site is not None and ctx.cldap_ret.client_site != "":
             ctx.site = ctx.cldap_ret.client_site
         return ctx.cldap_ret.pdc_dns_name
diff -Npur samba-4.8.8/python/samba/netcmd/domain.py samba-4.8.9/python/samba/netcmd/domain.py
--- samba-4.8.8/python/samba/netcmd/domain.py	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/python/samba/netcmd/domain.py	2019-02-07 10:22:11.000000000 +0100
@@ -1773,7 +1773,7 @@ class DomainTrustCommand(Command):
             remote_info = remote_net.finddc(flags=remote_flags, domain=domain, address=remote_server)
         except NTSTATUSError as error:
             raise CommandError("Failed to find a writeable DC for domain '%s': %s" %
-                               (domain, error[1]))
+                               (domain, error.args[1]))
         except Exception:
             raise CommandError("Failed to find a writeable DC for domain '%s'" % domain)
         flag_map = {
diff -Npur samba-4.8.8/selftest/target/Samba3.pm samba-4.8.9/selftest/target/Samba3.pm
--- samba-4.8.8/selftest/target/Samba3.pm	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/selftest/target/Samba3.pm	2019-02-07 10:22:11.000000000 +0100
@@ -2158,6 +2158,15 @@ sub provision($$$$$$$$$)
 	vfs objects = shadow_copy2
 	shadow:mountpoint = $shadow_mntdir
 	wide links = yes
+
+[shadow_write]
+	path = $shadow_tstdir
+	comment = previous versions snapshots under mount point
+	vfs objects = shadow_copy2 streams_xattr error_inject
+	aio write size = 0
+	error_inject:pwrite = EBADF
+	shadow:mountpoint = $shadow_tstdir
+
 [dfq]
 	path = $shrdir/dfree
 	vfs objects = acl_xattr fake_acls xattr_tdb fake_dfq
diff -Npur samba-4.8.8/selftest/target/Samba4.pm samba-4.8.9/selftest/target/Samba4.pm
--- samba-4.8.8/selftest/target/Samba4.pm	2018-06-26 16:42:46.000000000 +0200
+++ samba-4.8.9/selftest/target/Samba4.pm	2019-02-07 10:22:11.000000000 +0100
@@ -1983,6 +1983,15 @@ sub teardown_env_terminate($$)
 	my $pid;
 
 	# This should cause samba to terminate gracefully
+	my $smbcontrol = Samba::bindir_path($self, "smbcontrol");
+	my $cmd = "";
+	$cmd .= "$smbcontrol samba shutdown $envvars->{CONFIGURATION}";
+	my $ret = system($cmd);
+	if ($ret != 0) {
+		warn "'$cmd' failed with '$ret'\n";
+	}
+
+	# This should cause samba to terminate gracefully
 	close($envvars->{STDIN_PIPE});
 
 	$pid = $envvars->{SAMBA_PID};
diff -Npur samba-4.8.8/source3/auth/auth.c samba-4.8.9/source3/auth/auth.c
--- samba-4.8.8/source3/auth/auth.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source3/auth/auth.c	2019-02-07 10:22:11.000000000 +0100
@@ -545,7 +545,7 @@ NTSTATUS make_auth3_context_for_netlogon
 	switch (lp_server_role()) {
 	case ROLE_DOMAIN_BDC:
 	case ROLE_DOMAIN_PDC:
-		methods = "sam_netlogon3 winbind:trustdomain";
+		methods = "sam_netlogon3 winbind";
 		break;
 
 	default:
diff -Npur samba-4.8.8/source3/auth/auth_winbind.c samba-4.8.9/source3/auth/auth_winbind.c
--- samba-4.8.8/source3/auth/auth_winbind.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/source3/auth/auth_winbind.c	2019-02-07 10:22:11.000000000 +0100
@@ -22,6 +22,7 @@
 
 #include "includes.h"
 #include "auth.h"
+#include "passdb.h"
 #include "nsswitch/libwbclient/wbclient.h"
 
 #undef DBGC_CLASS
@@ -110,13 +111,37 @@ static NTSTATUS check_winbind_security(c
 	}
 
 	if (wbc_status == WBC_ERR_WINBIND_NOT_AVAILABLE) {
-		struct auth_methods *auth_method =
-			(struct auth_methods *)my_private_data;
+		struct pdb_trusted_domain **domains = NULL;
+		uint32_t num_domains = 0;
+		NTSTATUS status;
+
+		if (lp_server_role() == ROLE_DOMAIN_MEMBER) {
+			status = NT_STATUS_NO_LOGON_SERVERS;
+			DBG_ERR("winbindd not running - "
+				"but required as domain member: %s\n",
+				nt_errstr(status));
+			return status;
+		}
 
-		if ( auth_method )
-			return auth_method->auth(auth_context, auth_method->private_data, 
-				mem_ctx, user_info, server_info);
-		return NT_STATUS_LOGON_FAILURE;
+		status = pdb_enum_trusted_domains(talloc_tos(), &num_domains, &domains);
+		if (!NT_STATUS_IS_OK(status)) {
+			DBG_ERR("pdb_enum_trusted_domains() failed - %s\n",
+				nt_errstr(status));
+			return status;
+		}
+		TALLOC_FREE(domains);
+
+		if (num_domains == 0) {
+			DBG_DEBUG("winbindd not running - ignoring without "
+				  "trusted domains\n");
+			return NT_STATUS_NOT_IMPLEMENTED;
+		}
+
+		status = NT_STATUS_NO_LOGON_SERVERS;
+		DBG_ERR("winbindd not running - "
+			"but required as DC with trusts: %s\n",
+			nt_errstr(status));
+		return status;
 	}
 
 	if (wbc_status == WBC_ERR_AUTH_ERROR) {
@@ -164,16 +189,6 @@ static NTSTATUS auth_init_winbind(struct
 	result->name = "winbind";
 	result->auth = check_winbind_security;
 
-	if (param && *param) {
-		/* we load the 'fallback' module - if winbind isn't here, call this
-		   module */
-		auth_methods *priv;
-		if (!load_auth_module(auth_context, param, &priv)) {
-			return NT_STATUS_UNSUCCESSFUL;
-		}
-		result->private_data = (void *)priv;
-	}
-
 	*auth_method = result;
 	return NT_STATUS_OK;
 }
diff -Npur samba-4.8.8/source3/libsmb/cli_smb2_fnum.c samba-4.8.9/source3/libsmb/cli_smb2_fnum.c
--- samba-4.8.8/source3/libsmb/cli_smb2_fnum.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source3/libsmb/cli_smb2_fnum.c	2019-02-07 10:22:11.000000000 +0100
@@ -910,6 +910,9 @@ NTSTATUS cli_smb2_list(struct cli_state
 	TALLOC_CTX *frame = talloc_stackframe();
 	TALLOC_CTX *subframe = NULL;
 	bool mask_has_wild;
+	uint32_t max_trans;
+	uint32_t max_avail_len;
+	bool ok;
 
 	if (smbXcli_conn_has_async_calls(cli->conn)) {
 		/*
@@ -957,6 +960,16 @@ NTSTATUS cli_smb2_list(struct cli_state
 		goto fail;
 	}
 
+	/*
+	 * ideally, use the max transaction size, but don't send a request
+	 * bigger than we have credits available for
+	 */
+	max_trans = smb2cli_conn_max_trans_size(cli->conn);
+	ok = smb2cli_conn_req_possible(cli->conn, &max_avail_len);
+	if (ok) {
+		max_trans = MIN(max_trans, max_avail_len);
+	}
+
 	do {
 		uint8_t *dir_data = NULL;
 		uint32_t dir_data_length = 0;
@@ -973,7 +986,7 @@ NTSTATUS cli_smb2_list(struct cli_state
 					ph->fid_persistent,
 					ph->fid_volatile,
 					mask,
-					0xffff,
+					max_trans,
 					subframe,
 					&dir_data,
 					&dir_data_length);
diff -Npur samba-4.8.8/source3/libsmb/nmblib.c samba-4.8.9/source3/libsmb/nmblib.c
--- samba-4.8.8/source3/libsmb/nmblib.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/source3/libsmb/nmblib.c	2019-02-07 10:22:11.000000000 +0100
@@ -207,24 +207,32 @@ static int parse_nmb_name(char *inbuf,in
 		unsigned char c1,c2;
 		c1 = ubuf[offset++]-'A';
 		c2 = ubuf[offset++]-'A';
-		if ((c1 & 0xF0) || (c2 & 0xF0) || (n > sizeof(name->name)-1))
+		if ((c1 & 0xF0) || (c2 & 0xF0)) {
 			return(0);
+		}
+		if (n >= sizeof(name->name)) {
+			return 0;
+		}
 		name->name[n++] = (c1<<4) | c2;
 		m -= 2;
 	}
-	name->name[n] = 0;
+	/*
+	 * RFC1002: For a valid NetBIOS name, exiting from the above,
+	 * n *must* be MAX_NETBIOSNAME_LEN (16).
+	 */
+	if (n != MAX_NETBIOSNAME_LEN) {
+		return 0;
+	}
 
-	if (n==MAX_NETBIOSNAME_LEN) {
-		/* parse out the name type, its always
-		 * in the 16th byte of the name */
-		name->name_type = ((unsigned char)name->name[15]) & 0xff;
+	/* parse out the name type, its always
+	 * in the 16th byte of the name */
+	name->name_type = ((unsigned char)name->name[15]) & 0xff;
 
-		/* remove trailing spaces */
-		name->name[15] = 0;
-		n = 14;
-		while (n && name->name[n]==' ')
-			name->name[n--] = 0;
-	}
+	/* remove trailing spaces */
+	name->name[15] = 0;
+	n = 14;
+	while (n && name->name[n]==' ')
+		name->name[n--] = 0;
 
 	/* now the domain parts (if any) */
 	n = 0;
diff -Npur samba-4.8.8/source3/modules/posixacl_xattr.c samba-4.8.9/source3/modules/posixacl_xattr.c
--- samba-4.8.8/source3/modules/posixacl_xattr.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source3/modules/posixacl_xattr.c	2019-02-07 10:22:11.000000000 +0100
@@ -379,7 +379,7 @@ SMB_ACL_T posixacl_xattr_acl_get_file(vf
 	if (ret > 0) {
 		return posixacl_xattr_to_smb_acl(buf, ret, mem_ctx);
 	}
-	if (ret == 0 || errno == ENOATTR || errno == ENODATA) {
+	if (ret == 0 || errno == ENOATTR) {
 		mode_t mode = 0;
 		TALLOC_CTX *frame = talloc_stackframe();
 		struct smb_filename *smb_fname_tmp =
@@ -434,7 +434,7 @@ SMB_ACL_T posixacl_xattr_acl_get_fd(vfs_
 	if (ret > 0) {
 		return posixacl_xattr_to_smb_acl(buf, ret, mem_ctx);
 	}
-	if (ret == 0 || errno == ENOATTR || errno == ENODATA) {
+	if (ret == 0 || errno == ENOATTR) {
 		SMB_STRUCT_STAT sbuf;
 		ret = SMB_VFS_FSTAT(fsp, &sbuf);
 		if (ret == 0)
diff -Npur samba-4.8.8/source3/modules/vfs_error_inject.c samba-4.8.9/source3/modules/vfs_error_inject.c
--- samba-4.8.8/source3/modules/vfs_error_inject.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_error_inject.c	2019-02-07 10:22:11.000000000 +0100
@@ -28,6 +28,7 @@ struct unix_error_map {
 	int error;
 } unix_error_map_array[] = {
 	{	"ESTALE",	ESTALE	},
+	{	"EBADF",	EBADF	},
 };
 
 static int find_unix_error_from_string(const char *err_str)
@@ -88,8 +89,26 @@ static int vfs_error_inject_chdir(vfs_ha
 	return SMB_VFS_NEXT_CHDIR(handle, smb_fname);
 }
 
+static ssize_t vfs_error_inject_pwrite(vfs_handle_struct *handle,
+				       files_struct *fsp,
+				       const void *data,
+				       size_t n,
+				       off_t offset)
+{
+	int error;
+
+	error = inject_unix_error("pwrite", handle);
+	if (error != 0) {
+		errno = error;
+		return -1;
+	}
+
+	return SMB_VFS_NEXT_PWRITE(handle, fsp, data, n, offset);
+}
+
 static struct vfs_fn_pointers vfs_error_inject_fns = {
 	.chdir_fn = vfs_error_inject_chdir,
+	.pwrite_fn = vfs_error_inject_pwrite,
 };
 
 static_decl_vfs;
diff -Npur samba-4.8.8/source3/modules/vfs_fileid.c samba-4.8.9/source3/modules/vfs_fileid.c
--- samba-4.8.8/source3/modules/vfs_fileid.c	2018-03-01 21:18:10.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_fileid.c	2019-02-07 10:22:11.000000000 +0100
@@ -297,12 +297,14 @@ static int get_connectpath_ino(struct vf
 	}
 
 	ret = SMB_VFS_NEXT_STAT(handle, fname);
-	TALLOC_FREE(fname);
 	if (ret != 0) {
 		DBG_ERR("stat failed for %s with %s\n",
 			handle->conn->connectpath, strerror(errno));
+		TALLOC_FREE(fname);
 		return -1;
 	}
+	*ino = fname->st.st_ex_ino;
+	TALLOC_FREE(fname);
 
 	return 0;
 }
@@ -454,7 +456,8 @@ static struct file_id fileid_file_id_cre
 				struct fileid_handle_data,
 				return id);
 
-	if ((data->nolockinode != 0) && (id.inode == data->nolockinode)) {
+	if ((data->nolockinode != 0) &&
+	    (sbuf->st_ex_ino == data->nolockinode)) {
 		devid = fileid_device_mapping_hostname(data, sbuf);
 	} else {
 		devid = data->device_mapping_fn(data, sbuf);
diff -Npur samba-4.8.8/source3/modules/vfs_fruit.c samba-4.8.9/source3/modules/vfs_fruit.c
--- samba-4.8.8/source3/modules/vfs_fruit.c	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_fruit.c	2019-02-07 10:22:11.000000000 +0100
@@ -3719,6 +3719,87 @@ static int fruit_open(vfs_handle_struct
 	return fd;
 }
 
+static int fruit_close_meta(vfs_handle_struct *handle,
+			    files_struct *fsp)
+{
+	int ret;
+	struct fruit_config_data *config = NULL;
+
+	SMB_VFS_HANDLE_GET_DATA(handle, config,
+				struct fruit_config_data, return -1);
+
+	switch (config->meta) {
+	case FRUIT_META_STREAM:
+		ret = SMB_VFS_NEXT_CLOSE(handle, fsp);
+		break;
+
+	case FRUIT_META_NETATALK:
+		ret = close(fsp->fh->fd);
+		fsp->fh->fd = -1;
+		break;
+
+	default:
+		DBG_ERR("Unexpected meta config [%d]\n", config->meta);
+		return -1;
+	}
+
+	return ret;
+}
+
+
+static int fruit_close_rsrc(vfs_handle_struct *handle,
+			    files_struct *fsp)
+{
+	int ret;
+	struct fruit_config_data *config = NULL;
+
+	SMB_VFS_HANDLE_GET_DATA(handle, config,
+				struct fruit_config_data, return -1);
+
+	switch (config->rsrc) {
+	case FRUIT_RSRC_STREAM:
+	case FRUIT_RSRC_ADFILE:
+		ret = SMB_VFS_NEXT_CLOSE(handle, fsp);
+		break;
+
+	case FRUIT_RSRC_XATTR:
+		ret = close(fsp->fh->fd);
+		fsp->fh->fd = -1;
+		break;
+
+	default:
+		DBG_ERR("Unexpected rsrc config [%d]\n", config->rsrc);
+		return -1;
+	}
+
+	return ret;
+}
+
+static int fruit_close(vfs_handle_struct *handle,
+                       files_struct *fsp)
+{
+	int ret;
+	int fd;
+
+	fd = fsp->fh->fd;
+
+	DBG_DEBUG("Path [%s] fd [%d]\n", smb_fname_str_dbg(fsp->fsp_name), fd);
+
+	if (!is_ntfs_stream_smb_fname(fsp->fsp_name)) {
+		return SMB_VFS_NEXT_CLOSE(handle, fsp);
+	}
+
+	if (is_afpinfo_stream(fsp->fsp_name)) {
+		ret = fruit_close_meta(handle, fsp);
+	} else if (is_afpresource_stream(fsp->fsp_name)) {
+		ret = fruit_close_rsrc(handle, fsp);
+	} else {
+		ret = SMB_VFS_NEXT_CLOSE(handle, fsp);
+	}
+
+	return ret;
+}
+
 static int fruit_rename(struct vfs_handle_struct *handle,
 			const struct smb_filename *smb_fname_src,
 			const struct smb_filename *smb_fname_dst)
@@ -6999,6 +7080,7 @@ static struct vfs_fn_pointers vfs_fruit_
 	.rename_fn = fruit_rename,
 	.rmdir_fn = fruit_rmdir,
 	.open_fn = fruit_open,
+	.close_fn = fruit_close,
 	.pread_fn = fruit_pread,
 	.pwrite_fn = fruit_pwrite,
 	.pread_send_fn = fruit_pread_send,
diff -Npur samba-4.8.8/source3/modules/vfs_glusterfs.c samba-4.8.9/source3/modules/vfs_glusterfs.c
--- samba-4.8.8/source3/modules/vfs_glusterfs.c	2018-03-01 21:18:10.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_glusterfs.c	2019-02-07 10:22:11.000000000 +0100
@@ -491,11 +491,33 @@ static DIR *vfs_gluster_opendir(struct v
 	return (DIR *) fd;
 }
 
+static glfs_fd_t *vfs_gluster_fetch_glfd(struct vfs_handle_struct *handle,
+					 files_struct *fsp)
+{
+	glfs_fd_t **glfd = (glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp);
+	if (glfd == NULL) {
+		DBG_INFO("Failed to fetch fsp extension\n");
+		return NULL;
+	}
+	if (*glfd == NULL) {
+		DBG_INFO("Empty glfs_fd_t pointer\n");
+		return NULL;
+	}
+
+	return *glfd;
+}
+
 static DIR *vfs_gluster_fdopendir(struct vfs_handle_struct *handle,
 				  files_struct *fsp, const char *mask,
 				  uint32_t attributes)
 {
-	return (DIR *) *(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return NULL;
+	}
+
+	return (DIR *)glfd;
 }
 
 static int vfs_gluster_closedir(struct vfs_handle_struct *handle, DIR *dirp)
@@ -586,8 +608,12 @@ static int vfs_gluster_open(struct vfs_h
 static int vfs_gluster_close(struct vfs_handle_struct *handle,
 			     files_struct *fsp)
 {
-	glfs_fd_t *glfd;
-	glfd = *(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
 	VFS_REMOVE_FSP_EXTENSION(handle, fsp);
 	return glfs_close(glfd);
 }
@@ -595,14 +621,30 @@ static int vfs_gluster_close(struct vfs_
 static ssize_t vfs_gluster_read(struct vfs_handle_struct *handle,
 				files_struct *fsp, void *data, size_t n)
 {
-	return glfs_read(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), data, n, 0);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_read(glfd, data, n, 0);
 }
 
 static ssize_t vfs_gluster_pread(struct vfs_handle_struct *handle,
 				 files_struct *fsp, void *data, size_t n,
 				 off_t offset)
 {
-	return glfs_pread(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), data, n, offset, 0);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+#ifdef HAVE_GFAPI_VER_7_6
+	return glfs_pread(glfd, data, n, offset, 0, NULL);
+#else
+	return glfs_pread(glfd, data, n, offset, 0);
+#endif
 }
 
 struct glusterfs_aio_state;
@@ -633,7 +675,14 @@ static int aio_wrapper_destructor(struct
  * threads once the async IO submitted is complete. To notify
  * Samba of the completion we use a pipe based queue.
  */
+#ifdef HAVE_GFAPI_VER_7_6
+static void aio_glusterfs_done(glfs_fd_t *fd, ssize_t ret,
+			       struct glfs_stat *prestat,
+			       struct glfs_stat *poststat,
+			       void *data)
+#else
 static void aio_glusterfs_done(glfs_fd_t *fd, ssize_t ret, void *data)
+#endif
 {
 	struct glusterfs_aio_state *state = NULL;
 	int sts = 0;
@@ -795,6 +844,12 @@ static struct tevent_req *vfs_gluster_pr
 	struct glusterfs_aio_state *state = NULL;
 	struct tevent_req *req = NULL;
 	int ret = 0;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return NULL;
+	}
 
 	state = aio_state_create(mem_ctx);
 
@@ -810,8 +865,7 @@ static struct tevent_req *vfs_gluster_pr
 	}
 
 	PROFILE_TIMESTAMP(&state->start);
-	ret = glfs_pread_async(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle,
-				fsp), data, n, offset, 0, aio_glusterfs_done,
+	ret = glfs_pread_async(glfd, data, n, offset, 0, aio_glusterfs_done,
 				state);
 	if (ret < 0) {
 		tevent_req_error(req, -ret);
@@ -831,6 +885,12 @@ static struct tevent_req *vfs_gluster_pw
 	struct glusterfs_aio_state *state = NULL;
 	struct tevent_req *req = NULL;
 	int ret = 0;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return NULL;
+	}
 
 	state = aio_state_create(mem_ctx);
 
@@ -846,8 +906,7 @@ static struct tevent_req *vfs_gluster_pw
 	}
 
 	PROFILE_TIMESTAMP(&state->start);
-	ret = glfs_pwrite_async(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle,
-				fsp), data, n, offset, 0, aio_glusterfs_done,
+	ret = glfs_pwrite_async(glfd, data, n, offset, 0, aio_glusterfs_done,
 				state);
 	if (ret < 0) {
 		tevent_req_error(req, -ret);
@@ -890,20 +949,42 @@ static ssize_t vfs_gluster_recv(struct t
 static ssize_t vfs_gluster_write(struct vfs_handle_struct *handle,
 				 files_struct *fsp, const void *data, size_t n)
 {
-	return glfs_write(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), data, n, 0);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_write(glfd, data, n, 0);
 }
 
 static ssize_t vfs_gluster_pwrite(struct vfs_handle_struct *handle,
 				  files_struct *fsp, const void *data,
 				  size_t n, off_t offset)
 {
-	return glfs_pwrite(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), data, n, offset, 0);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+#ifdef HAVE_GFAPI_VER_7_6
+	return glfs_pwrite(glfd, data, n, offset, 0, NULL, NULL);
+#else
+	return glfs_pwrite(glfd, data, n, offset, 0);
+#endif
 }
 
 static off_t vfs_gluster_lseek(struct vfs_handle_struct *handle,
 			       files_struct *fsp, off_t offset, int whence)
 {
-	return glfs_lseek(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), offset, whence);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_lseek(glfd, offset, whence);
 }
 
 static ssize_t vfs_gluster_sendfile(struct vfs_handle_struct *handle, int tofd,
@@ -934,7 +1015,13 @@ static int vfs_gluster_rename(struct vfs
 static int vfs_gluster_fsync(struct vfs_handle_struct *handle,
 			     files_struct *fsp)
 {
-	return glfs_fsync(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp));
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fsync(glfd);
 }
 
 static struct tevent_req *vfs_gluster_fsync_send(struct vfs_handle_struct
@@ -945,6 +1032,12 @@ static struct tevent_req *vfs_gluster_fs
 	struct tevent_req *req = NULL;
 	struct glusterfs_aio_state *state = NULL;
 	int ret = 0;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return NULL;
+	}
 
 	state = aio_state_create(mem_ctx);
 
@@ -960,8 +1053,7 @@ static struct tevent_req *vfs_gluster_fs
 	}
 
 	PROFILE_TIMESTAMP(&state->start);
-	ret = glfs_fsync_async(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle,
-				fsp), aio_glusterfs_done, state);
+	ret = glfs_fsync_async(glfd, aio_glusterfs_done, state);
 	if (ret < 0) {
 		tevent_req_error(req, -ret);
 		return tevent_req_post(req, ev);
@@ -1000,8 +1092,14 @@ static int vfs_gluster_fstat(struct vfs_
 {
 	struct stat st;
 	int ret;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
 
-	ret = glfs_fstat(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), &st);
+	ret = glfs_fstat(glfd, &st);
 	if (ret == 0) {
 		smb_stat_ex_from_stat(sbuf, &st);
 	}
@@ -1052,7 +1150,14 @@ static int vfs_gluster_chmod(struct vfs_
 static int vfs_gluster_fchmod(struct vfs_handle_struct *handle,
 			      files_struct *fsp, mode_t mode)
 {
-	return glfs_fchmod(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), mode);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fchmod(glfd, mode);
 }
 
 static int vfs_gluster_chown(struct vfs_handle_struct *handle,
@@ -1066,7 +1171,13 @@ static int vfs_gluster_chown(struct vfs_
 static int vfs_gluster_fchown(struct vfs_handle_struct *handle,
 			      files_struct *fsp, uid_t uid, gid_t gid)
 {
-	return glfs_fchown(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), uid, gid);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fchown(glfd, uid, gid);
 }
 
 static int vfs_gluster_lchown(struct vfs_handle_struct *handle,
@@ -1144,7 +1255,17 @@ static int vfs_gluster_ntimes(struct vfs
 static int vfs_gluster_ftruncate(struct vfs_handle_struct *handle,
 				 files_struct *fsp, off_t offset)
 {
-	return glfs_ftruncate(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), offset);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+#ifdef HAVE_GFAPI_VER_7_6
+	return glfs_ftruncate(glfd, offset, NULL, NULL);
+#else
+	return glfs_ftruncate(glfd, offset);
+#endif
 }
 
 static int vfs_gluster_fallocate(struct vfs_handle_struct *handle,
@@ -1154,6 +1275,11 @@ static int vfs_gluster_fallocate(struct
 {
 #ifdef HAVE_GFAPI_VER_6
 	int keep_size, punch_hole;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
 
 	keep_size = mode & VFS_FALLOCATE_FL_KEEP_SIZE;
 	punch_hole = mode & VFS_FALLOCATE_FL_PUNCH_HOLE;
@@ -1165,14 +1291,10 @@ static int vfs_gluster_fallocate(struct
 	}
 
 	if (punch_hole) {
-		return glfs_discard(*(glfs_fd_t **)
-				    VFS_FETCH_FSP_EXTENSION(handle, fsp),
-				    offset, len);
+		return glfs_discard(glfd, offset, len);
 	}
 
-	return glfs_fallocate(*(glfs_fd_t **)
-			      VFS_FETCH_FSP_EXTENSION(handle, fsp),
-			      keep_size, offset, len);
+	return glfs_fallocate(glfd, keep_size, offset, len);
 #else
 	errno = ENOTSUP;
 	return -1;
@@ -1209,6 +1331,11 @@ static bool vfs_gluster_lock(struct vfs_
 {
 	struct flock flock = { 0, };
 	int ret;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return false;
+	}
 
 	flock.l_type = type;
 	flock.l_whence = SEEK_SET;
@@ -1216,7 +1343,7 @@ static bool vfs_gluster_lock(struct vfs_
 	flock.l_len = count;
 	flock.l_pid = 0;
 
-	ret = glfs_posix_lock(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), op, &flock);
+	ret = glfs_posix_lock(glfd, op, &flock);
 
 	if (op == F_GETLK) {
 		/* lock query, true if someone else has locked */
@@ -1256,6 +1383,11 @@ static bool vfs_gluster_getlock(struct v
 {
 	struct flock flock = { 0, };
 	int ret;
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return false;
+	}
 
 	flock.l_type = *ptype;
 	flock.l_whence = SEEK_SET;
@@ -1263,7 +1395,7 @@ static bool vfs_gluster_getlock(struct v
 	flock.l_len = *pcount;
 	flock.l_pid = 0;
 
-	ret = glfs_posix_lock(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), F_GETLK, &flock);
+	ret = glfs_posix_lock(glfd, F_GETLK, &flock);
 
 	if (ret == -1) {
 		return false;
@@ -1337,7 +1469,7 @@ static int vfs_gluster_get_real_filename
 
 	ret = glfs_getxattr(handle->data, path, key_buf, val_buf, NAME_MAX + 1);
 	if (ret == -1) {
-		if (errno == ENODATA) {
+		if (errno == ENOATTR) {
 			errno = EOPNOTSUPP;
 		}
 		return -1;
@@ -1373,7 +1505,13 @@ static ssize_t vfs_gluster_fgetxattr(str
 				     files_struct *fsp, const char *name,
 				     void *value, size_t size)
 {
-	return glfs_fgetxattr(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), name, value, size);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fgetxattr(glfd, name, value, size);
 }
 
 static ssize_t vfs_gluster_listxattr(struct vfs_handle_struct *handle,
@@ -1388,7 +1526,13 @@ static ssize_t vfs_gluster_flistxattr(st
 				      files_struct *fsp, char *list,
 				      size_t size)
 {
-	return glfs_flistxattr(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), list, size);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_flistxattr(glfd, list, size);
 }
 
 static int vfs_gluster_removexattr(struct vfs_handle_struct *handle,
@@ -1401,7 +1545,13 @@ static int vfs_gluster_removexattr(struc
 static int vfs_gluster_fremovexattr(struct vfs_handle_struct *handle,
 				    files_struct *fsp, const char *name)
 {
-	return glfs_fremovexattr(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), name);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fremovexattr(glfd, name);
 }
 
 static int vfs_gluster_setxattr(struct vfs_handle_struct *handle,
@@ -1416,8 +1566,13 @@ static int vfs_gluster_fsetxattr(struct
 				 files_struct *fsp, const char *name,
 				 const void *value, size_t size, int flags)
 {
-	return glfs_fsetxattr(*(glfs_fd_t **)VFS_FETCH_FSP_EXTENSION(handle, fsp), name, value, size,
-			      flags);
+	glfs_fd_t *glfd = vfs_gluster_fetch_glfd(handle, fsp);
+	if (glfd == NULL) {
+		DBG_ERR("Failed to fetch gluster fd\n");
+		return -1;
+	}
+
+	return glfs_fsetxattr(glfd, name, value, size, flags);
 }
 
 /* AIO Operations */
diff -Npur samba-4.8.8/source3/modules/vfs_glusterfs_fuse.c samba-4.8.9/source3/modules/vfs_glusterfs_fuse.c
--- samba-4.8.8/source3/modules/vfs_glusterfs_fuse.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_glusterfs_fuse.c	2019-02-07 10:22:11.000000000 +0100
@@ -0,0 +1,71 @@
+/*
+   Unix SMB/CIFS implementation.
+
+   Copyright (c) 2019 Guenther Deschner <gd@samba.org>
+
+   This program is free software; you can redistribute it and/or modify
+   it under the terms of the GNU General Public License as published by
+   the Free Software Foundation; either version 3 of the License, or
+   (at your option) any later version.
+
+   This program is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+*/
+
+#include "includes.h"
+#include "smbd/smbd.h"
+#include "system/filesys.h"
+
+static int vfs_gluster_fuse_get_real_filename(struct vfs_handle_struct *handle,
+					      const char *path,
+					      const char *name,
+					      TALLOC_CTX *mem_ctx,
+					      char **_found_name)
+{
+	int ret;
+	char key_buf[NAME_MAX + 64];
+	char val_buf[NAME_MAX + 1];
+	char *found_name = NULL;
+
+	if (strlen(name) >= NAME_MAX) {
+		errno = ENAMETOOLONG;
+		return -1;
+	}
+
+	snprintf(key_buf, NAME_MAX + 64,
+		 "glusterfs.get_real_filename:%s", name);
+
+	ret = getxattr(path, key_buf, val_buf, NAME_MAX + 1);
+	if (ret == -1) {
+		if (errno == ENOATTR) {
+			errno = EOPNOTSUPP;
+		}
+		return -1;
+	}
+
+	found_name = talloc_strdup(mem_ctx, val_buf);
+	if (found_name == NULL) {
+		errno = ENOMEM;
+		return -1;
+	}
+	*_found_name = found_name;
+	return 0;
+}
+
+struct vfs_fn_pointers glusterfs_fuse_fns = {
+
+	/* File Operations */
+	.get_real_filename_fn = vfs_gluster_fuse_get_real_filename,
+};
+
+static_decl_vfs;
+NTSTATUS vfs_glusterfs_fuse_init(TALLOC_CTX *ctx)
+{
+	return smb_register_vfs(SMB_VFS_INTERFACE_VERSION,
+				"glusterfs_fuse", &glusterfs_fuse_fns);
+}
diff -Npur samba-4.8.8/source3/modules/vfs_shadow_copy2.c samba-4.8.9/source3/modules/vfs_shadow_copy2.c
--- samba-4.8.8/source3/modules/vfs_shadow_copy2.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_shadow_copy2.c	2019-02-07 10:22:11.000000000 +0100
@@ -36,6 +36,8 @@
 #include "include/ntioctl.h"
 #include "util_tdb.h"
 #include "lib/util_path.h"
+#include "libcli/security/security.h"
+#include "lib/util/tevent_unix.h"
 
 struct shadow_copy2_config {
 	char *gmt_format;
@@ -587,7 +589,8 @@ static bool shadow_copy2_strip_snapshot_
 					const char *orig_name,
 					time_t *ptimestamp,
 					char **pstripped,
-					char **psnappath)
+					char **psnappath,
+					bool *_already_converted)
 {
 	struct tm tm;
 	time_t timestamp = 0;
@@ -608,6 +611,10 @@ static bool shadow_copy2_strip_snapshot_
 
 	DEBUG(10, (__location__ ": enter path '%s'\n", name));
 
+	if (_already_converted != NULL) {
+		*_already_converted = false;
+	}
+
 	abs_path = make_path_absolute(mem_ctx, priv, name);
 	if (abs_path == NULL) {
 		ret = false;
@@ -630,6 +637,9 @@ static bool shadow_copy2_strip_snapshot_
 	}
 
 	if (already_converted) {
+		if (_already_converted != NULL) {
+			*_already_converted = true;
+		}
 		goto out;
 	}
 
@@ -759,9 +769,26 @@ static bool shadow_copy2_strip_snapshot(
 					orig_name,
 					ptimestamp,
 					pstripped,
+					NULL,
 					NULL);
 }
 
+static bool shadow_copy2_strip_snapshot_converted(TALLOC_CTX *mem_ctx,
+					struct vfs_handle_struct *handle,
+					const char *orig_name,
+					time_t *ptimestamp,
+					char **pstripped,
+					bool *is_converted)
+{
+	return shadow_copy2_strip_snapshot_internal(mem_ctx,
+					handle,
+					orig_name,
+					ptimestamp,
+					pstripped,
+					NULL,
+					is_converted);
+}
+
 static char *shadow_copy2_find_mount_point(TALLOC_CTX *mem_ctx,
 					   vfs_handle_struct *handle)
 {
@@ -1119,12 +1146,14 @@ static int shadow_copy2_rename(vfs_handl
 
 	if (!shadow_copy2_strip_snapshot_internal(talloc_tos(), handle,
 					 smb_fname_src->base_name,
-					 &timestamp_src, NULL, &snappath_src)) {
+					 &timestamp_src, NULL, &snappath_src,
+					 NULL)) {
 		return -1;
 	}
 	if (!shadow_copy2_strip_snapshot_internal(talloc_tos(), handle,
 					 smb_fname_dst->base_name,
-					 &timestamp_dst, NULL, &snappath_dst)) {
+					 &timestamp_dst, NULL, &snappath_dst,
+					 NULL)) {
 		return -1;
 	}
 	if (timestamp_src != 0) {
@@ -1163,7 +1192,8 @@ static int shadow_copy2_symlink(vfs_hand
 				link_contents,
 				&timestamp_old,
 				NULL,
-				&snappath_old)) {
+				&snappath_old,
+				NULL)) {
 		return -1;
 	}
 	if (!shadow_copy2_strip_snapshot_internal(talloc_tos(),
@@ -1171,7 +1201,8 @@ static int shadow_copy2_symlink(vfs_hand
 				new_smb_fname->base_name,
 				&timestamp_new,
 				NULL,
-				&snappath_new)) {
+				&snappath_new,
+				NULL)) {
 		return -1;
 	}
 	if ((timestamp_old != 0) || (timestamp_new != 0)) {
@@ -1202,7 +1233,8 @@ static int shadow_copy2_link(vfs_handle_
 				old_smb_fname->base_name,
 				&timestamp_old,
 				NULL,
-				&snappath_old)) {
+				&snappath_old,
+				NULL)) {
 		return -1;
 	}
 	if (!shadow_copy2_strip_snapshot_internal(talloc_tos(),
@@ -1210,7 +1242,8 @@ static int shadow_copy2_link(vfs_handle_
 				new_smb_fname->base_name,
 				&timestamp_new,
 				NULL,
-				&snappath_new)) {
+				&snappath_new,
+				NULL)) {
 		return -1;
 	}
 	if ((timestamp_old != 0) || (timestamp_new != 0)) {
@@ -1321,21 +1354,63 @@ static int shadow_copy2_fstat(vfs_handle
 			      SMB_STRUCT_STAT *sbuf)
 {
 	time_t timestamp = 0;
+	struct smb_filename *orig_smb_fname = NULL;
+	struct smb_filename vss_smb_fname;
+	struct smb_filename *orig_base_smb_fname = NULL;
+	struct smb_filename vss_base_smb_fname;
+	char *stripped = NULL;
+	int saved_errno = 0;
+	bool ok;
 	int ret;
 
+	ok = shadow_copy2_strip_snapshot(talloc_tos(), handle,
+					 fsp->fsp_name->base_name,
+					 &timestamp, &stripped);
+	if (!ok) {
+		return -1;
+	}
+
+	if (timestamp == 0) {
+		TALLOC_FREE(stripped);
+		return SMB_VFS_NEXT_FSTAT(handle, fsp, sbuf);
+	}
+
+	vss_smb_fname = *fsp->fsp_name;
+	vss_smb_fname.base_name = shadow_copy2_convert(talloc_tos(),
+						       handle,
+						       stripped,
+						       timestamp);
+	TALLOC_FREE(stripped);
+	if (vss_smb_fname.base_name == NULL) {
+		return -1;
+	}
+
+	orig_smb_fname = fsp->fsp_name;
+	fsp->fsp_name = &vss_smb_fname;
+
+	if (fsp->base_fsp != NULL) {
+		vss_base_smb_fname = *fsp->base_fsp->fsp_name;
+		vss_base_smb_fname.base_name = vss_smb_fname.base_name;
+		orig_base_smb_fname = fsp->base_fsp->fsp_name;
+		fsp->base_fsp->fsp_name = &vss_base_smb_fname;
+	}
+
 	ret = SMB_VFS_NEXT_FSTAT(handle, fsp, sbuf);
-	if (ret == -1) {
-		return ret;
+	fsp->fsp_name = orig_smb_fname;
+	if (fsp->base_fsp != NULL) {
+		fsp->base_fsp->fsp_name = orig_base_smb_fname;
 	}
-	if (!shadow_copy2_strip_snapshot(talloc_tos(), handle,
-					 fsp->fsp_name->base_name,
-					 &timestamp, NULL)) {
-		return 0;
+	if (ret == -1) {
+		saved_errno = errno;
 	}
-	if (timestamp != 0) {
+
+	if (ret == 0) {
 		convert_sbuf(handle, fsp->fsp_name->base_name, sbuf);
 	}
-	return 0;
+	if (saved_errno != 0) {
+		errno = saved_errno;
+	}
+	return ret;
 }
 
 static int shadow_copy2_open(vfs_handle_struct *handle,
@@ -1345,15 +1420,27 @@ static int shadow_copy2_open(vfs_handle_
 	time_t timestamp = 0;
 	char *stripped = NULL;
 	char *tmp;
+	bool is_converted = false;
 	int saved_errno = 0;
 	int ret;
 
-	if (!shadow_copy2_strip_snapshot(talloc_tos(), handle,
+	if (!shadow_copy2_strip_snapshot_converted(talloc_tos(), handle,
 					 smb_fname->base_name,
-					 &timestamp, &stripped)) {
+					 &timestamp, &stripped,
+					 &is_converted)) {
 		return -1;
 	}
 	if (timestamp == 0) {
+		if (is_converted) {
+			/*
+			 * Just pave over the user requested mode and use
+			 * O_RDONLY. Later attempts by the client to write on
+			 * the handle will fail in the pwrite() syscall with
+			 * EINVAL which we carefully map to EROFS. In sum, this
+			 * matches Windows behaviour.
+			 */
+			flags = O_RDONLY;
+		}
 		return SMB_VFS_NEXT_OPEN(handle, smb_fname, fsp, flags, mode);
 	}
 
@@ -1367,6 +1454,14 @@ static int shadow_copy2_open(vfs_handle_
 		return -1;
 	}
 
+	/*
+	 * Just pave over the user requested mode and use O_RDONLY. Later
+	 * attempts by the client to write on the handle will fail in the
+	 * pwrite() syscall with EINVAL which we carefully map to EROFS. In sum,
+	 * this matches Windows behaviour.
+	 */
+	flags = O_RDONLY;
+
 	ret = SMB_VFS_NEXT_OPEN(handle, smb_fname, fsp, flags, mode);
 	if (ret == -1) {
 		saved_errno = errno;
@@ -1566,7 +1661,8 @@ static int shadow_copy2_chdir(vfs_handle
 					smb_fname->base_name,
 					&timestamp,
 					&stripped,
-					&snappath)) {
+					&snappath,
+					NULL)) {
 		return -1;
 	}
 	if (stripped != NULL) {
@@ -2903,6 +2999,101 @@ static int shadow_copy2_get_quota(vfs_ha
 	return ret;
 }
 
+static ssize_t shadow_copy2_pwrite(vfs_handle_struct *handle,
+				   files_struct *fsp,
+				   const void *data,
+				   size_t n,
+				   off_t offset)
+{
+	ssize_t nwritten;
+
+	nwritten = SMB_VFS_NEXT_PWRITE(handle, fsp, data, n, offset);
+	if (nwritten == -1) {
+		if (errno == EBADF && fsp->can_write) {
+			errno = EROFS;
+		}
+	}
+
+	return nwritten;
+}
+
+struct shadow_copy2_pwrite_state {
+	vfs_handle_struct *handle;
+	files_struct *fsp;
+	ssize_t ret;
+	struct vfs_aio_state vfs_aio_state;
+};
+
+static void shadow_copy2_pwrite_done(struct tevent_req *subreq);
+
+static struct tevent_req *shadow_copy2_pwrite_send(
+	struct vfs_handle_struct *handle, TALLOC_CTX *mem_ctx,
+	struct tevent_context *ev, struct files_struct *fsp,
+	const void *data, size_t n, off_t offset)
+{
+	struct tevent_req *req = NULL, *subreq = NULL;
+	struct shadow_copy2_pwrite_state *state = NULL;
+
+	req = tevent_req_create(mem_ctx, &state,
+				struct shadow_copy2_pwrite_state);
+	if (req == NULL) {
+		return NULL;
+	}
+	state->handle = handle;
+	state->fsp = fsp;
+
+	subreq = SMB_VFS_NEXT_PWRITE_SEND(state,
+					  ev,
+					  handle,
+					  fsp,
+					  data,
+					  n,
+					  offset);
+	if (tevent_req_nomem(subreq, req)) {
+		return tevent_req_post(req, ev);
+	}
+	tevent_req_set_callback(subreq, shadow_copy2_pwrite_done, req);
+
+	return req;
+}
+
+static void shadow_copy2_pwrite_done(struct tevent_req *subreq)
+{
+	struct tevent_req *req = tevent_req_callback_data(
+		subreq, struct tevent_req);
+	struct shadow_copy2_pwrite_state *state = tevent_req_data(
+		req, struct shadow_copy2_pwrite_state);
+
+	state->ret = SMB_VFS_PWRITE_RECV(subreq, &state->vfs_aio_state);
+	TALLOC_FREE(subreq);
+	if (state->ret == -1) {
+		tevent_req_error(req, state->vfs_aio_state.error);
+		return;
+	}
+
+	tevent_req_done(req);
+}
+
+static ssize_t shadow_copy2_pwrite_recv(struct tevent_req *req,
+					  struct vfs_aio_state *vfs_aio_state)
+{
+	struct shadow_copy2_pwrite_state *state = tevent_req_data(
+		req, struct shadow_copy2_pwrite_state);
+
+	if (tevent_req_is_unix_error(req, &vfs_aio_state->error)) {
+		if ((vfs_aio_state->error == EBADF) &&
+		    state->fsp->can_write)
+		{
+			vfs_aio_state->error = EROFS;
+			errno = EROFS;
+		}
+		return -1;
+	}
+
+	*vfs_aio_state = state->vfs_aio_state;
+	return state->ret;
+}
+
 static int shadow_copy2_connect(struct vfs_handle_struct *handle,
 				const char *service, const char *user)
 {
@@ -3266,6 +3457,9 @@ static struct vfs_fn_pointers vfs_shadow
 	.chmod_acl_fn = shadow_copy2_chmod_acl,
 	.chflags_fn = shadow_copy2_chflags,
 	.get_real_filename_fn = shadow_copy2_get_real_filename,
+	.pwrite_fn = shadow_copy2_pwrite,
+	.pwrite_send_fn = shadow_copy2_pwrite_send,
+	.pwrite_recv_fn = shadow_copy2_pwrite_recv,
 	.connectpath_fn = shadow_copy2_connectpath,
 };
 
diff -Npur samba-4.8.8/source3/modules/vfs_streams_xattr.c samba-4.8.9/source3/modules/vfs_streams_xattr.c
--- samba-4.8.8/source3/modules/vfs_streams_xattr.c	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/modules/vfs_streams_xattr.c	2019-02-07 10:22:11.000000000 +0100
@@ -544,6 +544,31 @@ static int streams_xattr_open(vfs_handle
 	return -1;
 }
 
+static int streams_xattr_close(vfs_handle_struct *handle,
+			       files_struct *fsp)
+{
+	int ret;
+	int fd;
+
+	fd = fsp->fh->fd;
+
+	DBG_DEBUG("streams_xattr_close called [%s] fd [%d]\n",
+			smb_fname_str_dbg(fsp->fsp_name), fd);
+
+	if (!is_ntfs_stream_smb_fname(fsp->fsp_name)) {
+		return SMB_VFS_NEXT_CLOSE(handle, fsp);
+	}
+
+	if (is_ntfs_default_stream_smb_fname(fsp->fsp_name)) {
+		return SMB_VFS_NEXT_CLOSE(handle, fsp);
+	}
+
+	ret = close(fd);
+	fsp->fh->fd = -1;
+
+	return ret;
+}
+
 static int streams_xattr_unlink(vfs_handle_struct *handle,
 				const struct smb_filename *smb_fname)
 {
@@ -1669,6 +1694,7 @@ static struct vfs_fn_pointers vfs_stream
 	.fs_capabilities_fn = streams_xattr_fs_capabilities,
 	.connect_fn = streams_xattr_connect,
 	.open_fn = streams_xattr_open,
+	.close_fn = streams_xattr_close,
 	.stat_fn = streams_xattr_stat,
 	.fstat_fn = streams_xattr_fstat,
 	.lstat_fn = streams_xattr_lstat,
diff -Npur samba-4.8.8/source3/modules/wscript_build samba-4.8.9/source3/modules/wscript_build
--- samba-4.8.8/source3/modules/wscript_build	2018-10-09 09:46:34.000000000 +0200
+++ samba-4.8.9/source3/modules/wscript_build	2019-02-07 10:22:11.000000000 +0100
@@ -494,6 +494,14 @@ bld.SAMBA3_MODULE('vfs_glusterfs',
                   internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_glusterfs'),
                   enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_glusterfs'))
 
+bld.SAMBA3_MODULE('vfs_glusterfs_fuse',
+                  subsystem='vfs',
+                  source='vfs_glusterfs_fuse.c',
+                  deps='',
+                  init_function='',
+                  internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_glusterfs_fuse'),
+                  enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_glusterfs_fuse'))
+
 bld.SAMBA3_MODULE('vfs_worm',
                   subsystem='vfs',
                   source='vfs_worm.c',
diff -Npur samba-4.8.8/source3/rpc_server/srvsvc/srv_srvsvc_nt.c samba-4.8.9/source3/rpc_server/srvsvc/srv_srvsvc_nt.c
--- samba-4.8.8/source3/rpc_server/srvsvc/srv_srvsvc_nt.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source3/rpc_server/srvsvc/srv_srvsvc_nt.c	2019-02-07 10:22:11.000000000 +0100
@@ -2359,6 +2359,7 @@ WERROR _srvsvc_NetGetFileSecurity(struct
 					r->in.file,
 					ucf_flags,
 					NULL,
+					NULL,
 					&smb_fname);
 	if (!NT_STATUS_IS_OK(nt_status)) {
 		werr = ntstatus_to_werror(nt_status);
@@ -2502,6 +2503,7 @@ WERROR _srvsvc_NetSetFileSecurity(struct
 					r->in.file,
 					ucf_flags,
 					NULL,
+					NULL,
 					&smb_fname);
 	if (!NT_STATUS_IS_OK(nt_status)) {
 		werr = ntstatus_to_werror(nt_status);
diff -Npur samba-4.8.8/source3/script/tests/test_shadow_copy_torture.sh samba-4.8.9/source3/script/tests/test_shadow_copy_torture.sh
--- samba-4.8.8/source3/script/tests/test_shadow_copy_torture.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.9/source3/script/tests/test_shadow_copy_torture.sh	2019-02-07 10:22:11.000000000 +0100
@@ -0,0 +1,114 @@
+#!/bin/bash
+#
+# Blackbox test for shadow_copy2 VFS.
+#
+
+if [ $# -lt 7 ]; then
+cat <<EOF
+Usage: test_shadow_copy SERVER SERVER_IP DOMAIN USERNAME PASSWORD WORKDIR SMBTORTURE
+EOF
+exit 1;
+fi
+
+SERVER=${1}
+SERVER_IP=${2}
+DOMAIN=${3}
+USERNAME=${4}
+PASSWORD=${5}
+WORKDIR=${6}
+SMBTORTURE="$VALGRIND ${7}"
+shift 7
+
+incdir=`dirname $0`/../../../testprogs/blackbox
+. $incdir/subunit.sh
+
+SNAPSHOT="@GMT-2015.10.31-19.40.30"
+
+failed=0
+
+# build a hierarchy of files, symlinks, and directories
+build_files()
+{
+    local destdir
+    destdir=$1
+
+    echo "$content" > $destdir/foo
+}
+
+# build a snapshots directory
+build_snapshots()
+{
+    local snapdir
+
+    snapdir=$WORKDIR/.snapshots
+
+    mkdir -p $snapdir
+    mkdir $snapdir/$SNAPSHOT
+
+    build_files $snapdir/$SNAPSHOT
+}
+
+build_stream_on_snapshot()
+{
+    file=$WORKDIR/.snapshots/$SNAPSHOT/foo
+
+    setfattr -n 'user.DosStream.bar:$DATA' -v baz $file || return 1
+}
+
+test_shadow_copy_write()
+{
+    local msg
+
+    msg=$1
+
+    #delete snapshots from previous tests
+    find $WORKDIR -name ".snapshots" -exec rm -rf {} \; 1>/dev/null 2>&1
+    build_snapshots
+
+    testit "writing to shadow copy of a file" \
+	   $SMBTORTURE \
+	   -U$USERNAME%$PASSWORD \
+	   "//$SERVER/shadow_write" \
+	   --option="torture:twrp_file=foo" \
+	   --option="torture:twrp_snapshot=$SNAPSHOT" \
+	   smb2.twrp.write || \
+        failed=`expr $failed + 1`
+}
+
+test_shadow_copy_stream()
+{
+    local msg
+
+    msg=$1
+
+    #delete snapshots from previous tests
+    find $WORKDIR -name ".snapshots" -exec rm -rf {} \; 1>/dev/null 2>&1
+    build_snapshots
+    build_stream_on_snapshot || {
+	subunit_start_test msg
+	subunit_skip_test msg <<EOF
+test_shadow_copy_stream needs an fs with xattrs
+EOF
+	return 0
+    }
+
+    testit "reading stream of a shadow copy of a file" \
+	   $SMBTORTURE \
+	   -U$USERNAME%$PASSWORD \
+	   "//$SERVER/shadow_write" \
+	   --option="torture:twrp_file=foo" \
+	   --option="torture:twrp_stream=bar" \
+	   --option="torture:twrp_stream_size=3" \
+	   --option="torture:twrp_snapshot=$SNAPSHOT" \
+	   smb2.twrp.stream || \
+        failed=`expr $failed + 1`
+}
+
+build_files $WORKDIR
+
+# test open for writing and write behaviour of snapshoted files
+test_shadow_copy_write "write behaviour of snapshoted files"
+
+test_shadow_copy_stream "reading stream of snapshotted file"
+
+exit $failed
diff -Npur samba-4.8.8/source3/script/tests/test_smbget.sh samba-4.8.9/source3/script/tests/test_smbget.sh
--- samba-4.8.8/source3/script/tests/test_smbget.sh	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/source3/script/tests/test_smbget.sh	2019-02-07 10:22:11.000000000 +0100
@@ -37,15 +37,18 @@ create_test_data()
 
 remove_test_data()
 {
-	rm -rf dir1 dir2 testfile
 	pushd $WORKDIR
 	rm -rf dir1 dir2 testfile
 	popd
 }
 
+clear_download_area() {
+	rm -rf dir1 dir2 testfile dir001 dir004
+}
+
 test_singlefile_guest()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	echo "$SMBGET -v -a smb://$SERVER_IP/smbget/testfile"
 	$SMBGET -v -a smb://$SERVER_IP/smbget/testfile
 	if [ $? -ne 0 ]; then
@@ -62,7 +65,7 @@ test_singlefile_guest()
 
 test_singlefile_U()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	$SMBGET -v -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/testfile
 	if [ $? -ne 0 ]; then
 		echo 'ERROR: RC does not match, expected: 0'
@@ -78,7 +81,7 @@ test_singlefile_U()
 
 test_singlefile_smburl()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	$SMBGET -w $DOMAIN smb://$USERNAME:$PASSWORD@$SERVER_IP/smbget/testfile
 	if [ $? -ne 0 ]; then
 		echo 'ERROR: RC does not match, expected: 0'
@@ -94,7 +97,7 @@ test_singlefile_smburl()
 
 test_singlefile_rcfile()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	echo "user $USERNAME%$PASSWORD" > $TMPDIR/rcfile
 	$SMBGET -vn -f $TMPDIR/rcfile smb://$SERVER_IP/smbget/testfile
 	rc=$?
@@ -113,9 +116,7 @@ test_singlefile_rcfile()
 
 test_recursive_U()
 {
-	[ -e testfile ] && rm testfile
-	[ -d dir1 ] && rm -rf dir1
-	[ -d dir2 ] && rm -rf dir2
+	clear_download_area
 	$SMBGET -v -R -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/
 	if [ $? -ne 0 ]; then
 		echo 'ERROR: RC does not match, expected: 0'
@@ -133,9 +134,63 @@ test_recursive_U()
 	return 0
 }
 
+test_recursive_existing_dir()
+{
+	clear_download_area
+	mkdir dir1
+	$SMBGET -v -R -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/
+	if [ $? -ne 0 ]; then
+		echo 'ERROR: RC does not match, expected: 0'
+		return 1
+	fi
+
+	cmp --silent $WORKDIR/testfile ./testfile && \
+	cmp --silent $WORKDIR/dir1/testfile1 ./dir1/testfile1 && \
+	cmp --silent $WORKDIR/dir2/testfile2 ./dir2/testfile2
+	if [ $? -ne 0 ]; then
+		echo 'ERROR: file content does not match'
+		return 1
+	fi
+
+	return 0
+}
+
+
+test_recursive_with_empty() # see Bug 13199
+{
+	clear_download_area
+	# create some additional empty directories
+	mkdir -p $WORKDIR/dir001/dir002/dir003
+	mkdir -p $WORKDIR/dir004/dir005/dir006
+	$SMBGET -v -R -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/
+	rc=$?
+	rm -rf $WORKDIR/dir001
+	rm -rf $WORKDIR/dir004
+	if [ $rc -ne 0 ]; then
+		echo 'ERROR: RC does not match, expected: 0'
+		return 1
+	fi
+
+	cmp --silent $WORKDIR/testfile ./testfile && \
+	cmp --silent $WORKDIR/dir1/testfile1 ./dir1/testfile1 && \
+	cmp --silent $WORKDIR/dir2/testfile2 ./dir2/testfile2
+	if [ $? -ne 0 ]; then
+		echo 'ERROR: file content does not match'
+		return 1
+	fi
+
+	if [ ! -d dir001/dir002/dir003 ] || [ ! -d dir004/dir005/dir006 ]; then
+		echo 'ERROR: empty directories are not present'
+		return 1
+	fi
+
+	return 0
+}
+
+
 test_resume()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	cp $WORKDIR/testfile .
 	truncate -s 1024 testfile
 	$SMBGET -v -r -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/testfile
@@ -155,6 +210,7 @@ test_resume()
 
 test_resume_modified()
 {
+	clear_download_area
 	dd if=/dev/urandom bs=1024 count=2 of=testfile
 	$SMBGET -v -r -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/testfile
 	if [ $? -ne 1 ]; then
@@ -167,7 +223,7 @@ test_resume_modified()
 
 test_update()
 {
-	[ -e testfile ] && rm testfile
+	clear_download_area
 	$SMBGET -v -U$USERNAME%$PASSWORD smb://$SERVER_IP/smbget/testfile
 	if [ $? -ne 0 ]; then
 		echo 'ERROR: RC does not match, expected: 0'
@@ -220,6 +276,12 @@ testit "download single file with rcfile
 testit "recursive download" test_recursive_U \
 	|| failed=`expr $failed + 1`
 
+testit "recursive download (existing target dir)" test_recursive_existing_dir \
+	|| failed=`expr $failed + 1`
+
+testit "recursive download with empty directories" test_recursive_with_empty \
+	|| failed=`expr $failed + 1`
+
 testit "resume download" test_resume \
 	|| failed=`expr $failed + 1`
 
@@ -229,7 +291,9 @@ testit "resume download (modified file)"
 testit "update" test_update \
 	|| failed=`expr $failed + 1`
 
-popd
+clear_download_area
+
+popd # TMPDIR
 
 remove_test_data
 
diff -Npur samba-4.8.8/source3/selftest/tests.py samba-4.8.9/source3/selftest/tests.py
--- samba-4.8.8/source3/selftest/tests.py	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/selftest/tests.py	2019-02-07 10:22:11.000000000 +0100
@@ -275,6 +275,7 @@ for env in ["fileserver"]:
     plantestsuite("samba3.blackbox.offline (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_offline.sh"), '$SERVER', '$SERVER_IP', '$DOMAIN', '$USERNAME', '$PASSWORD', '$LOCAL_PATH/offline', smbclient3])
     plantestsuite("samba3.blackbox.shadow_copy2 NT1 (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_shadow_copy.sh"), '$SERVER', '$SERVER_IP', '$DOMAIN', '$USERNAME', '$PASSWORD', '$LOCAL_PATH/shadow', smbclient3, '-m', 'NT1'])
     plantestsuite("samba3.blackbox.shadow_copy2 SMB3 (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_shadow_copy.sh"), '$SERVER', '$SERVER_IP', '$DOMAIN', '$USERNAME', '$PASSWORD', '$LOCAL_PATH/shadow', smbclient3, '-m', 'SMB3'])
+    plantestsuite("samba3.blackbox.shadow_copy_torture", env, [os.path.join(samba3srcdir, "script/tests/test_shadow_copy_torture.sh"), '$SERVER', '$SERVER_IP', '$DOMAIN', '$USERNAME', '$PASSWORD', '$LOCAL_PATH/shadow', smbtorture4])
     plantestsuite("samba3.blackbox.smbclient.forceuser_validusers (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_forceuser_validusers.sh"), '$SERVER', '$DOMAIN', '$USERNAME', '$PASSWORD', '$LOCAL_PATH', smbclient3])
     plantestsuite("samba3.blackbox.smbget (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_smbget.sh"), '$SERVER', '$SERVER_IP', '$DOMAIN', 'smbget_user', '$PASSWORD', '$LOCAL_PATH/smbget', smbget])
     plantestsuite("samba3.blackbox.netshareenum (%s)" % env, env, [os.path.join(samba3srcdir, "script/tests/test_shareenum.sh"), '$SERVER', '$USERNAME', '$PASSWORD', rpcclient])
diff -Npur samba-4.8.8/source3/smbd/filename.c samba-4.8.9/source3/smbd/filename.c
--- samba-4.8.8/source3/smbd/filename.c	2018-10-09 09:46:34.000000000 +0200
+++ samba-4.8.9/source3/smbd/filename.c	2019-02-07 10:22:11.000000000 +0100
@@ -1555,6 +1555,7 @@ static NTSTATUS build_stream_path(TALLOC
  *			UCF_ALWAYS_ALLOW_WCARD_LCOMP will be OR'd in if
  *			p_cont_wcard != NULL and is true and
  *			UCF_COND_ALLOW_WCARD_LCOMP.
+ * @param twrp		Optional VSS time
  * @param p_cont_wcard	If not NULL, will be set to true if the dfs path
  *			resolution detects a wildcard.
  * @param pp_smb_fname	The final converted name will be allocated if the
@@ -1568,9 +1569,12 @@ static NTSTATUS filename_convert_interna
 				struct smb_request *smbreq,
 				const char *name_in,
 				uint32_t ucf_flags,
+				time_t *twrp,
 				bool *ppath_contains_wcard,
 				struct smb_filename **pp_smb_fname)
 {
+	const char *name = NULL;
+	char *twrp_name = NULL;
 	NTSTATUS status;
 
 	*pp_smb_fname = NULL;
@@ -1621,14 +1625,37 @@ static NTSTATUS filename_convert_interna
 		ucf_flags |= UCF_ALWAYS_ALLOW_WCARD_LCOMP;
 	}
 
-	status = unix_convert(ctx, conn, name_in, pp_smb_fname, ucf_flags);
+	name = name_in;
+	if (twrp != NULL) {
+		struct tm *tm = NULL;
+
+		tm = gmtime(twrp);
+		twrp_name = talloc_asprintf(
+			ctx,
+			"@GMT-%04u.%02u.%02u-%02u.%02u.%02u/%s",
+			tm->tm_year + 1900,
+			tm->tm_mon + 1,
+			tm->tm_mday,
+			tm->tm_hour,
+			tm->tm_min,
+			tm->tm_sec,
+			name);
+		if (twrp_name == NULL) {
+			return NT_STATUS_NO_MEMORY;
+		}
+		name = twrp_name;
+	}
+
+	status = unix_convert(ctx, conn, name, pp_smb_fname, ucf_flags);
 	if (!NT_STATUS_IS_OK(status)) {
 		DEBUG(10,("filename_convert_internal: unix_convert failed "
 			"for name %s with %s\n",
 			name_in,
 			nt_errstr(status) ));
+		TALLOC_FREE(twrp_name);
 		return status;
 	}
+	TALLOC_FREE(twrp_name);
 
 	if ((ucf_flags & UCF_UNIX_NAME_LOOKUP) &&
 			VALID_STAT((*pp_smb_fname)->st) &&
@@ -1663,6 +1690,7 @@ NTSTATUS filename_convert(TALLOC_CTX *ct
 				connection_struct *conn,
 				const char *name_in,
 				uint32_t ucf_flags,
+				time_t *twrp,
 				bool *ppath_contains_wcard,
 				struct smb_filename **pp_smb_fname)
 {
@@ -1671,6 +1699,7 @@ NTSTATUS filename_convert(TALLOC_CTX *ct
 					NULL,
 					name_in,
 					ucf_flags,
+					twrp,
 					ppath_contains_wcard,
 					pp_smb_fname);
 }
@@ -1693,6 +1722,7 @@ NTSTATUS filename_convert_with_privilege
 					smbreq,
 					name_in,
 					ucf_flags,
+					NULL,
 					ppath_contains_wcard,
 					pp_smb_fname);
 }
diff -Npur samba-4.8.8/source3/smbd/nttrans.c samba-4.8.9/source3/smbd/nttrans.c
--- samba-4.8.8/source3/smbd/nttrans.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source3/smbd/nttrans.c	2019-02-07 10:22:11.000000000 +0100
@@ -543,6 +543,7 @@ void reply_ntcreate_and_X(struct smb_req
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 
 	TALLOC_FREE(case_state);
@@ -1115,6 +1116,7 @@ static void call_nt_transact_create(conn
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 
 	TALLOC_FREE(case_state);
@@ -1636,6 +1638,7 @@ void reply_ntrename(struct smb_request *
 				  oldname,
 				  ucf_flags_src,
 				  NULL,
+				  NULL,
 				  &smb_fname_old);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,
@@ -1652,6 +1655,7 @@ void reply_ntrename(struct smb_request *
 	status = filename_convert(ctx, conn,
 				  newname,
 				  ucf_flags_dst,
+				  NULL,
 				  &dest_has_wcard,
 				  &smb_fname_new);
 	if (!NT_STATUS_IS_OK(status)) {
diff -Npur samba-4.8.8/source3/smbd/open.c samba-4.8.9/source3/smbd/open.c
--- samba-4.8.8/source3/smbd/open.c	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/smbd/open.c	2019-02-07 10:22:11.000000000 +0100
@@ -5519,6 +5519,7 @@ NTSTATUS get_relative_fid_filename(conne
 				new_base_name,
 				ucf_flags,
 				NULL,
+				NULL,
 				smb_fname_out);
 	if (!NT_STATUS_IS_OK(status)) {
 		goto out;
diff -Npur samba-4.8.8/source3/smbd/proto.h samba-4.8.9/source3/smbd/proto.h
--- samba-4.8.8/source3/smbd/proto.h	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/smbd/proto.h	2019-02-07 10:22:11.000000000 +0100
@@ -354,6 +354,7 @@ NTSTATUS filename_convert(TALLOC_CTX *me
 			connection_struct *conn,
 			const char *name_in,
 			uint32_t ucf_flags,
+			time_t *twrp,
 			bool *ppath_contains_wcard,
 			struct smb_filename **pp_smb_fname);
 NTSTATUS filename_convert_with_privilege(TALLOC_CTX *mem_ctx,
diff -Npur samba-4.8.8/source3/smbd/reply.c samba-4.8.9/source3/smbd/reply.c
--- samba-4.8.8/source3/smbd/reply.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source3/smbd/reply.c	2019-02-07 10:22:11.000000000 +0100
@@ -1305,6 +1305,7 @@ void reply_checkpath(struct smb_request
 				name,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 
 	if (!NT_STATUS_IS_OK(status)) {
@@ -1403,6 +1404,7 @@ void reply_getatr(struct smb_request *re
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 		if (!NT_STATUS_IS_OK(status)) {
 			if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -1506,6 +1508,7 @@ void reply_setatr(struct smb_request *re
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -1803,6 +1806,7 @@ void reply_search(struct smb_request *re
 		nt_status = filename_convert(ctx, conn,
 					     path,
 					     ucf_flags,
+					     NULL,
 					     &mask_contains_wcard,
 					     &smb_fname);
 		if (!NT_STATUS_IS_OK(nt_status)) {
@@ -2146,6 +2150,7 @@ void reply_open(struct smb_request *req)
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -2318,6 +2323,7 @@ void reply_open_and_X(struct smb_request
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -2562,6 +2568,7 @@ void reply_mknew(struct smb_request *req
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -2698,6 +2705,7 @@ void reply_ctemp(struct smb_request *req
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 		if (!NT_STATUS_IS_OK(status)) {
 			if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -3236,6 +3244,7 @@ void reply_unlink(struct smb_request *re
 	status = filename_convert(ctx, conn,
 				  name,
 				  ucf_flags,
+				  NULL,
 				  &path_contains_wcard,
 				  &smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
@@ -6168,6 +6177,7 @@ void reply_mkdir(struct smb_request *req
 				 directory,
 				 ucf_flags,
 				 NULL,
+				 NULL,
 				 &smb_dname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -6238,6 +6248,7 @@ void reply_rmdir(struct smb_request *req
 				 directory,
 				 ucf_flags,
 				 NULL,
+				 NULL,
 				 &smb_dname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -7360,6 +7371,7 @@ void reply_mv(struct smb_request *req)
 				  conn,
 				  name,
 				  src_ucf_flags,
+				  NULL,
 				  &src_has_wcard,
 				  &smb_fname_src);
 
@@ -7377,6 +7389,7 @@ void reply_mv(struct smb_request *req)
 				  conn,
 				  newname,
 				  dst_ucf_flags,
+				  NULL,
 				  &dest_has_wcard,
 				  &smb_fname_dst);
 
@@ -7670,6 +7683,7 @@ void reply_copy(struct smb_request *req)
 	status = filename_convert(ctx, conn,
 				  fname_src,
 				  ucf_flags_src,
+				  NULL,
 				  &source_has_wild,
 				  &smb_fname_src);
 	if (!NT_STATUS_IS_OK(status)) {
@@ -7685,6 +7699,7 @@ void reply_copy(struct smb_request *req)
 	status = filename_convert(ctx, conn,
 				  fname_dst,
 				  ucf_flags_dst,
+				  NULL,
 				  &dest_has_wild,
 				  &smb_fname_dst);
 	if (!NT_STATUS_IS_OK(status)) {
diff -Npur samba-4.8.8/source3/smbd/smb2_close.c samba-4.8.9/source3/smbd/smb2_close.c
--- samba-4.8.8/source3/smbd/smb2_close.c	2018-04-26 09:21:03.000000000 +0200
+++ samba-4.8.9/source3/smbd/smb2_close.c	2019-02-07 10:22:11.000000000 +0100
@@ -263,7 +263,7 @@ static NTSTATUS smbd_smb2_close(struct s
 	status = close_file(smbreq, fsp, NORMAL_CLOSE);
 	if (!NT_STATUS_IS_OK(status)) {
 		DEBUG(5,("smbd_smb2_close: close_file[%s]: %s\n",
-			 fsp_str_dbg(fsp), nt_errstr(status)));
+			 smb_fname_str_dbg(smb_fname), nt_errstr(status)));
 		return status;
 	}
 
diff -Npur samba-4.8.8/source3/smbd/smb2_create.c samba-4.8.9/source3/smbd/smb2_create.c
--- samba-4.8.8/source3/smbd/smb2_create.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source3/smbd/smb2_create.c	2019-02-07 10:22:11.000000000 +0100
@@ -423,7 +423,7 @@ static NTSTATUS smbd_smb2_create_durable
 	ucf_flags = filename_create_ucf_flags(smb1req, FILE_OPEN);
 	status = filename_convert(talloc_tos(), fsp->conn,
 				  filename, ucf_flags,
-				  NULL, &smb_fname);
+				  NULL, NULL, &smb_fname);
 	TALLOC_FREE(filename);
 	if (!NT_STATUS_IS_OK(status)) {
 		DEBUG(10, ("filename_convert returned %s\n",
@@ -476,6 +476,8 @@ struct smbd_smb2_create_state {
 	ssize_t lease_len;
 	bool need_replay_cache;
 	struct smbXsrv_open *op;
+	time_t twrp_time;
+	time_t *twrp_timep;
 
 	struct smb2_create_blob *dhnc;
 	struct smb2_create_blob *dh2c;
@@ -891,6 +893,7 @@ static struct tevent_req *smbd_smb2_crea
 				  smb1req->conn,
 				  state->fname,
 				  ucf_flags,
+				  state->twrp_timep,
 				  NULL, /* ppath_contains_wcards */
 				  &smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
@@ -1178,9 +1181,6 @@ static void smbd_smb2_create_before_exec
 
 	if (state->twrp != NULL) {
 		NTTIME nttime;
-		time_t t;
-		struct tm *tm;
-		char *tmpname = state->fname;
 
 		if (state->twrp->data.length != 8) {
 			tevent_req_nterror(req, NT_STATUS_INVALID_PARAMETER);
@@ -1188,27 +1188,9 @@ static void smbd_smb2_create_before_exec
 		}
 
 		nttime = BVAL(state->twrp->data.data, 0);
-		t = nt_time_to_unix(nttime);
-		tm = gmtime(&t);
+		state->twrp_time = nt_time_to_unix(nttime);
+		state->twrp_timep = &state->twrp_time;
 
-		state->fname = talloc_asprintf(
-			state,
-			"%s\\@GMT-%04u.%02u.%02u-%02u.%02u.%02u",
-			state->fname,
-			tm->tm_year + 1900,
-			tm->tm_mon + 1,
-			tm->tm_mday,
-			tm->tm_hour,
-			tm->tm_min,
-			tm->tm_sec);
-		if (tevent_req_nomem(state->fname, req)) {
-			return;
-		}
-		TALLOC_FREE(tmpname);
-		/*
-		 * Tell filename_create_ucf_flags() this
-		 * is an @GMT path.
-		 */
 		smb1req->flags2 |= FLAGS2_REPARSE_PATH;
 	}
 
diff -Npur samba-4.8.8/source3/smbd/smb2_query_directory.c samba-4.8.9/source3/smbd/smb2_query_directory.c
--- samba-4.8.8/source3/smbd/smb2_query_directory.c	2018-04-26 09:21:03.000000000 +0200
+++ samba-4.8.9/source3/smbd/smb2_query_directory.c	2019-02-07 10:22:11.000000000 +0100
@@ -400,6 +400,7 @@ static struct tevent_req *smbd_smb2_quer
 				conn,
 				fullpath,
 				ucf_flags,
+				NULL,
 				&wcard_has_wild,
 				&smb_fname);
 
diff -Npur samba-4.8.8/source3/smbd/trans2.c samba-4.8.9/source3/smbd/trans2.c
--- samba-4.8.8/source3/smbd/trans2.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source3/smbd/trans2.c	2019-02-07 10:22:11.000000000 +0100
@@ -1296,6 +1296,7 @@ static void call_trans2open(connection_s
 				fname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname);
 	if (!NT_STATUS_IS_OK(status)) {
 		if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -2737,6 +2738,7 @@ close_if_end = %d requires_resume_key =
 		ntstatus = filename_convert(talloc_tos(), conn,
 				    directory,
 				    ucf_flags,
+				    NULL,
 				    &mask_contains_wcard,
 				    &smb_dname);
 	}
@@ -5850,6 +5852,7 @@ static void call_trans2qfilepathinfo(con
 					fname,
 					ucf_flags,
 					NULL,
+					NULL,
 					&smb_fname);
 		if (!NT_STATUS_IS_OK(status)) {
 			if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -6686,6 +6689,7 @@ static NTSTATUS smb_set_file_unix_hlink(
 				oldname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname_old);
 	if (!NT_STATUS_IS_OK(status)) {
 		return status;
@@ -6761,6 +6765,7 @@ static NTSTATUS smb2_file_rename_informa
 				newname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname_dst);
 	if (!NT_STATUS_IS_OK(status)) {
 		return status;
@@ -6871,6 +6876,7 @@ static NTSTATUS smb_file_link_informatio
 				newname,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_fname_dst);
 	if (!NT_STATUS_IS_OK(status)) {
 		return status;
@@ -8831,6 +8837,7 @@ static void call_trans2setfilepathinfo(c
 					 fname,
 					 ucf_flags,
 					 NULL,
+					 NULL,
 					 &smb_fname);
 		if (!NT_STATUS_IS_OK(status)) {
 			if (NT_STATUS_EQUAL(status,NT_STATUS_PATH_NOT_COVERED)) {
@@ -8980,6 +8987,7 @@ static void call_trans2mkdir(connection_
 				directory,
 				ucf_flags,
 				NULL,
+				NULL,
 				&smb_dname);
 
 	if (!NT_STATUS_IS_OK(status)) {
diff -Npur samba-4.8.8/source3/utils/smbget.c samba-4.8.9/source3/utils/smbget.c
--- samba-4.8.8/source3/utils/smbget.c	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source3/utils/smbget.c	2019-02-07 10:22:11.000000000 +0100
@@ -190,13 +190,22 @@ static bool smb_download_dir(const char
 	while (*relname == '/') {
 		relname++;
 	}
-	mkdir(relname, 0755);
+
+	if (strlen(relname) > 0) {
+		int rc = mkdir(relname, 0755);
+		if (rc == -1 && errno != EEXIST) {
+			fprintf(stderr, "Can't create directory %s: %s\n",
+				relname, strerror(errno));
+			return false;
+		}
+	}
 
 	tmpname = SMB_STRDUP(name);
 
 	while ((dirent = smbc_readdir(dirhandle))) {
 		char *newname;
 		if (!strcmp(dirent->name, ".") || !strcmp(dirent->name, "..")) {
+			ok = true;
 			continue;
 		}
 		if (asprintf(&newname, "%s/%s", tmpname, dirent->name) == -1) {
diff -Npur samba-4.8.8/source3/wscript samba-4.8.9/source3/wscript
--- samba-4.8.8/source3/wscript	2018-10-09 09:46:34.000000000 +0200
+++ samba-4.8.9/source3/wscript	2019-02-07 10:22:11.000000000 +0100
@@ -1581,6 +1581,9 @@ main() {
         conf.CHECK_CFG(package='glusterfs-api', args='"glusterfs-api >= 6" --cflags --libs',
                        msg='Checking for glusterfs-api >= 6',
                        uselib_store="GFAPI_VER_6")
+        conf.CHECK_CFG(package='glusterfs-api', args='"glusterfs-api >= 7.6" --cflags --libs',
+                       msg='Checking for glusterfs-api >= 7.6',
+                       uselib_store="GFAPI_VER_7_6")
     else:
         conf.SET_TARGET_TYPE('gfapi', 'EMPTY')
         conf.undefine('HAVE_GLUSTERFS')
@@ -1672,6 +1675,7 @@ main() {
                                       vfs_media_harmony vfs_unityed_media vfs_fruit vfs_shell_snap
                                       vfs_commit vfs_worm vfs_crossrename vfs_linux_xfs_sgid
                                       vfs_time_audit vfs_offline vfs_virusfilter
+                                      vfs_glusterfs_fuse
                                   '''))
     default_shared_modules.extend(TO_LIST('auth_script idmap_tdb2 idmap_script'))
     # these have broken dependencies
diff -Npur samba-4.8.8/source4/dns_server/dnsserver_common.c samba-4.8.9/source4/dns_server/dnsserver_common.c
--- samba-4.8.8/source4/dns_server/dnsserver_common.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.9/source4/dns_server/dnsserver_common.c	2019-02-07 10:22:11.000000000 +0100
@@ -481,7 +481,7 @@ static int dns_wildcard_lookup(struct ld
 				      samdb,
 				      frame,
 				      parent,
-				      LDB_SCOPE_ONELEVEL,
+				      LDB_SCOPE_SUBTREE,
 				      query,
 				      attrs,
 				      NULL,
diff -Npur samba-4.8.8/source4/lib/messaging/messaging.c samba-4.8.9/source4/lib/messaging/messaging.c
--- samba-4.8.8/source4/lib/messaging/messaging.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.9/source4/lib/messaging/messaging.c	2019-02-07 10:22:11.000000000 +0100
@@ -121,6 +121,68 @@ static void ringbuf_log_msg(struct imess
 	imessaging_send(msg, src, MSG_RINGBUF_LOG, &blob);
 }
 
+/****************************************************************************
+ Receive a "set debug level" message.
+****************************************************************************/
+
+static void debug_imessage(struct imessaging_context *msg_ctx,
+			   void *private_data,
+			   uint32_t msg_type,
+			   struct server_id src,
+			   DATA_BLOB *data)
+{
+	const char *params_str = (const char *)data->data;
+	struct server_id_buf src_buf;
+	struct server_id dst = imessaging_get_server_id(msg_ctx);
+	struct server_id_buf dst_buf;
+
+	/* Check, it's a proper string! */
+	if (params_str[(data->length)-1] != '\0') {
+		DBG_ERR("Invalid debug message from pid %s to pid %s\n",
+			server_id_str_buf(src, &src_buf),
+			server_id_str_buf(dst, &dst_buf));
+		return;
+	}
+
+	DBG_ERR("INFO: Remote set of debug to `%s' (pid %s from pid %s)\n",
+		params_str,
+		server_id_str_buf(dst, &dst_buf),
+		server_id_str_buf(src, &src_buf));
+
+	debug_parse_levels(params_str);
+}
+
+/****************************************************************************
+ Return current debug level.
+****************************************************************************/
+
+static void debuglevel_imessage(struct imessaging_context *msg_ctx,
+				void *private_data,
+				uint32_t msg_type,
+				struct server_id src,
+				DATA_BLOB *data)
+{
+	char *message = debug_list_class_names_and_levels();
+	DATA_BLOB blob = data_blob_null;
+	struct server_id_buf src_buf;
+	struct server_id dst = imessaging_get_server_id(msg_ctx);
+	struct server_id_buf dst_buf;
+
+	DBG_DEBUG("Received REQ_DEBUGLEVEL message (pid %s from pid %s)\n",
+		  server_id_str_buf(dst, &dst_buf),
+		  server_id_str_buf(src, &src_buf));
+
+	if (message == NULL) {
+		DBG_ERR("debug_list_class_names_and_levels returned NULL\n");
+		return;
+	}
+
+	blob = data_blob_string_const_null(message);
+	imessaging_send(msg_ctx, src, MSG_DEBUGLEVEL, &blob);
+
+	TALLOC_FREE(message);
+}
+
 /*
   return uptime of messaging server via irpc
 */
@@ -418,6 +480,16 @@ struct imessaging_context *imessaging_in
 	if (!NT_STATUS_IS_OK(status)) {
 		goto fail;
 	}
+	status = imessaging_register(msg, NULL, MSG_DEBUG,
+				     debug_imessage);
+	if (!NT_STATUS_IS_OK(status)) {
+		goto fail;
+	}
+	status = imessaging_register(msg, NULL, MSG_REQ_DEBUGLEVEL,
+				     debuglevel_imessage);
+	if (!NT_STATUS_IS_OK(status)) {
+		goto fail;
+	}
 	status = IRPC_REGISTER(msg, irpc, IRPC_UPTIME, irpc_uptime, msg);
 	if (!NT_STATUS_IS_OK(status)) {
 		goto fail;
diff -Npur samba-4.8.8/source4/smbd/server.c samba-4.8.9/source4/smbd/server.c
--- samba-4.8.8/source4/smbd/server.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source4/smbd/server.c	2019-02-07 10:22:11.000000000 +0100
@@ -44,6 +44,8 @@
 #include "nsswitch/winbind_client.h"
 #include "libds/common/roles.h"
 #include "lib/util/tfork.h"
+#include "dsdb/samdb/ldb_modules/util.h"
+#include "lib/util/server_id.h"
 
 #ifdef HAVE_PTHREAD
 #include <pthread.h>
@@ -250,6 +252,31 @@ static void prime_ldb_databases(struct t
 
 
 /*
+  called from 'smbcontrol samba shutdown'
+ */
+static void samba_parent_shutdown(struct imessaging_context *msg,
+				  void *private_data,
+				  uint32_t msg_type,
+				  struct server_id src,
+				  DATA_BLOB *data)
+{
+	struct server_state *state =
+		talloc_get_type_abort(private_data,
+		struct server_state);
+	struct server_id_buf src_buf;
+	struct server_id dst = imessaging_get_server_id(msg);
+	struct server_id_buf dst_buf;
+
+	DBG_ERR("samba_shutdown of %s %s: from %s\n",
+		state->binary_name,
+		server_id_str_buf(dst, &dst_buf),
+		server_id_str_buf(src, &src_buf));
+
+	TALLOC_FREE(state);
+	exit(0);
+}
+
+/*
   called when a fatal condition occurs in a child task
  */
 static NTSTATUS samba_terminate(struct irpc_message *msg,
@@ -274,7 +301,7 @@ static NTSTATUS setup_parent_messaging(s
 
 	msg = imessaging_init(state->event_ctx,
 			      lp_ctx,
-			      cluster_id(0, SAMBA_PARENT_TASKID),
+			      cluster_id(getpid(), SAMBA_PARENT_TASKID),
 			      state->event_ctx);
 	NT_STATUS_HAVE_NO_MEMORY(msg);
 
@@ -283,10 +310,19 @@ static NTSTATUS setup_parent_messaging(s
 		return status;
 	}
 
+	status = imessaging_register(msg, state, MSG_SHUTDOWN,
+				     samba_parent_shutdown);
+	if (!NT_STATUS_IS_OK(status)) {
+		return status;
+	}
+
 	status = IRPC_REGISTER(msg, irpc, SAMBA_TERMINATE,
 			       samba_terminate, state);
+	if (!NT_STATUS_IS_OK(status)) {
+		return status;
+	}
 
-	return status;
+	return NT_STATUS_OK;
 }
 
 
diff -Npur samba-4.8.8/source4/torture/smb2/create.c samba-4.8.9/source4/torture/smb2/create.c
--- samba-4.8.8/source4/torture/smb2/create.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.9/source4/torture/smb2/create.c	2019-02-07 10:22:11.000000000 +0100
@@ -1733,6 +1733,168 @@ done:
 	return ret;
 }
 
+static bool test_twrp_write(struct torture_context *tctx, struct smb2_tree *tree)
+{
+	struct smb2_create io;
+	struct smb2_handle h1 = {{0}};
+	NTSTATUS status;
+	bool ret = true;
+	char *p = NULL;
+	struct tm tm;
+	time_t t;
+	uint64_t nttime;
+	const char *file = NULL;
+	const char *snapshot = NULL;
+
+	file = torture_setting_string(tctx, "twrp_file", NULL);
+	if (file == NULL) {
+		torture_skip(tctx, "missing 'twrp_file' option\n");
+	}
+
+	snapshot = torture_setting_string(tctx, "twrp_snapshot", NULL);
+	if (snapshot == NULL) {
+		torture_skip(tctx, "missing 'twrp_snapshot' option\n");
+	}
+
+	torture_comment(tctx, "Testing timewarp (%s) (%s)\n", file, snapshot);
+
+	setenv("TZ", "GMT", 1);
+	p = strptime(snapshot, "@GMT-%Y.%m.%d-%H.%M.%S", &tm);
+	torture_assert_goto(tctx, p != NULL, ret, done, "strptime\n");
+	torture_assert_goto(tctx, *p == '\0', ret, done, "strptime\n");
+
+	t = mktime(&tm);
+	unix_to_nt_time(&nttime, t);
+
+	io = (struct smb2_create) {
+		.in.desired_access = SEC_FILE_READ_DATA,
+		.in.file_attributes = FILE_ATTRIBUTE_NORMAL,
+		.in.create_disposition = NTCREATEX_DISP_OPEN,
+		.in.share_access = NTCREATEX_SHARE_ACCESS_MASK,
+		.in.fname = file,
+		.in.query_maximal_access = true,
+		.in.timewarp = nttime,
+	};
+
+	status = smb2_create(tree, tctx, &io);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_create\n");
+	smb2_util_close(tree, io.out.file.handle);
+
+	ret = io.out.maximal_access & (SEC_FILE_READ_DATA | SEC_FILE_WRITE_DATA);
+	torture_assert_goto(tctx, ret, ret, done, "Bad access\n");
+
+	io = (struct smb2_create) {
+		.in.desired_access = SEC_FILE_READ_DATA|SEC_FILE_WRITE_DATA,
+		.in.file_attributes = FILE_ATTRIBUTE_NORMAL,
+		.in.create_disposition = NTCREATEX_DISP_OPEN,
+		.in.share_access = NTCREATEX_SHARE_ACCESS_MASK,
+		.in.fname = file,
+		.in.timewarp = nttime,
+	};
+
+	status = smb2_create(tree, tctx, &io);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_create\n");
+	h1 = io.out.file.handle;
+
+	status = smb2_util_write(tree, h1, "123", 0, 3);
+	torture_assert_ntstatus_equal_goto(tctx, status,
+					   NT_STATUS_MEDIA_WRITE_PROTECTED,
+					   ret, done, "smb2_create\n");
+
+	smb2_util_close(tree, h1);
+
+done:
+	return ret;
+}
+
+static bool test_twrp_stream(struct torture_context *tctx,
+			     struct smb2_tree *tree)
+{
+	struct smb2_create io;
+	NTSTATUS status;
+	bool ret = true;
+	char *p = NULL;
+	struct tm tm;
+	time_t t;
+	uint64_t nttime;
+	const char *file = NULL;
+	const char *stream = NULL;
+	const char *snapshot = NULL;
+	int stream_size;
+	char *path = NULL;
+	uint8_t *buf = NULL;
+	struct smb2_handle h1 = {{0}};
+	struct smb2_read r;
+
+	file = torture_setting_string(tctx, "twrp_file", NULL);
+	if (file == NULL) {
+		torture_skip(tctx, "missing 'twrp_file' option\n");
+	}
+
+	stream = torture_setting_string(tctx, "twrp_stream", NULL);
+	if (stream == NULL) {
+		torture_skip(tctx, "missing 'twrp_stream' option\n");
+	}
+
+	snapshot = torture_setting_string(tctx, "twrp_snapshot", NULL);
+	if (snapshot == NULL) {
+		torture_skip(tctx, "missing 'twrp_snapshot' option\n");
+	}
+
+	stream_size = torture_setting_int(tctx, "twrp_stream_size", 0);
+	if (stream_size == 0) {
+		torture_skip(tctx, "missing 'twrp_stream_size' option\n");
+	}
+
+	torture_comment(tctx, "Testing timewarp on stream (%s) (%s)\n",
+			file, snapshot);
+
+	path = talloc_asprintf(tree, "%s:%s", file, stream);
+	torture_assert_not_null_goto(tctx, path, ret, done, "path\n");
+
+	buf = talloc_zero_array(tree, uint8_t, stream_size);
+	torture_assert_not_null_goto(tctx, buf, ret, done, "buf\n");
+
+	setenv("TZ", "GMT", 1);
+	p = strptime(snapshot, "@GMT-%Y.%m.%d-%H.%M.%S", &tm);
+	torture_assert_goto(tctx, p != NULL, ret, done, "strptime\n");
+	torture_assert_goto(tctx, *p == '\0', ret, done, "strptime\n");
+
+	t = mktime(&tm);
+	unix_to_nt_time(&nttime, t);
+
+	io = (struct smb2_create) {
+		.in.desired_access = SEC_FILE_READ_DATA,
+		.in.file_attributes = FILE_ATTRIBUTE_NORMAL,
+		.in.create_disposition = NTCREATEX_DISP_OPEN,
+		.in.share_access = NTCREATEX_SHARE_ACCESS_MASK,
+		.in.fname = path,
+		.in.timewarp = nttime,
+	};
+
+	status = smb2_create(tree, tctx, &io);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_create\n");
+	h1 = io.out.file.handle;
+
+	r = (struct smb2_read) {
+		.in.file.handle = h1,
+		.in.length = stream_size,
+		.in.offset = 0,
+	};
+
+	status = smb2_read(tree, tree, &r);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"smb2_create\n");
+
+	smb2_util_close(tree, h1);
+
+done:
+	return ret;
+}
+
 /*
    basic testing of SMB2 read
 */
@@ -1758,3 +1920,15 @@ struct torture_suite *torture_smb2_creat
 
 	return suite;
 }
+
+struct torture_suite *torture_smb2_twrp_init(TALLOC_CTX *ctx)
+{
+	struct torture_suite *suite = torture_suite_create(ctx, "twrp");
+
+	torture_suite_add_1smb2_test(suite, "write", test_twrp_write);
+	torture_suite_add_1smb2_test(suite, "stream", test_twrp_stream);
+
+	suite->description = talloc_strdup(suite, "SMB2-TWRP tests");
+
+	return suite;
+}
diff -Npur samba-4.8.8/source4/torture/smb2/smb2.c samba-4.8.9/source4/torture/smb2/smb2.c
--- samba-4.8.8/source4/torture/smb2/smb2.c	2018-12-13 10:08:40.000000000 +0100
+++ samba-4.8.9/source4/torture/smb2/smb2.c	2019-02-07 10:22:11.000000000 +0100
@@ -154,6 +154,7 @@ NTSTATUS torture_smb2_init(TALLOC_CTX *c
 	torture_suite_add_suite(suite, torture_smb2_read_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_aio_delay_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_create_init(suite));
+	torture_suite_add_suite(suite, torture_smb2_twrp_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_acls_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_notify_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_notify_inotify_init(suite));
