diff -Npur samba-4.8.5/WHATSNEW.txt samba-4.8.6/WHATSNEW.txt
--- samba-4.8.5/WHATSNEW.txt	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/WHATSNEW.txt	2018-10-09 09:46:34.000000000 +0200
@@ -1,4 +1,72 @@
                    =============================
+                   Release Notes for Samba 4.8.6
+                           October 9, 2018
+                   =============================
+
+
+This is the latest stable release of the Samba 4.8 release series.
+
+
+Changes since 4.8.5:
+--------------------
+
+o  Paulo Alcantara <paulo@paulo.ac>
+   * BUG 13578: s3: util: Do not take over stderr when there is no log file.
+
+o  Jeremy Allison <jra@samba.org>
+   * BUG 13585: s3: smbd: Ensure get_real_filename() copes with empty pathnames.
+
+o  Ralph Boehme <slow@samba.org>
+   * BUG 13441: vfs_fruit: delete 0 byte size streams if AAPL is enabled.
+   * BUG 13549: s3:smbd: Durable Reconnect fails because cookie.allow_reconnect
+     is not set.
+
+o  Alexander Bokovoy <ab@samba.org>
+   * BUG 13539: krb5-samba: Interdomain trust uses different salt principal.
+
+o  Volker Lendecke <vl@samba.org>
+   * BUG 13362: Fix possible memory leak in the Samba process.
+   * BUG 13441: vfs_fruit: Don't unlink the main file.
+   * BUG 13602: smbd: Fix a memleak in async search ask sharemode.
+
+o  Stefan Metzmacher <metze@samba.org>
+   * BUG 11517: Fix Samba GPO issue when Trust is enabled.
+   * BUG 13539: samba-tool: Add virtualKerberosSalt attribute to 'user
+     getpassword/syncpasswords'.
+
+o  Andreas Schneider <asn@samba.org>
+   * BUG 13606: wafsamba: Fix 'make -j<jobs>'.
+
+o  Martin Schwenke <martin@meltin.net>
+   * BUG 13592: ctdbd logs an error until it can successfully connect to
+     eventd.
+   * BUG 13617: Fix race conditions in CTDB recovery lock.
+
+
+#######################################
+Reporting bugs & Development Discussion
+#######################################
+
+Please discuss this release on the samba-technical mailing list or by
+joining the #samba-technical IRC channel on irc.freenode.net.
+
+If you do report problems then please try to send high quality
+feedback. If you don't provide vital information to help us track down
+the problem then you will probably be ignored.  All bug reports should
+be filed under the "Samba 4.1 and newer" product in the project's Bugzilla
+database (https://bugzilla.samba.org/).
+
+
+======================================================================
+== Our Code, Our Bugs, Our Responsibility.
+== The Samba Team
+======================================================================
+
+
+Release notes for older releases follow:
+----------------------------------------
+
+                   =============================
                    Release Notes for Samba 4.8.5
                            August 24, 2018
                    =============================
@@ -13,13 +81,13 @@ Changes since 4.8.4:
 o  Jeremy Allison <jra@samba.org>
    * BUG 13474: python: pysmbd: Additional error path leak fix.
    * BUG 13511: libsmbclient: Initialize written value before use.
-   * BUG 13519: ldb: Refuse to build Samba against a newer minor version of
-     ldb.
    * BUG 13527: s3: libsmbclient: Fix cli_splice() fallback when reading less
      than a complete file.
    * BUG 13537: Using "sendfile = yes" with SMB2 can cause CPU spin.
 
 o  Andrew Bartlett <abartlet@samba.org>
+   * BUG 13519: ldb: Refuse to build Samba against a newer minor version of
+     ldb.
    * BUG 13575: ldb: Release LDB 1.3.6.
 
 o  Bailey Berro <baileyberro@chromium.org>
@@ -110,8 +178,8 @@ database (https://bugzilla.samba.org/).
 ======================================================================
 
 
-Release notes for older releases follow:
-----------------------------------------
+----------------------------------------------------------------------
+
 
                    =============================
                    Release Notes for Samba 4.8.4
diff -Npur samba-4.8.5/auth/credentials/credentials_krb5.c samba-4.8.6/auth/credentials/credentials_krb5.c
--- samba-4.8.5/auth/credentials/credentials_krb5.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/auth/credentials/credentials_krb5.c	2018-10-09 09:46:34.000000000 +0200
@@ -34,6 +34,7 @@
 #include "auth/kerberos/kerberos_util.h"
 #include "auth/kerberos/pac_utils.h"
 #include "param/param.h"
+#include "../libds/common/flags.h"
 
 #undef DBGC_CLASS
 #define DBGC_CLASS DBGC_AUTH
@@ -974,7 +975,7 @@ _PUBLIC_ int cli_credentials_get_keytab(
 	const char *upn = NULL;
 	const char *realm = cli_credentials_get_realm(cred);
 	char *salt_principal = NULL;
-	bool is_computer = false;
+	uint32_t uac_flags = 0;
 
 	if (cred->keytab_obtained >= (MAX(cred->principal_obtained, 
 					  cred->username_obtained))) {
@@ -999,9 +1000,15 @@ _PUBLIC_ int cli_credentials_get_keytab(
 
 	switch (cred->secure_channel_type) {
 	case SEC_CHAN_WKSTA:
-	case SEC_CHAN_BDC:
 	case SEC_CHAN_RODC:
-		is_computer = true;
+		uac_flags = UF_WORKSTATION_TRUST_ACCOUNT;
+		break;
+	case SEC_CHAN_BDC:
+		uac_flags = UF_SERVER_TRUST_ACCOUNT;
+		break;
+	case SEC_CHAN_DOMAIN:
+	case SEC_CHAN_DNS_DOMAIN:
+		uac_flags = UF_INTERDOMAIN_TRUST_ACCOUNT;
 		break;
 	default:
 		upn = cli_credentials_get_principal(cred, mem_ctx);
@@ -1009,13 +1016,14 @@ _PUBLIC_ int cli_credentials_get_keytab(
 			TALLOC_FREE(mem_ctx);
 			return ENOMEM;
 		}
+		uac_flags = UF_NORMAL_ACCOUNT;
 		break;
 	}
 
 	ret = smb_krb5_salt_principal(realm,
 				      username, /* sAMAccountName */
 				      upn, /* userPrincipalName */
-				      is_computer,
+				      uac_flags,
 				      mem_ctx,
 				      &salt_principal);
 	if (ret) {
diff -Npur samba-4.8.5/buildtools/wafsamba/samba_utils.py samba-4.8.6/buildtools/wafsamba/samba_utils.py
--- samba-4.8.5/buildtools/wafsamba/samba_utils.py	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/buildtools/wafsamba/samba_utils.py	2018-10-09 09:46:34.000000000 +0200
@@ -467,6 +467,7 @@ def CHECK_MAKEFLAGS(bld):
     if makeflags is None:
         return
     jobs_set = False
+    jobs = None
     # we need to use shlex.split to cope with the escaping of spaces
     # in makeflags
     for opt in shlex.split(makeflags):
@@ -489,17 +490,21 @@ def CHECK_MAKEFLAGS(bld):
             setattr(Options.options, opt[0:loc], opt[loc+1:])
         elif opt[0] != '-':
             for v in opt:
-                if v == 'j':
+                if re.search(r'j[0-9]*$', v):
                     jobs_set = True
+                    jobs = opt.strip('j')
                 elif v == 'k':
                     Options.options.keep = True
-        elif opt == '-j':
+        elif re.search(r'-j[0-9]*$', opt):
             jobs_set = True
+            jobs = opt.strip('-j')
         elif opt == '-k':
             Options.options.keep = True
     if not jobs_set:
         # default to one job
         Options.options.jobs = 1
+    elif jobs_set and jobs:
+        Options.options.jobs = int(jobs)
 
 Build.BuildContext.CHECK_MAKEFLAGS = CHECK_MAKEFLAGS
 
diff -Npur samba-4.8.5/ctdb/common/sock_daemon.c samba-4.8.6/ctdb/common/sock_daemon.c
--- samba-4.8.5/ctdb/common/sock_daemon.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/ctdb/common/sock_daemon.c	2018-10-09 09:46:34.000000000 +0200
@@ -31,6 +31,7 @@
 #include "lib/util/dlinklist.h"
 #include "lib/util/tevent_unix.h"
 #include "lib/util/become_daemon.h"
+#include "lib/util/sys_rw.h"
 
 #include "common/logging.h"
 #include "common/reqid.h"
@@ -71,6 +72,7 @@ struct sock_daemon_context {
 
 	struct pidfile_context *pid_ctx;
 	struct sock_socket *socket_list;
+	int startup_fd;
 };
 
 /*
@@ -483,6 +485,7 @@ int sock_daemon_setup(TALLOC_CTX *mem_ct
 
 	sockd->funcs = funcs;
 	sockd->private_data = private_data;
+	sockd->startup_fd = -1;
 
 	ret = logging_init(sockd, logging, debug_level, daemon_name);
 	if (ret != 0) {
@@ -514,6 +517,11 @@ int sock_daemon_add_unix(struct sock_dae
 	return 0;
 }
 
+void sock_daemon_set_startup_fd(struct sock_daemon_context *sockd, int fd)
+{
+	sockd->startup_fd = fd;
+}
+
 /*
  * Run socket daemon
  */
@@ -543,6 +551,7 @@ static void sock_daemon_run_socket_fail(
 static void sock_daemon_run_watch_pid(struct tevent_req *subreq);
 static void sock_daemon_run_wait(struct tevent_req *req);
 static void sock_daemon_run_wait_done(struct tevent_req *subreq);
+static void sock_daemon_startup_notify(struct sock_daemon_context *sockd);
 
 struct tevent_req *sock_daemon_run_send(TALLOC_CTX *mem_ctx,
 					struct tevent_context *ev,
@@ -669,6 +678,8 @@ static void sock_daemon_run_started(stru
 		return;
 	}
 	sock_daemon_run_wait(req);
+
+	sock_daemon_startup_notify(sockd);
 }
 
 static void sock_daemon_run_startup_done(struct tevent_req *subreq)
@@ -696,6 +707,8 @@ static void sock_daemon_run_startup_done
 		return;
 	}
 	sock_daemon_run_wait(req);
+
+	sock_daemon_startup_notify(sockd);
 }
 
 static void sock_daemon_run_signal_handler(struct tevent_context *ev,
@@ -961,6 +974,19 @@ static void sock_daemon_run_wait_done(st
 	sock_daemon_run_shutdown(req);
 }
 
+static void sock_daemon_startup_notify(struct sock_daemon_context *sockd)
+{
+	if (sockd->startup_fd != -1) {
+		unsigned int zero = 0;
+		ssize_t num;
+
+		num = sys_write(sockd->startup_fd, &zero, sizeof(zero));
+		if (num != sizeof(zero)) {
+			D_WARNING("Failed to write zero to pipe FD\n");
+		}
+	}
+}
+
 bool sock_daemon_run_recv(struct tevent_req *req, int *perr)
 {
 	int ret;
diff -Npur samba-4.8.5/ctdb/common/sock_daemon.h samba-4.8.6/ctdb/common/sock_daemon.h
--- samba-4.8.5/ctdb/common/sock_daemon.h	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/ctdb/common/sock_daemon.h	2018-10-09 09:46:34.000000000 +0200
@@ -208,6 +208,16 @@ int sock_daemon_add_unix(struct sock_dae
 			 void *private_data);
 
 /**
+ * @brief Set file descriptor for indicating startup success
+ *
+ * On successful completion, 0 (unsigned int) will be written to the fd.
+ *
+ * @param[in] sockd Socket daemon context
+ * @param[in] fd File descriptor
+ */
+void sock_daemon_set_startup_fd(struct sock_daemon_context *sockd, int fd);
+
+/**
  * @brief Async computation start to run a socket daemon
  *
  * @param[in] mem_ctx Talloc memory context
diff -Npur samba-4.8.5/ctdb/doc/ctdb-etcd.7 samba-4.8.6/ctdb/doc/ctdb-etcd.7
--- samba-4.8.5/ctdb/doc/ctdb-etcd.7	2018-08-24 10:19:35.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb-etcd.7	2018-10-09 10:05:13.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-etcd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-ETCD" "7" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-ETCD" "7" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb-statistics.7 samba-4.8.6/ctdb/doc/ctdb-statistics.7
--- samba-4.8.5/ctdb/doc/ctdb-statistics.7	2018-08-24 10:19:35.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb-statistics.7	2018-10-09 10:05:12.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-statistics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-STATISTICS" "7" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-STATISTICS" "7" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb-tunables.7 samba-4.8.6/ctdb/doc/ctdb-tunables.7
--- samba-4.8.5/ctdb/doc/ctdb-tunables.7	2018-08-24 10:19:35.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb-tunables.7	2018-10-09 10:05:12.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb-tunables
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB\-TUNABLES" "7" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB\-TUNABLES" "7" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb.1 samba-4.8.6/ctdb/doc/ctdb.1
--- samba-4.8.5/ctdb/doc/ctdb.1	2018-08-24 10:19:31.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb.1	2018-10-09 10:05:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb.7 samba-4.8.6/ctdb/doc/ctdb.7
--- samba-4.8.5/ctdb/doc/ctdb.7	2018-08-24 10:19:34.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb.7	2018-10-09 10:05:12.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB" "7" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB" "7" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb_diagnostics.1 samba-4.8.6/ctdb/doc/ctdb_diagnostics.1
--- samba-4.8.5/ctdb/doc/ctdb_diagnostics.1	2018-08-24 10:19:33.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb_diagnostics.1	2018-10-09 10:05:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdb_diagnostics
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDB_DIAGNOSTICS" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDB_DIAGNOSTICS" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdb_mutex_ceph_rados_helper.7 samba-4.8.6/ctdb/doc/ctdb_mutex_ceph_rados_helper.7
--- samba-4.8.5/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-08-24 10:19:36.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdb_mutex_ceph_rados_helper.7	2018-10-09 10:05:13.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: Ceph RADOS Mutex
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CEPH RADOS MUTEX" "7" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CEPH RADOS MUTEX" "7" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdbd.1 samba-4.8.6/ctdb/doc/ctdbd.1
--- samba-4.8.5/ctdb/doc/ctdbd.1	2018-08-24 10:19:32.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdbd.1	2018-10-09 10:05:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdbd.conf.5 samba-4.8.6/ctdb/doc/ctdbd.conf.5
--- samba-4.8.5/ctdb/doc/ctdbd.conf.5	2018-08-24 10:19:34.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdbd.conf.5	2018-10-09 10:05:11.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd.conf
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD\&.CONF" "5" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD\&.CONF" "5" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ctdbd_wrapper.1 samba-4.8.6/ctdb/doc/ctdbd_wrapper.1
--- samba-4.8.5/ctdb/doc/ctdbd_wrapper.1	2018-08-24 10:19:33.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ctdbd_wrapper.1	2018-10-09 10:05:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ctdbd_wrapper
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "CTDBD_WRAPPER" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "CTDBD_WRAPPER" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ltdbtool.1 samba-4.8.6/ctdb/doc/ltdbtool.1
--- samba-4.8.5/ctdb/doc/ltdbtool.1	2018-08-24 10:19:32.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ltdbtool.1	2018-10-09 10:05:09.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ltdbtool
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "LTDBTOOL" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "LTDBTOOL" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/onnode.1 samba-4.8.6/ctdb/doc/onnode.1
--- samba-4.8.5/ctdb/doc/onnode.1	2018-08-24 10:19:33.000000000 +0200
+++ samba-4.8.6/ctdb/doc/onnode.1	2018-10-09 10:05:11.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: onnode
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "ONNODE" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "ONNODE" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/doc/ping_pong.1 samba-4.8.6/ctdb/doc/ping_pong.1
--- samba-4.8.5/ctdb/doc/ping_pong.1	2018-08-24 10:19:32.000000000 +0200
+++ samba-4.8.6/ctdb/doc/ping_pong.1	2018-10-09 10:05:10.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ping_pong
 .\"    Author: 
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: CTDB - clustered TDB database
 .\"    Source: ctdb
 .\"  Language: English
 .\"
-.TH "PING_PONG" "1" "08/24/2018" "ctdb" "CTDB \- clustered TDB database"
+.TH "PING_PONG" "1" "10/09/2018" "ctdb" "CTDB \- clustered TDB database"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/ctdb/server/ctdb_cluster_mutex.c samba-4.8.6/ctdb/server/ctdb_cluster_mutex.c
--- samba-4.8.5/ctdb/server/ctdb_cluster_mutex.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/ctdb/server/ctdb_cluster_mutex.c	2018-10-09 09:46:34.000000000 +0200
@@ -196,6 +196,7 @@ ctdb_cluster_mutex(TALLOC_CTX *mem_ctx,
 {
 	struct ctdb_cluster_mutex_handle *h;
 	char **args;
+	sigset_t sigset_term;
 	int ret;
 
 	h = talloc(mem_ctx, struct ctdb_cluster_mutex_handle);
@@ -225,15 +226,41 @@ ctdb_cluster_mutex(TALLOC_CTX *mem_ctx,
 		return NULL;
 	}
 
+	sigemptyset(&sigset_term);
+	sigaddset(&sigset_term, SIGTERM);
+	ret = sigprocmask(SIG_BLOCK, &sigset_term, NULL);
+	if (ret != 0) {
+		DBG_WARNING("Failed to block SIGTERM (%d)\n", errno);
+	}
+
 	h->child = ctdb_fork(ctdb);
 	if (h->child == (pid_t)-1) {
 		close(h->fd[0]);
 		close(h->fd[1]);
 		talloc_free(h);
+		ret = sigprocmask(SIG_UNBLOCK, &sigset_term, NULL);
+		if (ret != 0) {
+			DBG_WARNING("Failed to unblock SIGTERM (%d)\n", errno);
+		}
 		return NULL;
 	}
 
 	if (h->child == 0) {
+		struct sigaction sa = {
+			.sa_handler = SIG_DFL,
+		};
+
+		ret = sigaction(SIGTERM, &sa, NULL);
+		if (ret != 0) {
+			DBG_WARNING("Failed to reset signal handler (%d)\n",
+				    errno);
+		}
+
+		ret = sigprocmask(SIG_UNBLOCK, &sigset_term, NULL);
+		if (ret != 0) {
+			DBG_WARNING("Failed to unblock SIGTERM (%d)\n", errno);
+		}
+
 		/* Make stdout point to the pipe */
 		close(STDOUT_FILENO);
 		dup2(h->fd[1], STDOUT_FILENO);
@@ -248,6 +275,11 @@ ctdb_cluster_mutex(TALLOC_CTX *mem_ctx,
 
 	/* Parent */
 
+	ret = sigprocmask(SIG_UNBLOCK, &sigset_term, NULL);
+	if (ret != 0) {
+		DBG_WARNING("Failed to unblock SIGTERM (%d)\n", errno);
+	}
+
 	DEBUG(DEBUG_DEBUG, (__location__ " Created PIPE FD:%d\n", h->fd[0]));
 	set_close_on_exec(h->fd[0]);
 
diff -Npur samba-4.8.5/ctdb/server/ctdb_eventd.c samba-4.8.6/ctdb/server/ctdb_eventd.c
--- samba-4.8.5/ctdb/server/ctdb_eventd.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/ctdb/server/ctdb_eventd.c	2018-10-09 09:46:34.000000000 +0200
@@ -952,8 +952,10 @@ static struct {
 	const char *pidfile;
 	const char *socket;
 	int pid;
+	int startup_fd;
 } options = {
 	.debug_level = "ERR",
+	.startup_fd = -1,
 };
 
 struct poptOption cmdline_options[] = {
@@ -972,6 +974,8 @@ struct poptOption cmdline_options[] = {
 		"eventd pid file", "FILE" },
 	{ "socket", 's', POPT_ARG_STRING, &options.socket, 0,
 		"eventd socket path", "FILE" },
+	{ "startup-fd", 'S', POPT_ARG_INT, &options.startup_fd, 0,
+		"file descriptor to notify of successful start", "FD" },
 	POPT_TABLEEND
 };
 
@@ -1068,6 +1072,10 @@ int main(int argc, const char **argv)
 		goto fail;
 	}
 
+	if (options.startup_fd != -1) {
+		sock_daemon_set_startup_fd(sockd, options.startup_fd);
+	}
+
 	ret = sock_daemon_run(ev, sockd,
 			      options.pidfile, false, false, options.pid);
 	if (ret == EINTR) {
diff -Npur samba-4.8.5/ctdb/server/ctdb_recoverd.c samba-4.8.6/ctdb/server/ctdb_recoverd.c
--- samba-4.8.5/ctdb/server/ctdb_recoverd.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/ctdb/server/ctdb_recoverd.c	2018-10-09 09:46:34.000000000 +0200
@@ -237,6 +237,8 @@ struct ctdb_banning_state {
 	struct timeval last_reported_time;
 };
 
+struct ctdb_recovery_lock_handle;
+
 /*
   private state of recovery daemon
  */
@@ -258,7 +260,7 @@ struct ctdb_recoverd {
 	uint32_t *force_rebalance_nodes;
 	struct ctdb_node_capabilities *caps;
 	bool frozen_on_inactive;
-	struct ctdb_cluster_mutex_handle *recovery_lock_handle;
+	struct ctdb_recovery_lock_handle *recovery_lock_handle;
 };
 
 #define CONTROL_TIMEOUT() timeval_current_ofs(ctdb->tunable.recover_timeout, 0)
@@ -879,18 +881,19 @@ static bool ctdb_recovery_have_lock(stru
 	return (rec->recovery_lock_handle != NULL);
 }
 
-struct hold_reclock_state {
+struct ctdb_recovery_lock_handle {
 	bool done;
 	bool locked;
 	double latency;
+	struct ctdb_cluster_mutex_handle *h;
 };
 
 static void take_reclock_handler(char status,
 				 double latency,
 				 void *private_data)
 {
-	struct hold_reclock_state *s =
-		(struct hold_reclock_state *) private_data;
+	struct ctdb_recovery_lock_handle *s =
+		(struct ctdb_recovery_lock_handle *) private_data;
 
 	switch (status) {
 	case '0':
@@ -930,41 +933,68 @@ static bool ctdb_recovery_lock(struct ct
 {
 	struct ctdb_context *ctdb = rec->ctdb;
 	struct ctdb_cluster_mutex_handle *h;
-	struct hold_reclock_state s = {
-		.done = false,
-		.locked = false,
-		.latency = 0,
+	struct ctdb_recovery_lock_handle *s;
+
+	s = talloc_zero(rec, struct ctdb_recovery_lock_handle);
+	if (s == NULL) {
+		DBG_ERR("Memory allocation error\n");
+		return false;
 	};
 
-	h = ctdb_cluster_mutex(rec, ctdb, ctdb->recovery_lock, 0,
-			       take_reclock_handler, &s,
-			       lost_reclock_handler, rec);
+	h = ctdb_cluster_mutex(s,
+			       ctdb,
+			       ctdb->recovery_lock,
+			       0,
+			       take_reclock_handler,
+			       s,
+			       lost_reclock_handler,
+			       rec);
 	if (h == NULL) {
+		talloc_free(s);
 		return false;
 	}
 
-	while (!s.done) {
+	rec->recovery_lock_handle = s;
+	s->h = h;
+
+	while (! s->done) {
 		tevent_loop_once(ctdb->ev);
 	}
 
-	if (! s.locked) {
-		talloc_free(h);
+	if (! s->locked) {
+		TALLOC_FREE(rec->recovery_lock_handle);
 		return false;
 	}
 
-	rec->recovery_lock_handle = h;
-	ctdb_ctrl_report_recd_lock_latency(ctdb, CONTROL_TIMEOUT(),
-					   s.latency);
+	ctdb_ctrl_report_recd_lock_latency(ctdb,
+					   CONTROL_TIMEOUT(),
+					   s->latency);
 
 	return true;
 }
 
 static void ctdb_recovery_unlock(struct ctdb_recoverd *rec)
 {
-	if (rec->recovery_lock_handle != NULL) {
-		DEBUG(DEBUG_NOTICE, ("Releasing recovery lock\n"));
-		TALLOC_FREE(rec->recovery_lock_handle);
+	if (rec->recovery_lock_handle == NULL) {
+		return;
+	}
+
+	if (! rec->recovery_lock_handle->done) {
+		/*
+		 * Taking of recovery lock still in progress.  Free
+		 * the cluster mutex handle to release it but leave
+		 * the recovery lock handle in place to allow taking
+		 * of the lock to fail.
+		 */
+		D_NOTICE("Cancelling recovery lock\n");
+		TALLOC_FREE(rec->recovery_lock_handle->h);
+		rec->recovery_lock_handle->done = true;
+		rec->recovery_lock_handle->locked = false;
+		return;
 	}
+
+	D_NOTICE("Releasing recovery lock\n");
+	TALLOC_FREE(rec->recovery_lock_handle);
 }
 
 static void ban_misbehaving_nodes(struct ctdb_recoverd *rec, bool *self_ban)
@@ -1305,31 +1335,47 @@ static int do_recovery(struct ctdb_recov
 		goto fail;
 	}
 
-        if (ctdb->recovery_lock != NULL) {
+	if (ctdb->recovery_lock != NULL) {
 		if (ctdb_recovery_have_lock(rec)) {
-			DEBUG(DEBUG_NOTICE, ("Already holding recovery lock\n"));
+			D_NOTICE("Already holding recovery lock\n");
 		} else {
-			DEBUG(DEBUG_NOTICE, ("Attempting to take recovery lock (%s)\n",
-					     ctdb->recovery_lock));
-			if (!ctdb_recovery_lock(rec)) {
-				if (ctdb->runstate == CTDB_RUNSTATE_FIRST_RECOVERY) {
-					/* If ctdb is trying first recovery, it's
-					 * possible that current node does not know
-					 * yet who the recmaster is.
+			bool ok;
+
+			D_NOTICE("Attempting to take recovery lock (%s)\n",
+				 ctdb->recovery_lock);
+
+			ok = ctdb_recovery_lock(rec);
+			if (! ok) {
+				D_ERR("Unable to take recovery lock\n");
+
+				if (pnn != rec->recmaster) {
+					D_NOTICE("Recovery master changed to %u,"
+						 " aborting recovery\n",
+						 rec->recmaster);
+					rec->need_recovery = false;
+					goto fail;
+				}
+
+				if (ctdb->runstate ==
+				    CTDB_RUNSTATE_FIRST_RECOVERY) {
+					/*
+					 * First recovery?  Perhaps
+					 * current node does not yet
+					 * know who the recmaster is.
 					 */
-					DEBUG(DEBUG_ERR, ("Unable to get recovery lock"
-							  " - retrying recovery\n"));
+					D_ERR("Retrying recovery\n");
 					goto fail;
 				}
 
-				DEBUG(DEBUG_ERR,("Unable to get recovery lock - aborting recovery "
-						 "and ban ourself for %u seconds\n",
-						 ctdb->tunable.recovery_ban_period));
-				ctdb_ban_node(rec, pnn, ctdb->tunable.recovery_ban_period);
+				D_ERR("Abort recovery, "
+				      "ban this node for %u seconds\n",
+				      ctdb->tunable.recovery_ban_period);
+				ctdb_ban_node(rec,
+					      pnn,
+					      ctdb->tunable.recovery_ban_period);
 				goto fail;
 			}
-			DEBUG(DEBUG_NOTICE,
-			      ("Recovery lock taken successfully by recovery daemon\n"));
+			D_NOTICE("Recovery lock taken successfully\n");
 		}
 	}
 
diff -Npur samba-4.8.5/ctdb/server/eventscript.c samba-4.8.6/ctdb/server/eventscript.c
--- samba-4.8.5/ctdb/server/eventscript.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/ctdb/server/eventscript.c	2018-10-09 09:46:34.000000000 +0200
@@ -142,6 +142,100 @@ static bool eventd_context_init(TALLOC_C
 	return true;
 }
 
+struct eventd_startup_state {
+	bool done;
+	int ret;
+	int fd;
+};
+
+static void eventd_startup_timeout_handler(struct tevent_context *ev,
+					   struct tevent_timer *te,
+					   struct timeval t,
+					   void *private_data)
+{
+	struct eventd_startup_state *state =
+		(struct eventd_startup_state *) private_data;
+
+	state->done = true;
+	state->ret = ETIMEDOUT;
+}
+
+static void eventd_startup_handler(struct tevent_context *ev,
+				   struct tevent_fd *fde, uint16_t flags,
+				   void *private_data)
+{
+	struct eventd_startup_state *state =
+		(struct eventd_startup_state *)private_data;
+	unsigned int data;
+	ssize_t num_read;
+
+	num_read = sys_read(state->fd, &data, sizeof(data));
+	if (num_read == sizeof(data)) {
+		if (data == 0) {
+			state->ret = 0;
+		} else {
+			state->ret = EIO;
+		}
+	} else if (num_read == 0) {
+		state->ret = EPIPE;
+	} else if (num_read == -1) {
+		state->ret = errno;
+	} else {
+		state->ret = EINVAL;
+	}
+
+	state->done = true;
+}
+
+
+static int wait_for_daemon_startup(struct tevent_context *ev,
+				   int fd)
+{
+	TALLOC_CTX *mem_ctx;
+	struct tevent_timer *timer;
+	struct tevent_fd *fde;
+	struct eventd_startup_state state = {
+		.done = false,
+		.ret = 0,
+		.fd = fd,
+	};
+
+	mem_ctx = talloc_new(ev);
+	if (mem_ctx == NULL) {
+		return ENOMEM;
+	}
+
+	timer = tevent_add_timer(ev,
+				 mem_ctx,
+				 tevent_timeval_current_ofs(10, 0),
+				 eventd_startup_timeout_handler,
+				 &state);
+	if (timer == NULL) {
+		talloc_free(mem_ctx);
+		return ENOMEM;
+	}
+
+	fde = tevent_add_fd(ev,
+			    mem_ctx,
+			    fd,
+			    TEVENT_FD_READ,
+			    eventd_startup_handler,
+			    &state);
+	if (fde == NULL) {
+		talloc_free(mem_ctx);
+		return ENOMEM;
+	}
+
+	while (! state.done) {
+		tevent_loop_once(ev);
+	}
+
+	talloc_free(mem_ctx);
+
+	return state.ret;
+}
+
+
 /*
  * Start and stop event daemon
  */
@@ -157,7 +251,7 @@ int ctdb_start_eventd(struct ctdb_contex
 	const char **argv;
 	int fd[2];
 	pid_t pid;
-	int ret, i;
+	int ret;
 	bool status;
 
 	if (ctdb->ectx == NULL) {
@@ -175,8 +269,15 @@ int ctdb_start_eventd(struct ctdb_contex
 		return -1;
 	}
 
-	argv = talloc_array(ectx, const char *, 14);
+	ret = pipe(fd);
+	if (ret != 0) {
+		return -1;
+	}
+
+	argv = talloc_array(ectx, const char *, 16);
 	if (argv == NULL) {
+		close(fd[0]);
+		close(fd[1]);
 		return -1;
 	}
 
@@ -191,34 +292,35 @@ int ctdb_start_eventd(struct ctdb_contex
 	argv[8] = getenv("CTDB_LOGGING");
 	argv[9] = "-d";
 	argv[10] = debug_level_to_string(DEBUGLEVEL);
+	argv[11] = "-S";
+	argv[12] = talloc_asprintf(argv, "%d", fd[1]);
 	if (ectx->debug_hung_script == NULL) {
-		argv[11] = NULL;
-		argv[12] = NULL;
+		argv[13] = NULL;
+		argv[14] = NULL;
 	} else {
-		argv[11] = "-D";
-		argv[12] = ectx->debug_hung_script;
+		argv[13] = "-D";
+		argv[14] = ectx->debug_hung_script;
 	}
-	argv[13] = NULL;
+	argv[15] = NULL;
 
-	if (argv[6] == NULL) {
+	if (argv[6] == NULL || argv[12] == NULL) {
+		close(fd[0]);
+		close(fd[1]);
 		talloc_free(argv);
 		return -1;
 	}
 
-	DEBUG(DEBUG_NOTICE,
-	      ("Starting event daemon %s %s %s %s %s %s %s %s %s %s %s\n",
-	       argv[0], argv[1], argv[2], argv[3], argv[4], argv[5],
-	       argv[6], argv[7], argv[8], argv[9], argv[10]));
-
-	ret = pipe(fd);
-	if (ret != 0) {
-		return -1;
-	}
+	D_NOTICE("Starting event daemon "
+		 "%s %s %s %s %s %s %s %s %s %s %s %s %s\n",
+		 argv[0], argv[1], argv[2], argv[3], argv[4], argv[5],
+		 argv[6], argv[7], argv[8], argv[9], argv[10],
+		 argv[11], argv[12]);
 
 	pid = ctdb_fork(ctdb);
 	if (pid == -1) {
 		close(fd[0]);
 		close(fd[1]);
+		talloc_free(argv);
 		return -1;
 	}
 
@@ -234,6 +336,14 @@ int ctdb_start_eventd(struct ctdb_contex
 	talloc_free(argv);
 	close(fd[1]);
 
+	ret = wait_for_daemon_startup(ctdb->ev, fd[0]);
+	if (ret != 0) {
+		ctdb_kill(ctdb, pid, SIGKILL);
+		close(fd[0]);
+		D_ERR("Failed to initialize event daemon (%d)\n", ret);
+		return -1;
+	}
+
 	ectx->eventd_fde = tevent_add_fd(ctdb->ev, ectx, fd[0],
 					 TEVENT_FD_READ,
 					 eventd_dead_handler, ectx);
@@ -246,17 +356,9 @@ int ctdb_start_eventd(struct ctdb_contex
 	tevent_fd_set_auto_close(ectx->eventd_fde);
 	ectx->eventd_pid = pid;
 
-	/* Wait to connect to eventd */
-	for (i=0; i<10; i++) {
-		status = eventd_client_connect(ectx);
-		if (status) {
-			break;
-		}
-		sleep(1);
-	}
-
+	status = eventd_client_connect(ectx);
 	if (! status) {
-		DEBUG(DEBUG_ERR, ("Failed to initialize event daemon\n"));
+		DEBUG(DEBUG_ERR, ("Failed to connect to event daemon\n"));
 		ctdb_stop_eventd(ctdb);
 		return -1;
 	}
diff -Npur samba-4.8.5/docs/manpages/cifsdd.8 samba-4.8.6/docs/manpages/cifsdd.8
--- samba-4.8.5/docs/manpages/cifsdd.8	2018-08-24 10:19:37.000000000 +0200
+++ samba-4.8.6/docs/manpages/cifsdd.8	2018-10-09 10:05:14.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: cifsdd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "CIFSDD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "CIFSDD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/dbwrap_tool.1 samba-4.8.6/docs/manpages/dbwrap_tool.1
--- samba-4.8.5/docs/manpages/dbwrap_tool.1	2018-08-24 10:19:37.000000000 +0200
+++ samba-4.8.6/docs/manpages/dbwrap_tool.1	2018-10-09 10:05:15.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: dbwrap_tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "DBWRAP_TOOL" "1" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "DBWRAP_TOOL" "1" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -301,7 +301,7 @@ dbwrap_tool
 Use with caution!
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/eventlogadm.8 samba-4.8.6/docs/manpages/eventlogadm.8
--- samba-4.8.5/docs/manpages/eventlogadm.8	2018-08-24 10:19:38.000000000 +0200
+++ samba-4.8.6/docs/manpages/eventlogadm.8	2018-10-09 10:05:15.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: eventlogadm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "EVENTLOGADM" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "EVENTLOGADM" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -339,7 +339,7 @@ Filter messages from the system log into
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/findsmb.1 samba-4.8.6/docs/manpages/findsmb.1
--- samba-4.8.5/docs/manpages/findsmb.1	2018-08-24 10:19:38.000000000 +0200
+++ samba-4.8.6/docs/manpages/findsmb.1	2018-10-09 10:05:15.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: findsmb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "FINDSMB" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "FINDSMB" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -119,7 +119,7 @@ IP ADDR         NETBIOS NAME   WORKGROUP
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/idmap_ad.8 samba-4.8.6/docs/manpages/idmap_ad.8
--- samba-4.8.5/docs/manpages/idmap_ad.8	2018-08-24 10:19:38.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_ad.8	2018-10-09 10:05:15.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ad
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_AD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_AD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_autorid.8 samba-4.8.6/docs/manpages/idmap_autorid.8
--- samba-4.8.5/docs/manpages/idmap_autorid.8	2018-08-24 10:19:38.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_autorid.8	2018-10-09 10:05:16.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_autorid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_AUTORID" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_AUTORID" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_hash.8 samba-4.8.6/docs/manpages/idmap_hash.8
--- samba-4.8.5/docs/manpages/idmap_hash.8	2018-08-24 10:19:39.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_hash.8	2018-10-09 10:05:16.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_hash
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_HASH" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_HASH" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_ldap.8 samba-4.8.6/docs/manpages/idmap_ldap.8
--- samba-4.8.5/docs/manpages/idmap_ldap.8	2018-08-24 10:19:39.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_ldap.8	2018-10-09 10:05:16.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_ldap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_LDAP" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_LDAP" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_nss.8 samba-4.8.6/docs/manpages/idmap_nss.8
--- samba-4.8.5/docs/manpages/idmap_nss.8	2018-08-24 10:19:39.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_nss.8	2018-10-09 10:05:16.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_nss
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_NSS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_NSS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_rfc2307.8 samba-4.8.6/docs/manpages/idmap_rfc2307.8
--- samba-4.8.5/docs/manpages/idmap_rfc2307.8	2018-08-24 10:19:39.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_rfc2307.8	2018-10-09 10:05:16.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rfc2307
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_RFC2307" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_RFC2307" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_rid.8 samba-4.8.6/docs/manpages/idmap_rid.8
--- samba-4.8.5/docs/manpages/idmap_rid.8	2018-08-24 10:19:39.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_rid.8	2018-10-09 10:05:17.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_rid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_RID" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_RID" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_script.8 samba-4.8.6/docs/manpages/idmap_script.8
--- samba-4.8.5/docs/manpages/idmap_script.8	2018-08-24 10:19:40.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_script.8	2018-10-09 10:05:17.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_script
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_SCRIPT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_SCRIPT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_tdb.8 samba-4.8.6/docs/manpages/idmap_tdb.8
--- samba-4.8.5/docs/manpages/idmap_tdb.8	2018-08-24 10:19:40.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_tdb.8	2018-10-09 10:05:17.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_TDB" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/idmap_tdb2.8 samba-4.8.6/docs/manpages/idmap_tdb2.8
--- samba-4.8.5/docs/manpages/idmap_tdb2.8	2018-08-24 10:19:40.000000000 +0200
+++ samba-4.8.6/docs/manpages/idmap_tdb2.8	2018-10-09 10:05:17.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: idmap_tdb2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "IDMAP_TDB2" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "IDMAP_TDB2" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/libsmbclient.7 samba-4.8.6/docs/manpages/libsmbclient.7
--- samba-4.8.5/docs/manpages/libsmbclient.7	2018-08-24 10:19:40.000000000 +0200
+++ samba-4.8.6/docs/manpages/libsmbclient.7	2018-10-09 10:05:17.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: libsmbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: 7
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "LIBSMBCLIENT" "7" "08/24/2018" "Samba 4\&.8\&.5" "7"
+.TH "LIBSMBCLIENT" "7" "10/09/2018" "Samba 4\&.8\&.6" "7"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -86,7 +86,7 @@ parameter was not included in the URL\&.
 Watch this space for future updates\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/lmhosts.5 samba-4.8.6/docs/manpages/lmhosts.5
--- samba-4.8.5/docs/manpages/lmhosts.5	2018-08-24 10:19:40.000000000 +0200
+++ samba-4.8.6/docs/manpages/lmhosts.5	2018-10-09 10:05:18.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: lmhosts
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "LMHOSTS" "5" "08/24/2018" "Samba 4\&.8\&.5" "File Formats and Conventions"
+.TH "LMHOSTS" "5" "10/09/2018" "Samba 4\&.8\&.6" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ or
 /usr/local/samba/lib\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbclient\fR(1),
diff -Npur samba-4.8.5/docs/manpages/log2pcap.1 samba-4.8.6/docs/manpages/log2pcap.1
--- samba-4.8.5/docs/manpages/log2pcap.1	2018-08-24 10:19:41.000000000 +0200
+++ samba-4.8.6/docs/manpages/log2pcap.1	2018-10-09 10:05:18.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: log2pcap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "LOG2PCAP" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "LOG2PCAP" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -107,7 +107,7 @@ Convert to pcap using text2pcap:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "BUGS"
 .PP
 Only SMB data is extracted from the samba logs, no LDAP, NetBIOS lookup or other data\&.
diff -Npur samba-4.8.5/docs/manpages/mvxattr.1 samba-4.8.6/docs/manpages/mvxattr.1
--- samba-4.8.5/docs/manpages/mvxattr.1	2018-08-24 10:19:41.000000000 +0200
+++ samba-4.8.6/docs/manpages/mvxattr.1	2018-10-09 10:05:18.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: mvxattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "MVXATTR" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "MVXATTR" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -76,7 +76,7 @@ Force overwriting of destination xattr\&
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/net.8 samba-4.8.6/docs/manpages/net.8
--- samba-4.8.5/docs/manpages/net.8	2018-08-24 10:19:41.000000000 +0200
+++ samba-4.8.6/docs/manpages/net.8	2018-10-09 10:05:18.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: net
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "NET" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "NET" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/nmbd.8 samba-4.8.6/docs/manpages/nmbd.8
--- samba-4.8.5/docs/manpages/nmbd.8	2018-08-24 10:19:41.000000000 +0200
+++ samba-4.8.6/docs/manpages/nmbd.8	2018-10-09 10:05:19.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: nmbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "NMBD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "NMBD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -278,7 +278,7 @@ The debug log level of nmbd may be raise
 (SIGUSR[1|2] signals are no longer used since Samba 2\&.2)\&. This is to allow transient problems to be diagnosed, whilst still running at a normally low log level\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBinetd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/nmblookup.1 samba-4.8.6/docs/manpages/nmblookup.1
--- samba-4.8.5/docs/manpages/nmblookup.1	2018-08-24 10:19:42.000000000 +0200
+++ samba-4.8.6/docs/manpages/nmblookup.1	2018-10-09 10:05:19.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: nmblookup
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "NMBLOOKUP" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "NMBLOOKUP" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -214,7 +214,7 @@ nmblookup \-U samba\&.org \-R \*(AqIRIX#
 would query the WINS server samba\&.org for the domain master browser (1B name type) for the IRIX workgroup\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/ntlm_auth.1 samba-4.8.6/docs/manpages/ntlm_auth.1
--- samba-4.8.5/docs/manpages/ntlm_auth.1	2018-08-24 10:19:42.000000000 +0200
+++ samba-4.8.6/docs/manpages/ntlm_auth.1	2018-10-09 10:05:19.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: ntlm_auth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "NTLM_AUTH" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "NTLM_AUTH" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -421,7 +421,7 @@ If you\*(Aqre experiencing problems with
 the Microsoft Knowledge Base article #239869 and follow instructions described there\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/pam_winbind.8 samba-4.8.6/docs/manpages/pam_winbind.8
--- samba-4.8.5/docs/manpages/pam_winbind.8	2018-08-24 10:19:42.000000000 +0200
+++ samba-4.8.6/docs/manpages/pam_winbind.8	2018-10-09 10:05:19.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: 8
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND" "8" "08/24/2018" "Samba 4\&.8\&.5" "8"
+.TH "PAM_WINBIND" "8" "10/09/2018" "Samba 4\&.8\&.6" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -172,7 +172,7 @@ This is the profile path set in the prof
 \fBsmb.conf\fR(5)
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of Samba\&.
+This man page is part of version 4\&.8\&.6 of Samba\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/pam_winbind.conf.5 samba-4.8.6/docs/manpages/pam_winbind.conf.5
--- samba-4.8.5/docs/manpages/pam_winbind.conf.5	2018-08-24 10:19:42.000000000 +0200
+++ samba-4.8.6/docs/manpages/pam_winbind.conf.5	2018-10-09 10:05:20.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pam_winbind.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: 5
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "PAM_WINBIND\&.CONF" "5" "08/24/2018" "Samba 4\&.8\&.5" "5"
+.TH "PAM_WINBIND\&.CONF" "5" "10/09/2018" "Samba 4\&.8\&.6" "5"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -137,7 +137,7 @@ Defines number of days before pam_winbin
 \fBsmb.conf\fR(5)
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of Samba\&.
+This man page is part of version 4\&.8\&.6 of Samba\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/pdbedit.8 samba-4.8.6/docs/manpages/pdbedit.8
--- samba-4.8.5/docs/manpages/pdbedit.8	2018-08-24 10:19:43.000000000 +0200
+++ samba-4.8.6/docs/manpages/pdbedit.8	2018-10-09 10:05:20.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: pdbedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "PDBEDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "PDBEDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -619,7 +619,7 @@ option "<name>" to value "<value>" from
 This command may be used only by root\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(5),
diff -Npur samba-4.8.5/docs/manpages/profiles.1 samba-4.8.6/docs/manpages/profiles.1
--- samba-4.8.5/docs/manpages/profiles.1	2018-08-24 10:19:43.000000000 +0200
+++ samba-4.8.6/docs/manpages/profiles.1	2018-10-09 10:05:20.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: profiles
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "PROFILES" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "PROFILES" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ Display brief usage message\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/rpcclient.1 samba-4.8.6/docs/manpages/rpcclient.1
--- samba-4.8.5/docs/manpages/rpcclient.1	2018-08-24 10:19:43.000000000 +0200
+++ samba-4.8.6/docs/manpages/rpcclient.1	2018-10-09 10:05:20.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: rpcclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "RPCCLIENT" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "RPCCLIENT" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -803,7 +803,7 @@ and
 that are incompatible for some commands or services\&. Additionally, the developers are sending reports to Microsoft, and problems found or reported to Microsoft are fixed in Service Packs, which may result in incompatibilities\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/samba-regedit.8 samba-4.8.6/docs/manpages/samba-regedit.8
--- samba-4.8.5/docs/manpages/samba-regedit.8	2018-08-24 10:19:43.000000000 +0200
+++ samba-4.8.6/docs/manpages/samba-regedit.8	2018-10-09 10:05:20.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba-regedit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SAMBA\-REGEDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SAMBA\-REGEDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -207,7 +207,7 @@ The supplied password is the NT hash\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/samba-tool.8 samba-4.8.6/docs/manpages/samba-tool.8
--- samba-4.8.5/docs/manpages/samba-tool.8	2018-08-24 10:19:44.000000000 +0200
+++ samba-4.8.6/docs/manpages/samba-tool.8	2018-10-09 10:05:21.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba-tool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SAMBA\-TOOL" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SAMBA\-TOOL" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -470,7 +470,7 @@ because the repsFrom/To objects are not
 Gives usage information\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.5 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/samba.7 samba-4.8.6/docs/manpages/samba.7
--- samba-4.8.5/docs/manpages/samba.7	2018-08-24 10:19:44.000000000 +0200
+++ samba-4.8.6/docs/manpages/samba.7	2018-10-09 10:05:21.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: Miscellanea
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SAMBA" "7" "08/24/2018" "Samba 4\&.8\&.5" "Miscellanea"
+.TH "SAMBA" "7" "10/09/2018" "Samba 4\&.8\&.6" "Miscellanea"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -237,7 +237,7 @@ https://lists\&.samba\&.org
 you can find a lot of information in the archives and you can subscribe to the samba list and ask for help or discuss things\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "CONTRIBUTIONS"
 .PP
 If you wish to contribute to the Samba project, then I suggest you join the Samba mailing list at
diff -Npur samba-4.8.5/docs/manpages/samba.8 samba-4.8.6/docs/manpages/samba.8
--- samba-4.8.5/docs/manpages/samba.8	2018-08-24 10:19:44.000000000 +0200
+++ samba-4.8.6/docs/manpages/samba.8	2018-10-09 10:05:21.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: samba
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SAMBA" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SAMBA" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -198,7 +198,7 @@ The number and nature of diagnostics ava
 Most messages are reasonably self\-explanatory\&. Unfortunately, at the time this man page was created, there are too many diagnostics available in the source code to warrant describing each and every diagnostic\&. At this stage your best bet is still to grep the source code and inspect the conditions that gave rise to the diagnostics you are seeing\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBhosts_access\fR(5)
diff -Npur samba-4.8.5/docs/manpages/sharesec.1 samba-4.8.6/docs/manpages/sharesec.1
--- samba-4.8.5/docs/manpages/sharesec.1	2018-08-24 10:19:44.000000000 +0200
+++ samba-4.8.6/docs/manpages/sharesec.1	2018-10-09 10:05:21.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: sharesec
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SHARESEC" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SHARESEC" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -337,7 +337,7 @@ List all ACEs for
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/smb.conf.5 samba-4.8.6/docs/manpages/smb.conf.5
--- samba-4.8.5/docs/manpages/smb.conf.5	2018-08-24 10:19:46.000000000 +0200
+++ samba-4.8.6/docs/manpages/smb.conf.5	2018-10-09 10:05:23.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smb.conf
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMB\&.CONF" "5" "08/24/2018" "Samba 4\&.8\&.5" "File Formats and Conventions"
+.TH "SMB\&.CONF" "5" "10/09/2018" "Samba 4\&.8\&.6" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -12953,7 +12953,7 @@ and
 special sections make life for an administrator easy, but the various combinations of default attributes can be tricky\&. Take extreme care when designing these sections\&. In particular, ensure that the permissions on spool directories are correct\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsamba\fR(7),
diff -Npur samba-4.8.5/docs/manpages/smbcacls.1 samba-4.8.6/docs/manpages/smbcacls.1
--- samba-4.8.5/docs/manpages/smbcacls.1	2018-08-24 10:19:46.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbcacls.1	2018-10-09 10:05:23.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcacls
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBCACLS" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBCACLS" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -491,7 +491,7 @@ smbcacls
 couldn\*(Aqt connect to the specified server, or there was an error getting or setting the ACLs, an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/smbclient.1 samba-4.8.6/docs/manpages/smbclient.1
--- samba-4.8.5/docs/manpages/smbclient.1	2018-08-24 10:19:46.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbclient.1	2018-10-09 10:05:23.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbclient
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBCLIENT" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBCLIENT" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -1151,7 +1151,7 @@ Most diagnostics issued by the client ar
 The number and nature of diagnostics available depends on the debug level used by the client\&. If you have problems, set the debug level to 3 and peruse the log files\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/smbcontrol.1 samba-4.8.6/docs/manpages/smbcontrol.1
--- samba-4.8.5/docs/manpages/smbcontrol.1	2018-08-24 10:19:46.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbcontrol.1	2018-10-09 10:05:24.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcontrol
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBCONTROL" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBCONTROL" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -309,7 +309,7 @@ Query the number of smbd child processes
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBnmbd\fR(8)
diff -Npur samba-4.8.5/docs/manpages/smbcquotas.1 samba-4.8.6/docs/manpages/smbcquotas.1
--- samba-4.8.5/docs/manpages/smbcquotas.1	2018-08-24 10:19:47.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbcquotas.1	2018-10-09 10:05:24.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbcquotas
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBCQUOTAS" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBCQUOTAS" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -247,7 +247,7 @@ smbcquotas
 couldn\*(Aqt connect to the specified server, or when there was an error getting or setting the quota(s), an exit status of 1 is returned\&. If there was an error parsing any command line arguments, an exit status of 2 is returned\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/smbd.8 samba-4.8.6/docs/manpages/smbd.8
--- samba-4.8.5/docs/manpages/smbd.8	2018-08-24 10:19:47.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbd.8	2018-10-09 10:05:24.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SMBD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -252,7 +252,7 @@ parameter\&. When this is set, the follo
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "DIAGNOSTICS"
 .PP
 Most diagnostics issued by the server are logged in a specified log file\&. The log file name is specified at compile time, but may be overridden on the command line\&.
diff -Npur samba-4.8.5/docs/manpages/smbget.1 samba-4.8.6/docs/manpages/smbget.1
--- samba-4.8.5/docs/manpages/smbget.1	2018-08-24 10:19:47.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbget.1	2018-10-09 10:05:24.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbget
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBGET" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBGET" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -189,7 +189,7 @@ smbget \-Rr smb://rhonwyn/
 Permission denied is returned in some cases where the cause of the error is unknown (such as an illegally formatted smb:// url or trying to get a directory without \-R turned on)\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/smbgetrc.5 samba-4.8.6/docs/manpages/smbgetrc.5
--- samba-4.8.5/docs/manpages/smbgetrc.5	2018-08-24 10:19:47.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbgetrc.5	2018-10-09 10:05:24.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbgetrc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBGETRC" "5" "08/24/2018" "Samba 4\&.8\&.5" "File Formats and Conventions"
+.TH "SMBGETRC" "5" "10/09/2018" "Samba 4\&.8\&.6" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -87,7 +87,7 @@ Number of bytes to put in a block\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbget\fR(1)
diff -Npur samba-4.8.5/docs/manpages/smbpasswd.5 samba-4.8.6/docs/manpages/smbpasswd.5
--- samba-4.8.5/docs/manpages/smbpasswd.5	2018-08-24 10:19:48.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbpasswd.5	2018-10-09 10:05:25.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: File Formats and Conventions
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "5" "08/24/2018" "Samba 4\&.8\&.5" "File Formats and Conventions"
+.TH "SMBPASSWD" "5" "10/09/2018" "Samba 4\&.8\&.6" "File Formats and Conventions"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -165,7 +165,7 @@ This field consists of the time the acco
 All other colon separated fields are ignored at this time\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/smbpasswd.8 samba-4.8.6/docs/manpages/smbpasswd.8
--- samba-4.8.5/docs/manpages/smbpasswd.8	2018-08-24 10:19:48.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbpasswd.8	2018-10-09 10:05:25.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbpasswd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBPASSWD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SMBPASSWD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -316,7 +316,7 @@ file and neglecting to allow "localhost"
 In addition, the smbpasswd command is only useful if Samba has been set up to use encrypted passwords\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbpasswd\fR(5),
diff -Npur samba-4.8.5/docs/manpages/smbspool.8 samba-4.8.6/docs/manpages/smbspool.8
--- samba-4.8.5/docs/manpages/smbspool.8	2018-08-24 10:19:48.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbspool.8	2018-10-09 10:05:25.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbspool
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBSPOOL" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SMBSPOOL" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -173,7 +173,7 @@ The filename argument (argv[6]) contains
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8)
diff -Npur samba-4.8.5/docs/manpages/smbspool_krb5_wrapper.8 samba-4.8.6/docs/manpages/smbspool_krb5_wrapper.8
--- samba-4.8.5/docs/manpages/smbspool_krb5_wrapper.8	2018-08-24 10:19:48.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbspool_krb5_wrapper.8	2018-10-09 10:05:25.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbspool_krb5_wrapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBSPOOL_KRB5_WRAPPE" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "SMBSPOOL_KRB5_WRAPPE" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/smbstatus.1 samba-4.8.6/docs/manpages/smbstatus.1
--- samba-4.8.5/docs/manpages/smbstatus.1	2018-08-24 10:19:49.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbstatus.1	2018-10-09 10:05:26.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbstatus
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBSTATUS" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBSTATUS" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -154,7 +154,7 @@ causes smbstatus to display numeric UIDs
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8)
diff -Npur samba-4.8.5/docs/manpages/smbtar.1 samba-4.8.6/docs/manpages/smbtar.1
--- samba-4.8.5/docs/manpages/smbtar.1	2018-08-24 10:19:49.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbtar.1	2018-10-09 10:05:26.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbtar
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBTAR" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBTAR" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -145,7 +145,7 @@ section for the
 command\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmbd\fR(8),
diff -Npur samba-4.8.5/docs/manpages/smbtree.1 samba-4.8.6/docs/manpages/smbtree.1
--- samba-4.8.5/docs/manpages/smbtree.1	2018-08-24 10:19:49.000000000 +0200
+++ samba-4.8.6/docs/manpages/smbtree.1	2018-10-09 10:05:26.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: smbtree
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "SMBTREE" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "SMBTREE" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -191,7 +191,7 @@ Display brief usage message\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/testparm.1 samba-4.8.6/docs/manpages/testparm.1
--- samba-4.8.5/docs/manpages/testparm.1	2018-08-24 10:19:49.000000000 +0200
+++ samba-4.8.6/docs/manpages/testparm.1	2018-10-09 10:05:26.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: testparm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "TESTPARM" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "TESTPARM" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -169,7 +169,7 @@ This is usually the name of the configur
 The program will issue a message saying whether the configuration file loaded OK or not\&. This message may be preceded by errors and warnings if the file did not load\&. If the file was loaded OK, the program then dumps all known service details to stdout\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBsmb.conf\fR(5),
diff -Npur samba-4.8.5/docs/manpages/traffic_learner.7 samba-4.8.6/docs/manpages/traffic_learner.7
--- samba-4.8.5/docs/manpages/traffic_learner.7	2018-08-24 10:19:49.000000000 +0200
+++ samba-4.8.6/docs/manpages/traffic_learner.7	2018-10-09 10:05:26.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: traffic_learner
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "TRAFFIC_LEARNER" "7" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "TRAFFIC_LEARNER" "7" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ There are two special packet types here\
 The other special packet is "\-", which represents the limit of the conversation\&. In the example, this indicates that one observed conversation ended after this particular ngram\&. This special opcode is also used at the beginning of conversations, which are indicated by the ngram "\-\et\-"\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.5 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBtraffic_replay\fR(7)\&.
diff -Npur samba-4.8.5/docs/manpages/traffic_replay.7 samba-4.8.6/docs/manpages/traffic_replay.7
--- samba-4.8.5/docs/manpages/traffic_replay.7	2018-08-24 10:19:50.000000000 +0200
+++ samba-4.8.6/docs/manpages/traffic_replay.7	2018-10-09 10:05:27.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: traffic_replay
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "TRAFFIC_REPLAY" "7" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "TRAFFIC_REPLAY" "7" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -327,7 +327,7 @@ traffic_replay traffic\-model\&.txt my\-
 The users created by the test will have names like STGU\-0\-xyz\&. The groups generated have names like STGG\-0\-xyz\&.
 .SH "VERSION"
 .PP
-This man page is complete for version 4\&.8\&.5 of the Samba suite\&.
+This man page is complete for version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBtraffic_learner\fR(7)\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_acl_tdb.8 samba-4.8.6/docs/manpages/vfs_acl_tdb.8
--- samba-4.8.5/docs/manpages/vfs_acl_tdb.8	2018-08-24 10:19:50.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_acl_tdb.8	2018-10-09 10:05:27.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_ACL_TDB" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_ACL_TDB" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_acl_xattr.8 samba-4.8.6/docs/manpages/vfs_acl_xattr.8
--- samba-4.8.5/docs/manpages/vfs_acl_xattr.8	2018-08-24 10:19:50.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_acl_xattr.8	2018-10-09 10:05:27.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_ACL_XATTR" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_ACL_XATTR" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_aio_fork.8 samba-4.8.6/docs/manpages/vfs_aio_fork.8
--- samba-4.8.5/docs/manpages/vfs_aio_fork.8	2018-08-24 10:19:50.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_aio_fork.8	2018-10-09 10:05:27.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_fork
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_AIO_FORK" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_AIO_FORK" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Straight forward use:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_aio_pthread.8 samba-4.8.6/docs/manpages/vfs_aio_pthread.8
--- samba-4.8.5/docs/manpages/vfs_aio_pthread.8	2018-08-24 10:19:50.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_aio_pthread.8	2018-10-09 10:05:28.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_aio_pthread
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_AIO_PTHREAD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_AIO_PTHREAD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -78,7 +78,7 @@ By default this is set to 100\&.
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_audit.8 samba-4.8.6/docs/manpages/vfs_audit.8
--- samba-4.8.5/docs/manpages/vfs_audit.8	2018-08-24 10:19:51.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_audit.8	2018-10-09 10:05:28.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_AUDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_AUDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -118,7 +118,7 @@ Log operations on all shares using the L
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_btrfs.8 samba-4.8.6/docs/manpages/vfs_btrfs.8
--- samba-4.8.5/docs/manpages/vfs_btrfs.8	2018-08-24 10:19:51.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_btrfs.8	2018-10-09 10:05:28.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_btrfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_BTRFS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_BTRFS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -104,7 +104,7 @@ to Windows Explorer as file / directory
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_cacheprime.8 samba-4.8.6/docs/manpages/vfs_cacheprime.8
--- samba-4.8.5/docs/manpages/vfs_cacheprime.8	2018-08-24 10:19:51.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_cacheprime.8	2018-10-09 10:05:28.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cacheprime
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_CACHEPRIME" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_CACHEPRIME" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ cacheprime
 is not a substitute for a general\-purpose readahead mechanism\&. It is intended for use only in very specific environments where disk operations must be aligned and sized to known values (as much as that is possible)\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_cap.8 samba-4.8.6/docs/manpages/vfs_cap.8
--- samba-4.8.5/docs/manpages/vfs_cap.8	2018-08-24 10:19:51.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_cap.8	2018-10-09 10:05:28.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_cap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_CAP" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_CAP" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -63,7 +63,7 @@ On a system using GNU libiconv, use CAP
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_catia.8 samba-4.8.6/docs/manpages/vfs_catia.8
--- samba-4.8.5/docs/manpages/vfs_catia.8	2018-08-24 10:19:52.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_catia.8	2018-10-09 10:05:29.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_catia
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_CATIA" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_CATIA" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_ceph.8 samba-4.8.6/docs/manpages/vfs_ceph.8
--- samba-4.8.5/docs/manpages/vfs_ceph.8	2018-08-24 10:19:52.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_ceph.8	2018-10-09 10:05:29.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_ceph
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_CEPH" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_CEPH" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -94,7 +94,7 @@ Example: ceph:user_id = samba
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_commit.8 samba-4.8.6/docs/manpages/vfs_commit.8
--- samba-4.8.5/docs/manpages/vfs_commit.8	2018-08-24 10:19:52.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_commit.8	2018-10-09 10:05:29.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_commit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_COMMIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_COMMIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -116,7 +116,7 @@ commit
 may reduce performance\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_crossrename.8 samba-4.8.6/docs/manpages/vfs_crossrename.8
--- samba-4.8.5/docs/manpages/vfs_crossrename.8	2018-08-24 10:19:52.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_crossrename.8	2018-10-09 10:05:29.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_crossrename
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_CROSSRENAME" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_CROSSRENAME" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -89,7 +89,7 @@ To add server\-side cross\-device rename
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_default_quota.8 samba-4.8.6/docs/manpages/vfs_default_quota.8
--- samba-4.8.5/docs/manpages/vfs_default_quota.8	2018-08-24 10:19:52.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_default_quota.8	2018-10-09 10:05:30.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_default_quota
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_DEFAULT_QUOTA" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_DEFAULT_QUOTA" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -86,7 +86,7 @@ Store the default quota record in the qu
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_dirsort.8 samba-4.8.6/docs/manpages/vfs_dirsort.8
--- samba-4.8.5/docs/manpages/vfs_dirsort.8	2018-08-24 10:19:53.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_dirsort.8	2018-10-09 10:05:30.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_dirsort
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_DIRSORT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_DIRSORT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -59,7 +59,7 @@ Sort directories for all shares:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_extd_audit.8 samba-4.8.6/docs/manpages/vfs_extd_audit.8
--- samba-4.8.5/docs/manpages/vfs_extd_audit.8	2018-08-24 10:19:53.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_extd_audit.8	2018-10-09 10:05:30.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_extd_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_EXTD_AUDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_EXTD_AUDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -55,7 +55,7 @@ is identical to
 This module is stackable\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_fake_perms.8 samba-4.8.6/docs/manpages/vfs_fake_perms.8
--- samba-4.8.5/docs/manpages/vfs_fake_perms.8	2018-08-24 10:19:53.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_fake_perms.8	2018-10-09 10:05:30.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fake_perms
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_FAKE_PERMS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_FAKE_PERMS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -58,7 +58,7 @@ This module is stackable\&.
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_fileid.8 samba-4.8.6/docs/manpages/vfs_fileid.8
--- samba-4.8.5/docs/manpages/vfs_fileid.8	2018-08-24 10:19:53.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_fileid.8	2018-10-09 10:05:30.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fileid
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_FILEID" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_FILEID" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -138,7 +138,7 @@ algorithm:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_fruit.8 samba-4.8.6/docs/manpages/vfs_fruit.8
--- samba-4.8.5/docs/manpages/vfs_fruit.8	2018-08-24 10:19:54.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_fruit.8	2018-10-09 10:05:31.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_fruit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_FRUIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_FRUIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_full_audit.8 samba-4.8.6/docs/manpages/vfs_full_audit.8
--- samba-4.8.5/docs/manpages/vfs_full_audit.8	2018-08-24 10:19:54.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_full_audit.8	2018-10-09 10:05:31.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_full_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_FULL_AUDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_FULL_AUDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -400,7 +400,7 @@ Log file and directory open operations o
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_glusterfs.8 samba-4.8.6/docs/manpages/vfs_glusterfs.8
--- samba-4.8.5/docs/manpages/vfs_glusterfs.8	2018-08-24 10:19:54.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_glusterfs.8	2018-10-09 10:05:31.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_glusterfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_GLUSTERFS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_GLUSTERFS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -109,7 +109,7 @@ Defines the glusterfs volumename to use
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_gpfs.8 samba-4.8.6/docs/manpages/vfs_gpfs.8
--- samba-4.8.5/docs/manpages/vfs_gpfs.8	2018-08-24 10:19:54.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_gpfs.8	2018-10-09 10:05:31.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_gpfs
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_GPFS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_GPFS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -692,7 +692,7 @@ gpfs\&.h
 in gpfs versions newer than 3\&.2\&.1 PTF8\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_linux_xfs_sgid.8 samba-4.8.6/docs/manpages/vfs_linux_xfs_sgid.8
--- samba-4.8.5/docs/manpages/vfs_linux_xfs_sgid.8	2018-08-24 10:19:54.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_linux_xfs_sgid.8	2018-10-09 10:05:31.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Add syncops functionality for [share]:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_media_harmony.8 samba-4.8.6/docs/manpages/vfs_media_harmony.8
--- samba-4.8.5/docs/manpages/vfs_media_harmony.8	2018-08-24 10:19:55.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_media_harmony.8	2018-10-09 10:05:32.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_media_harmony
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_MEDIA_HARMONY" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_MEDIA_HARMONY" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -138,7 +138,7 @@ vfs_media_harmony
 is designed to work with Avid editing applications that look in the Avid MediaFiles or OMFI MediaFiles directories for media\&. It is not designed to work as expected in all circumstances for general use\&. For example: It is possible to open a client\-specific file such as msmMMOB\&.mdb_192\&.168\&.1\&.10_userx even though it doesn\*(Aqt show up in a directory listing\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_netatalk.8 samba-4.8.6/docs/manpages/vfs_netatalk.8
--- samba-4.8.5/docs/manpages/vfs_netatalk.8	2018-08-24 10:19:55.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_netatalk.8	2018-10-09 10:05:32.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_netatalk
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_NETATALK" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_NETATALK" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -62,7 +62,7 @@ Hide \&.AppleDouble files on the [data]
 This module is largely historic and unlikely to be of use in modern networks since current Apple systems are able to mount CIFS shares natively\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_nfs4acl_xattr.8 samba-4.8.6/docs/manpages/vfs_nfs4acl_xattr.8
--- samba-4.8.5/docs/manpages/vfs_nfs4acl_xattr.8	2018-08-24 10:19:55.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_nfs4acl_xattr.8	2018-10-09 10:05:32.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_nfs4acl_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_NFS4ACL_XATTR" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_NFS4ACL_XATTR" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_offline.8 samba-4.8.6/docs/manpages/vfs_offline.8
--- samba-4.8.5/docs/manpages/vfs_offline.8	2018-08-24 10:19:55.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_offline.8	2018-10-09 10:05:32.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_offline
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_OFFLINE" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_OFFLINE" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -59,7 +59,7 @@ Mark all files in a share as offline:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_prealloc.8 samba-4.8.6/docs/manpages/vfs_prealloc.8
--- samba-4.8.5/docs/manpages/vfs_prealloc.8	2018-08-24 10:19:55.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_prealloc.8	2018-10-09 10:05:33.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_prealloc
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_PREALLOC" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_PREALLOC" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -112,7 +112,7 @@ vfs_prealloc
 is not supported on all platforms and filesystems\&. Currently only XFS filesystems on Linux and IRIX are supported\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_preopen.8 samba-4.8.6/docs/manpages/vfs_preopen.8
--- samba-4.8.5/docs/manpages/vfs_preopen.8	2018-08-24 10:19:56.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_preopen.8	2018-10-09 10:05:33.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_preopen
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_PREOPEN" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_PREOPEN" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -67,7 +67,7 @@ Number of files that should be speculati
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_readahead.8 samba-4.8.6/docs/manpages/vfs_readahead.8
--- samba-4.8.5/docs/manpages/vfs_readahead.8	2018-08-24 10:19:56.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_readahead.8	2018-10-09 10:05:33.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readahead
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_READAHEAD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_READAHEAD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -115,7 +115,7 @@ G
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_readonly.8 samba-4.8.6/docs/manpages/vfs_readonly.8
--- samba-4.8.5/docs/manpages/vfs_readonly.8	2018-08-24 10:19:56.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_readonly.8	2018-10-09 10:05:33.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_readonly
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_READONLY" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_READONLY" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -81,7 +81,7 @@ Mark the [backup] share as read only dur
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_recycle.8 samba-4.8.6/docs/manpages/vfs_recycle.8
--- samba-4.8.5/docs/manpages/vfs_recycle.8	2018-08-24 10:19:56.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_recycle.8	2018-10-09 10:05:33.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_recycle
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_RECYCLE" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_RECYCLE" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -136,7 +136,7 @@ instead of deleting them:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_shadow_copy.8 samba-4.8.6/docs/manpages/vfs_shadow_copy.8
--- samba-4.8.5/docs/manpages/vfs_shadow_copy.8	2018-08-24 10:19:57.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_shadow_copy.8	2018-10-09 10:05:34.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SHADOW_COPY" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -167,7 +167,7 @@ vfs_shadow_copy
 is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_shadow_copy2.8 samba-4.8.6/docs/manpages/vfs_shadow_copy2.8
--- samba-4.8.5/docs/manpages/vfs_shadow_copy2.8	2018-08-24 10:19:57.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_shadow_copy2.8	2018-10-09 10:05:34.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shadow_copy2
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SHADOW_COPY2" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SHADOW_COPY2" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -519,7 +519,7 @@ vfs_shadow_copy2
 is designed to be an end\-user tool only\&. It does not replace or enhance your backup and archival solutions and should in no way be considered as such\&. Additionally, if you need version control, implement a version control system\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_shell_snap.8 samba-4.8.6/docs/manpages/vfs_shell_snap.8
--- samba-4.8.5/docs/manpages/vfs_shell_snap.8	2018-08-24 10:19:57.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_shell_snap.8	2018-10-09 10:05:34.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_shell_snap
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SHELL_SNAP" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SHELL_SNAP" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -215,7 +215,7 @@ Samba\*(Aqs FSRVP server must be configu
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_snapper.8 samba-4.8.6/docs/manpages/vfs_snapper.8
--- samba-4.8.5/docs/manpages/vfs_snapper.8	2018-08-24 10:19:57.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_snapper.8	2018-10-09 10:05:34.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_snapper
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SNAPPER" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SNAPPER" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -85,7 +85,7 @@ Remote snapshot creation and deletion is
 The DiskShadow\&.exe FSRVP client initially authenticates as the Active Directory computer account\&. This account must therefore be granted the same permissions as the user account issuing the snapshot creation and deletion requests\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_streams_depot.8 samba-4.8.6/docs/manpages/vfs_streams_depot.8
--- samba-4.8.5/docs/manpages/vfs_streams_depot.8	2018-08-24 10:19:57.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_streams_depot.8	2018-10-09 10:05:35.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_depot
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_DEPOT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_STREAMS_DEPOT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_streams_xattr.8 samba-4.8.6/docs/manpages/vfs_streams_xattr.8
--- samba-4.8.5/docs/manpages/vfs_streams_xattr.8	2018-08-24 10:19:58.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_streams_xattr.8	2018-10-09 10:05:35.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_streams_xattr
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_STREAMS_XATTR" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_STREAMS_XATTR" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_syncops.8 samba-4.8.6/docs/manpages/vfs_syncops.8
--- samba-4.8.5/docs/manpages/vfs_syncops.8	2018-08-24 10:19:58.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_syncops.8	2018-10-09 10:05:35.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_syncops
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_SYNCOPS" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_SYNCOPS" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -76,7 +76,7 @@ Add syncops functionality for [share]:
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_time_audit.8 samba-4.8.6/docs/manpages/vfs_time_audit.8
--- samba-4.8.5/docs/manpages/vfs_time_audit.8	2018-08-24 10:19:58.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_time_audit.8	2018-10-09 10:05:35.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_time_audit
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_TIME_AUDIT" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_TIME_AUDIT" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -72,7 +72,7 @@ This would log VFS calls that take longe
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_tsmsm.8 samba-4.8.6/docs/manpages/vfs_tsmsm.8
--- samba-4.8.5/docs/manpages/vfs_tsmsm.8	2018-08-24 10:19:58.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_tsmsm.8	2018-10-09 10:05:35.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_tsmsm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_TSMSM" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_TSMSM" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -83,7 +83,7 @@ A GPFS mount with TSM support can be exp
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_unityed_media.8 samba-4.8.6/docs/manpages/vfs_unityed_media.8
--- samba-4.8.5/docs/manpages/vfs_unityed_media.8	2018-08-24 10:19:58.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_unityed_media.8	2018-10-09 10:05:36.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_unityed_media
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_UNITYED_MEDIA" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_UNITYED_MEDIA" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -111,7 +111,7 @@ Enable unityed_media for Mac and Windows
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_virusfilter.8 samba-4.8.6/docs/manpages/vfs_virusfilter.8
--- samba-4.8.5/docs/manpages/vfs_virusfilter.8	2018-08-24 10:19:59.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_virusfilter.8	2018-10-09 10:05:36.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_virusfilter
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
 .\"    Source: Samba 4.8
 .\"  Language: English
 .\"
-.TH "VFS_VIRUSFILTER" "8" "08/24/2018" "Samba 4\&.8" "System Administration tools"
+.TH "VFS_VIRUSFILTER" "8" "10/09/2018" "Samba 4\&.8" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_worm.8 samba-4.8.6/docs/manpages/vfs_worm.8
--- samba-4.8.5/docs/manpages/vfs_worm.8	2018-08-24 10:19:59.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_worm.8	2018-10-09 10:05:36.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_worm
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_WORM" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_WORM" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -68,7 +68,7 @@ Deny the write access to files and folde
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfs_xattr_tdb.8 samba-4.8.6/docs/manpages/vfs_xattr_tdb.8
--- samba-4.8.5/docs/manpages/vfs_xattr_tdb.8	2018-08-24 10:19:59.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_xattr_tdb.8	2018-10-09 10:05:36.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_xattr_tdb
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_XATTR_TDB" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_XATTR_TDB" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
diff -Npur samba-4.8.5/docs/manpages/vfs_zfsacl.8 samba-4.8.6/docs/manpages/vfs_zfsacl.8
--- samba-4.8.5/docs/manpages/vfs_zfsacl.8	2018-08-24 10:19:59.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfs_zfsacl.8	2018-10-09 10:05:36.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfs_zfsacl
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFS_ZFSACL" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "VFS_ZFSACL" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -215,7 +215,7 @@ A ZFS mount can be exported via Samba as
 .\}
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/vfstest.1 samba-4.8.6/docs/manpages/vfstest.1
--- samba-4.8.5/docs/manpages/vfstest.1	2018-08-24 10:20:00.000000000 +0200
+++ samba-4.8.6/docs/manpages/vfstest.1	2018-10-09 10:05:37.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: vfstest
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "VFSTEST" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "VFSTEST" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -807,7 +807,7 @@ exit
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/wbinfo.1 samba-4.8.6/docs/manpages/wbinfo.1
--- samba-4.8.5/docs/manpages/wbinfo.1	2018-08-24 10:20:00.000000000 +0200
+++ samba-4.8.6/docs/manpages/wbinfo.1	2018-10-09 10:05:37.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: wbinfo
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: User Commands
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "WBINFO" "1" "08/24/2018" "Samba 4\&.8\&.5" "User Commands"
+.TH "WBINFO" "1" "10/09/2018" "Samba 4\&.8\&.6" "User Commands"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -440,7 +440,7 @@ wbinfo
 will always return failure\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 \fBwinbindd\fR(8)
diff -Npur samba-4.8.5/docs/manpages/winbind_krb5_localauth.8 samba-4.8.6/docs/manpages/winbind_krb5_localauth.8
--- samba-4.8.5/docs/manpages/winbind_krb5_localauth.8	2018-08-24 10:20:00.000000000 +0200
+++ samba-4.8.6/docs/manpages/winbind_krb5_localauth.8	2018-10-09 10:05:37.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_localauth
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: 8
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCALAU" "8" "08/24/2018" "Samba 4\&.8\&.5" "8"
+.TH "WINBIND_KRB5_LOCALAU" "8" "10/09/2018" "Samba 4\&.8\&.6" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -66,7 +66,7 @@ file\&.
 .sp
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/winbind_krb5_locator.8 samba-4.8.6/docs/manpages/winbind_krb5_locator.8
--- samba-4.8.5/docs/manpages/winbind_krb5_locator.8	2018-08-24 10:20:00.000000000 +0200
+++ samba-4.8.6/docs/manpages/winbind_krb5_locator.8	2018-10-09 10:05:37.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: winbind_krb5_locator
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: 8
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "WINBIND_KRB5_LOCATOR" "8" "08/24/2018" "Samba 4\&.8\&.5" "8"
+.TH "WINBIND_KRB5_LOCATOR" "8" "10/09/2018" "Samba 4\&.8\&.6" "8"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -57,7 +57,7 @@ After copying the locator plugin to the
 /etc/krb5\&.conf\&.
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "AUTHOR"
 .PP
 The original Samba software and related utilities were created by Andrew Tridgell\&. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed\&.
diff -Npur samba-4.8.5/docs/manpages/winbindd.8 samba-4.8.6/docs/manpages/winbindd.8
--- samba-4.8.5/docs/manpages/winbindd.8	2018-08-24 10:20:00.000000000 +0200
+++ samba-4.8.6/docs/manpages/winbindd.8	2018-10-09 10:05:38.000000000 +0200
@@ -2,12 +2,12 @@
 .\"     Title: winbindd
 .\"    Author: [see the "AUTHOR" section]
 .\" Generator: DocBook XSL Stylesheets v1.79.1 <http://docbook.sf.net/>
-.\"      Date: 08/24/2018
+.\"      Date: 10/09/2018
 .\"    Manual: System Administration tools
-.\"    Source: Samba 4.8.5
+.\"    Source: Samba 4.8.6
 .\"  Language: English
 .\"
-.TH "WINBINDD" "8" "08/24/2018" "Samba 4\&.8\&.5" "System Administration tools"
+.TH "WINBINDD" "8" "10/09/2018" "Samba 4\&.8\&.6" "System Administration tools"
 .\" -----------------------------------------------------------------
 .\" * Define some portability stuff
 .\" -----------------------------------------------------------------
@@ -579,7 +579,7 @@ Storage for cached user and group inform
 .RE
 .SH "VERSION"
 .PP
-This man page is part of version 4\&.8\&.5 of the Samba suite\&.
+This man page is part of version 4\&.8\&.6 of the Samba suite\&.
 .SH "SEE ALSO"
 .PP
 nsswitch\&.conf(5),
diff -Npur samba-4.8.5/lib/krb5_wrap/krb5_samba.c samba-4.8.6/lib/krb5_wrap/krb5_samba.c
--- samba-4.8.5/lib/krb5_wrap/krb5_samba.c	2018-06-26 16:42:46.000000000 +0200
+++ samba-4.8.6/lib/krb5_wrap/krb5_samba.c	2018-10-09 09:46:34.000000000 +0200
@@ -24,6 +24,7 @@
 #include "system/filesys.h"
 #include "krb5_samba.h"
 #include "lib/crypto/crypto.h"
+#include "../libds/common/flags.h"
 
 #ifdef HAVE_COM_ERR_H
 #include <com_err.h>
@@ -445,8 +446,7 @@ int smb_krb5_get_pw_salt(krb5_context co
  * @param[in]  userPrincipalName  The userPrincipalName attribute of the object
  *                                or NULL is not available.
  *
- * @param[in]  is_computer        The indication of the object includes
- *                                objectClass=computer.
+ * @param[in]  uac_flags          UF_ACCOUNT_TYPE_MASKed userAccountControl field
  *
  * @param[in]  mem_ctx            The TALLOC_CTX to allocate _salt_principal.
  *
@@ -459,7 +459,7 @@ int smb_krb5_get_pw_salt(krb5_context co
 int smb_krb5_salt_principal(const char *realm,
 			    const char *sAMAccountName,
 			    const char *userPrincipalName,
-			    bool is_computer,
+			    uint32_t uac_flags,
 			    TALLOC_CTX *mem_ctx,
 			    char **_salt_principal)
 {
@@ -480,6 +480,23 @@ int smb_krb5_salt_principal(const char *
 		return EINVAL;
 	}
 
+	if (uac_flags & ~UF_ACCOUNT_TYPE_MASK) {
+		/*
+		 * catch callers which still
+		 * pass 'true'.
+		 */
+		TALLOC_FREE(frame);
+		return EINVAL;
+	}
+	if (uac_flags == 0) {
+		/*
+		 * catch callers which still
+		 * pass 'false'.
+		 */
+		TALLOC_FREE(frame);
+		return EINVAL;
+	}
+
 	upper_realm = strupper_talloc(frame, realm);
 	if (upper_realm == NULL) {
 		TALLOC_FREE(frame);
@@ -493,7 +510,7 @@ int smb_krb5_salt_principal(const char *
 	/*
 	 * Determine a salting principal
 	 */
-	if (is_computer) {
+	if (uac_flags & UF_TRUST_ACCOUNT_MASK) {
 		int computer_len = 0;
 		char *tmp = NULL;
 
@@ -502,20 +519,32 @@ int smb_krb5_salt_principal(const char *
 			computer_len -= 1;
 		}
 
-		tmp = talloc_asprintf(frame, "host/%*.*s.%s",
-				      computer_len, computer_len,
-				      sAMAccountName, realm);
-		if (tmp == NULL) {
-			TALLOC_FREE(frame);
-			return ENOMEM;
-		}
+		if (uac_flags & UF_INTERDOMAIN_TRUST_ACCOUNT) {
+			principal = talloc_asprintf(frame, "krbtgt/%*.*s",
+						    computer_len, computer_len,
+						    sAMAccountName);
+			if (principal == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
+		} else {
 
-		principal = strlower_talloc(frame, tmp);
-		TALLOC_FREE(tmp);
-		if (principal == NULL) {
-			TALLOC_FREE(frame);
-			return ENOMEM;
+			tmp = talloc_asprintf(frame, "host/%*.*s.%s",
+					      computer_len, computer_len,
+					      sAMAccountName, realm);
+			if (tmp == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
+
+			principal = strlower_talloc(frame, tmp);
+			TALLOC_FREE(tmp);
+			if (principal == NULL) {
+				TALLOC_FREE(frame);
+				return ENOMEM;
+			}
 		}
+
 		principal_len = strlen(principal);
 
 	} else if (userPrincipalName != NULL) {
diff -Npur samba-4.8.5/lib/krb5_wrap/krb5_samba.h samba-4.8.6/lib/krb5_wrap/krb5_samba.h
--- samba-4.8.5/lib/krb5_wrap/krb5_samba.h	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/lib/krb5_wrap/krb5_samba.h	2018-10-09 09:46:34.000000000 +0200
@@ -353,7 +353,7 @@ int smb_krb5_get_pw_salt(krb5_context co
 int smb_krb5_salt_principal(const char *realm,
 			    const char *sAMAccountName,
 			    const char *userPrincipalName,
-			    bool is_computer,
+			    uint32_t uac_flags,
 			    TALLOC_CTX *mem_ctx,
 			    char **_salt_principal);
 int smb_krb5_salt_principal2data(krb5_context context,
diff -Npur samba-4.8.5/lib/ldb/modules/paged_results.c samba-4.8.6/lib/ldb/modules/paged_results.c
--- samba-4.8.5/lib/ldb/modules/paged_results.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/lib/ldb/modules/paged_results.c	2018-10-09 09:46:34.000000000 +0200
@@ -35,6 +35,8 @@
 #include "replace.h"
 #include "system/filesys.h"
 #include "system/time.h"
+#include "dlinklist.h"
+#include <assert.h>
 #include "ldb_module.h"
 
 struct message_store {
@@ -48,14 +50,13 @@ struct message_store {
 struct private_data;
 
 struct results_store {
+	struct results_store *prev, *next;
 
 	struct private_data *priv;
 
 	char *cookie;
 	time_t timestamp;
 
-	struct results_store *next;
-
 	struct message_store *first;
 	struct message_store *last;
 	int num_entries;
@@ -68,6 +69,7 @@ struct results_store {
 
 struct private_data {
 	uint32_t next_free_id;
+	size_t num_stores;
 	struct results_store *store;
 	
 };
@@ -75,22 +77,12 @@ struct private_data {
 static int store_destructor(struct results_store *del)
 {
 	struct private_data *priv = del->priv;
-	struct results_store *loop;
-
-	if (priv->store == del) {
-		priv->store = del->next;
-		return 0;
-	}
+	DLIST_REMOVE(priv->store, del);
 
-	for (loop = priv->store; loop; loop = loop->next) {
-		if (loop->next == del) {
-			loop->next = del->next;
-			return 0;
-		}
-	}
+	assert(priv->num_stores > 0);
+	priv->num_stores -= 1;
 
-	/* is not in list ? */
-	return -1;
+	return 0;
 }
 
 static struct results_store *new_store(struct private_data *priv)
@@ -120,11 +112,23 @@ static struct results_store *new_store(s
 	newr->first_ref = NULL;
 	newr->controls = NULL;
 
-	newr->next = priv->store;
-	priv->store = newr;
+	DLIST_ADD(priv->store, newr);
+
+	assert(priv->num_stores < SIZE_MAX);
+	priv->num_stores += 1;
 
 	talloc_set_destructor(newr, store_destructor);
 
+	if (priv->num_stores > 10) {
+		struct results_store *last;
+		/*
+		 * 10 is the default for MaxResultSetsPerConn --
+		 * possibly need to parameterize it.
+		 */
+		last = DLIST_TAIL(priv->store);
+		TALLOC_FREE(last);
+	}
+
 	return newr;
 }
 
@@ -381,6 +385,8 @@ static int paged_search(struct ldb_modul
 			return LDB_ERR_UNWILLING_TO_PERFORM;
 		}
 
+		DLIST_PROMOTE(private_data->store, current);
+
 		ac->store = current;
 
 		/* check if it is an abandon */
@@ -412,6 +418,7 @@ static int paged_request_init(struct ldb
 	}
 
 	data->next_free_id = 1;
+	data->num_stores = 0;
 	data->store = NULL;
 	ldb_module_set_private(module, data);
 
diff -Npur samba-4.8.5/lib/util/debug.c samba-4.8.6/lib/util/debug.c
--- samba-4.8.5/lib/util/debug.c	2018-06-26 16:42:46.000000000 +0200
+++ samba-4.8.6/lib/util/debug.c	2018-10-09 09:46:34.000000000 +0200
@@ -1069,8 +1069,11 @@ bool reopen_logs_internal(void)
 	force_check_log_size();
 	(void)umask(oldumask);
 
-	/* Take over stderr to catch output into logs */
-	if (state.fd > 0) {
+	/*
+	 * If log file was opened or created successfully, take over stderr to
+	 * catch output into logs.
+	 */
+	if (new_fd != -1) {
 		if (dup2(state.fd, 2) == -1) {
 			/* Close stderr too, if dup2 can't point it -
 			   at the logfile.  There really isn't much
diff -Npur samba-4.8.5/libds/common/flags.h samba-4.8.6/libds/common/flags.h
--- samba-4.8.5/libds/common/flags.h	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/libds/common/flags.h	2018-10-09 09:46:34.000000000 +0200
@@ -53,7 +53,7 @@
 #define UF_PARTIAL_SECRETS_ACCOUNT		0x04000000
 #define UF_USE_AES_KEYS                         0x08000000
 
-#define UF_MACHINE_ACCOUNT_MASK (\
+#define UF_TRUST_ACCOUNT_MASK (\
 		UF_INTERDOMAIN_TRUST_ACCOUNT |\
 		UF_WORKSTATION_TRUST_ACCOUNT |\
 		UF_SERVER_TRUST_ACCOUNT \
diff -Npur samba-4.8.5/python/samba/netcmd/user.py samba-4.8.6/python/samba/netcmd/user.py
--- samba-4.8.5/python/samba/netcmd/user.py	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/python/samba/netcmd/user.py	2018-10-09 09:46:34.000000000 +0200
@@ -199,6 +199,9 @@ for (alg, attr) in [("5", "virtualCryptS
 for x in range(1, 30):
     virtual_attributes["virtualWDigest%02d" % x] = {}
 
+# Add Kerberos virtual attributes
+virtual_attributes["virtualKerberosSalt"] = {}
+
 virtual_attributes_help  = "The attributes to display (comma separated). "
 virtual_attributes_help += "Possible supported virtual attributes: %s" % ", ".join(sorted(virtual_attributes.keys()))
 if len(disabled_virtual_attributes) != 0:
@@ -1217,6 +1220,16 @@ class GetPasswordCommand(Command):
             # first matching scheme
             return (None, scheme_match)
 
+        def get_kerberos_ctr():
+            primary_krb5 = get_package("Primary:Kerberos-Newer-Keys")
+            if primary_krb5 is None:
+                primary_krb5 = get_package("Primary:Kerberos")
+            if primary_krb5 is None:
+                return (0, None)
+            krb5_blob = ndr_unpack(drsblobs.package_PrimaryKerberosBlob,
+                                   primary_krb5)
+            return (krb5_blob.version, krb5_blob.ctr)
+
         # We use sort here in order to have a predictable processing order
         for a in sorted(virtual_attributes.keys()):
             if not a.lower() in lower_attrs:
@@ -1268,6 +1281,11 @@ class GetPasswordCommand(Command):
                 v = get_package("Primary:SambaGPG", min_idx=-1)
                 if v is None:
                     continue
+            elif a == "virtualKerberosSalt":
+                (krb5_v, krb5_ctr) = get_kerberos_ctr()
+                if krb5_v not in [3, 4]:
+                    continue
+                v = krb5_ctr.salt.string
             elif a.startswith("virtualWDigest"):
                 primary_wdigest = get_package("Primary:WDigest")
                 if primary_wdigest is None:
@@ -1384,6 +1402,9 @@ for which virtual attributes are support
                         https://msdn.microsoft.com/en-us/library/cc245680.aspx
                           is incorrect
 
+   virtualKerberosSalt:   This results the salt string that is used to compute
+                          Kerberos keys from a UTF-8 cleartext password.
+
    virtualSambaGPG:       The raw cleartext as stored in the
                           'Primary:SambaGPG' buffer inside of the
                           supplementalCredentials attribute.
@@ -1551,6 +1572,9 @@ for supported virtual attributes in your
                         https://msdn.microsoft.com/en-us/library/cc245680.aspx
                           is incorrect.
 
+   virtualKerberosSalt:   This results the salt string that is used to compute
+                          Kerberos keys from a UTF-8 cleartext password.
+
    virtualSambaGPG:       The raw cleartext as stored in the
                           'Primary:SambaGPG' buffer inside of the
                           supplementalCredentials attribute.
diff -Npur samba-4.8.5/selftest/target/Samba3.pm samba-4.8.6/selftest/target/Samba3.pm
--- samba-4.8.5/selftest/target/Samba3.pm	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/selftest/target/Samba3.pm	2018-10-09 09:46:34.000000000 +0200
@@ -2199,6 +2199,14 @@ sub provision($$$$$$$$$)
 	copy = tmp
 	vfs objects = error_inject
 	include = $libdir/error_inject.conf
+
+[delay_inject]
+	copy = tmp
+	vfs objects = delay_inject
+	kernel share modes = no
+	kernel oplocks = no
+	posix locking = no
+	include = $libdir/delay_inject.conf
 	";
 	close(CONF);
 
diff -Npur samba-4.8.5/source3/locking/share_mode_lock.c samba-4.8.6/source3/locking/share_mode_lock.c
--- samba-4.8.5/source3/locking/share_mode_lock.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/source3/locking/share_mode_lock.c	2018-10-09 09:46:34.000000000 +0200
@@ -673,7 +673,7 @@ static void fetch_share_mode_done(struct
 struct fetch_share_mode_state {
 	struct file_id id;
 	TDB_DATA key;
-	struct share_mode_lock *lck;
+	struct fetch_share_mode_unlocked_state parser_state;
 	enum dbwrap_req_state req_state;
 };
 
@@ -721,17 +721,14 @@ struct tevent_req *fetch_share_mode_send
 
 	state->id = id;
 	state->key = locking_key(&state->id);
-	state->lck = talloc_zero(state, struct share_mode_lock);
-	if (tevent_req_nomem(state->lck, req)) {
-		return tevent_req_post(req, ev);
-	}
+	state->parser_state.mem_ctx = state;
 
 	subreq = dbwrap_parse_record_send(state,
 					  ev,
 					  lock_db,
 					  state->key,
 					  fetch_share_mode_unlocked_parser,
-					  state->lck,
+					  &state->parser_state,
 					  &state->req_state);
 	if (tevent_req_nomem(subreq, req)) {
 		return tevent_req_post(req, ev);
@@ -775,12 +772,12 @@ NTSTATUS fetch_share_mode_recv(struct te
 		return status;
 	}
 
-	if (state->lck->data == NULL) {
+	if (state->parser_state.lck->data == NULL) {
 		tevent_req_received(req);
 		return NT_STATUS_NOT_FOUND;
 	}
 
-	lck = talloc_move(mem_ctx, &state->lck);
+	lck = talloc_move(mem_ctx, &state->parser_state.lck);
 
 	if (DEBUGLEVEL >= 10) {
 		DBG_DEBUG("share_mode_data:\n");
diff -Npur samba-4.8.5/source3/modules/vfs_delay_inject.c samba-4.8.6/source3/modules/vfs_delay_inject.c
--- samba-4.8.5/source3/modules/vfs_delay_inject.c	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.6/source3/modules/vfs_delay_inject.c	2018-10-09 09:46:34.000000000 +0200
@@ -0,0 +1,58 @@
+/*
+ *  Unix SMB/CIFS implementation.
+ *  Samba VFS module for delay injection in VFS calls
+ *  Copyright (C) Ralph Boehme 2018
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 3 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, see <http://www.gnu.org/licenses/>.
+ */
+
+#include "includes.h"
+#include "smbd/smbd.h"
+
+#undef DBGC_CLASS
+#define DBGC_CLASS DBGC_VFS
+
+static void inject_delay(const char *vfs_func, vfs_handle_struct *handle)
+{
+	int delay;
+
+	delay = lp_parm_int(SNUM(handle->conn), "delay_inject", vfs_func, 0);
+	if (delay == 0) {
+		return;
+	}
+
+	DBG_DEBUG("Injected delay for [%s] of [%d] ms\n", vfs_func, delay);
+
+	smb_msleep(delay);
+}
+
+static int vfs_delay_inject_ntimes(vfs_handle_struct *handle,
+				   const struct smb_filename *smb_fname,
+				   struct smb_file_time *ft)
+{
+	inject_delay("ntimes", handle);
+
+	return SMB_VFS_NEXT_NTIMES(handle, smb_fname, ft);
+}
+
+static struct vfs_fn_pointers vfs_delay_inject_fns = {
+	.ntimes_fn = vfs_delay_inject_ntimes,
+};
+
+static_decl_vfs;
+NTSTATUS vfs_delay_inject_init(TALLOC_CTX *ctx)
+{
+	return smb_register_vfs(SMB_VFS_INTERFACE_VERSION, "delay_inject",
+				&vfs_delay_inject_fns);
+}
diff -Npur samba-4.8.5/source3/modules/vfs_fruit.c samba-4.8.6/source3/modules/vfs_fruit.c
--- samba-4.8.5/source3/modules/vfs_fruit.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/source3/modules/vfs_fruit.c	2018-10-09 09:46:34.000000000 +0200
@@ -5545,7 +5545,11 @@ static int fruit_ftruncate(struct vfs_ha
 		  (intmax_t)offset);
 
 	if (fio == NULL) {
-		if (offset == 0 && global_fruit_config.nego_aapl) {
+		if (offset == 0 &&
+		    global_fruit_config.nego_aapl &&
+		    is_ntfs_stream_smb_fname(fsp->fsp_name) &&
+		    !is_ntfs_default_stream_smb_fname(fsp->fsp_name))
+		{
 			return SMB_VFS_NEXT_UNLINK(handle, fsp->fsp_name);
 		}
 		return SMB_VFS_NEXT_FTRUNCATE(handle, fsp, offset);
diff -Npur samba-4.8.5/source3/modules/wscript_build samba-4.8.6/source3/modules/wscript_build
--- samba-4.8.5/source3/modules/wscript_build	2018-02-12 11:27:16.000000000 +0100
+++ samba-4.8.6/source3/modules/wscript_build	2018-10-09 09:46:34.000000000 +0200
@@ -550,3 +550,10 @@ bld.SAMBA3_MODULE('vfs_error_inject',
                  init_function='',
                  internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_error_inject'),
                  enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_error_inject'))
+
+bld.SAMBA3_MODULE('vfs_delay_inject',
+                 subsystem='vfs',
+                 source='vfs_delay_inject.c',
+                 init_function='',
+                 internal_module=bld.SAMBA3_IS_STATIC_MODULE('vfs_delay_inject'),
+                 enabled=bld.SAMBA3_IS_ENABLED_MODULE('vfs_delay_inject'))
diff -Npur samba-4.8.5/source3/passdb/machine_account_secrets.c samba-4.8.6/source3/passdb/machine_account_secrets.c
--- samba-4.8.5/source3/passdb/machine_account_secrets.c	2018-04-26 09:21:03.000000000 +0200
+++ samba-4.8.6/source3/passdb/machine_account_secrets.c	2018-10-09 09:46:34.000000000 +0200
@@ -36,6 +36,7 @@
 #include "lib/crypto/crypto.h"
 #include "lib/krb5_wrap/krb5_samba.h"
 #include "lib/util/time_basic.h"
+#include "../libds/common/flags.h"
 
 #undef DBGC_CLASS
 #define DBGC_CLASS DBGC_PASSDB
@@ -1601,7 +1602,7 @@ NTSTATUS secrets_store_JoinCtx(const str
 		ret = smb_krb5_salt_principal(info->domain_info.dns_domain.string,
 					      info->account_name,
 					      NULL /* userPrincipalName */,
-					      true /* is_computer */,
+					      UF_WORKSTATION_TRUST_ACCOUNT,
 					      info, &p);
 		if (ret != 0) {
 			status = krb5_to_nt_status(ret);
diff -Npur samba-4.8.5/source3/script/tests/test_durable_handle_reconnect.sh samba-4.8.6/source3/script/tests/test_durable_handle_reconnect.sh
--- samba-4.8.5/source3/script/tests/test_durable_handle_reconnect.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.6/source3/script/tests/test_durable_handle_reconnect.sh	2018-10-09 09:46:34.000000000 +0200
@@ -0,0 +1,21 @@
+#!/bin/sh
+#
+# Test Durable Handle reconnect with injected delay in the disconnect.
+#
+# Copyright (C) 2018 Ralph Boehme
+
+. $(dirname $0)/../../../testprogs/blackbox/subunit.sh
+failed=0
+
+delay_inject_conf=$(dirname $SMB_CONF_PATH)/delay_inject.conf
+
+echo 'delay_inject:ntimes = 5000' > $delay_inject_conf
+
+testit "durable_v2_delay" $VALGRIND \
+       $BINDIR/smbtorture //$SERVER_IP/delay_inject \
+       -U$USERNAME%$PASSWORD  smb2.durable-v2-delay ||
+	failed=$(expr $failed + 1)
+
+rm $delay_inject_conf
+
+testok $0 $failed
diff -Npur samba-4.8.5/source3/selftest/tests.py samba-4.8.6/source3/selftest/tests.py
--- samba-4.8.5/source3/selftest/tests.py	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/source3/selftest/tests.py	2018-10-09 09:46:34.000000000 +0200
@@ -466,7 +466,7 @@ for t in tests:
     elif t == "rpc.samr.passwords.validate":
         plansmbtorture4testsuite(t, "nt4_dc", 'ncacn_ip_tcp:$SERVER_IP[seal] -U$USERNAME%$PASSWORD', 'over ncacn_ip_tcp ')
         plansmbtorture4testsuite(t, "ad_dc", 'ncacn_ip_tcp:$SERVER_IP[seal] -U$USERNAME%$PASSWORD', 'over ncacn_ip_tcp ')
-    elif t == "smb2.durable-open" or t == "smb2.durable-v2-open" or t == "smb2.replay":
+    elif t == "smb2.durable-open" or t == "smb2.durable-v2-open" or t == "smb2.replay" or t == "smb2.durable-v2-delay":
         plansmbtorture4testsuite(t, "nt4_dc", '//$SERVER_IP/durable -U$USERNAME%$PASSWORD')
         plansmbtorture4testsuite(t, "ad_dc", '//$SERVER_IP/durable -U$USERNAME%$PASSWORD')
     elif t == "base.rw1":
@@ -621,6 +621,9 @@ plantestsuite("samba3.blackbox.net_tdb",
 plantestsuite("samba3.blackbox.smbd_error", "simpleserver:local",
               [ os.path.join(samba3srcdir, "script/tests/test_smbd_error.sh") ])
 
+plantestsuite("samba3.blackbox.durable_v2_delay", "simpleserver:local",
+              [os.path.join(samba3srcdir, "script/tests/test_durable_handle_reconnect.sh")])
+
 plantestsuite("samba3.blackbox.net_cache_samlogon", "ad_member:local",
               [ os.path.join(samba3srcdir, "script/tests/test_net_cache_samlogon.sh"),
                 '$SERVER', 'tmp', '$DC_USERNAME', '$DC_PASSWORD'])
diff -Npur samba-4.8.5/source3/smbd/filename.c samba-4.8.6/source3/smbd/filename.c
--- samba-4.8.5/source3/smbd/filename.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/source3/smbd/filename.c	2018-10-09 09:46:34.000000000 +0200
@@ -1443,6 +1443,11 @@ int get_real_filename(connection_struct
 	int ret;
 	bool mangled;
 
+	/* handle null paths */
+	if ((path == NULL) || (*path == 0)) {
+		path = ".";
+	}
+
 	mangled = mangle_is_mangled(name, conn->params);
 
 	if (mangled) {
diff -Npur samba-4.8.5/source3/smbd/smbXsrv_session.c samba-4.8.6/source3/smbd/smbXsrv_session.c
--- samba-4.8.5/source3/smbd/smbXsrv_session.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/source3/smbd/smbXsrv_session.c	2018-10-09 09:46:34.000000000 +0200
@@ -1659,6 +1659,35 @@ NTSTATUS smbXsrv_session_logoff(struct s
 	session->client = NULL;
 	session->status = NT_STATUS_USER_SESSION_DELETED;
 
+	if (session->compat) {
+		/*
+		 * For SMB2 this is a bit redundant as files are also close
+		 * below via smb2srv_tcon_disconnect_all() -> ... ->
+		 * smbXsrv_tcon_disconnect() -> close_cnum() ->
+		 * file_close_conn().
+		 */
+		file_close_user(sconn, session->compat->vuid);
+	}
+
+	if (session->tcon_table != NULL) {
+		/*
+		 * Note: We only have a tcon_table for SMB2.
+		 */
+		status = smb2srv_tcon_disconnect_all(session);
+		if (!NT_STATUS_IS_OK(status)) {
+			DEBUG(0, ("smbXsrv_session_logoff(0x%08x): "
+				  "smb2srv_tcon_disconnect_all() failed: %s\n",
+				  session->global->session_global_id,
+				  nt_errstr(status)));
+			error = status;
+		}
+	}
+
+	if (session->compat) {
+		invalidate_vuid(sconn, session->compat->vuid);
+		session->compat = NULL;
+	}
+
 	global_rec = session->global->db_rec;
 	session->global->db_rec = NULL;
 	if (global_rec == NULL) {
@@ -1718,29 +1747,6 @@ NTSTATUS smbXsrv_session_logoff(struct s
 	}
 	session->db_rec = NULL;
 
-	if (session->compat) {
-		file_close_user(sconn, session->compat->vuid);
-	}
-
-	if (session->tcon_table != NULL) {
-		/*
-		 * Note: We only have a tcon_table for SMB2.
-		 */
-		status = smb2srv_tcon_disconnect_all(session);
-		if (!NT_STATUS_IS_OK(status)) {
-			DEBUG(0, ("smbXsrv_session_logoff(0x%08x): "
-				  "smb2srv_tcon_disconnect_all() failed: %s\n",
-				  session->global->session_global_id,
-				  nt_errstr(status)));
-			error = status;
-		}
-	}
-
-	if (session->compat) {
-		invalidate_vuid(sconn, session->compat->vuid);
-		session->compat = NULL;
-	}
-
 	return error;
 }
 
diff -Npur samba-4.8.5/source3/smbd/smbXsrv_tcon.c samba-4.8.6/source3/smbd/smbXsrv_tcon.c
--- samba-4.8.5/source3/smbd/smbXsrv_tcon.c	2018-01-14 21:41:58.000000000 +0100
+++ samba-4.8.6/source3/smbd/smbXsrv_tcon.c	2018-10-09 09:46:34.000000000 +0200
@@ -904,6 +904,25 @@ NTSTATUS smbXsrv_tcon_disconnect(struct
 	table = tcon->table;
 	tcon->table = NULL;
 
+	if (tcon->compat) {
+		bool ok;
+
+		ok = set_current_service(tcon->compat, 0, true);
+		if (!ok) {
+			status = NT_STATUS_INTERNAL_ERROR;
+			DEBUG(0, ("smbXsrv_tcon_disconnect(0x%08x, '%s'): "
+				  "set_current_service() failed: %s\n",
+				  tcon->global->tcon_global_id,
+				  tcon->global->share_name,
+				  nt_errstr(status)));
+			tcon->compat = NULL;
+			return status;
+		}
+
+		close_cnum(tcon->compat, vuid);
+		tcon->compat = NULL;
+	}
+
 	tcon->status = NT_STATUS_NETWORK_NAME_DELETED;
 
 	global_rec = tcon->global->db_rec;
@@ -966,25 +985,6 @@ NTSTATUS smbXsrv_tcon_disconnect(struct
 	}
 	tcon->db_rec = NULL;
 
-	if (tcon->compat) {
-		bool ok;
-
-		ok = set_current_service(tcon->compat, 0, true);
-		if (!ok) {
-			status = NT_STATUS_INTERNAL_ERROR;
-			DEBUG(0, ("smbXsrv_tcon_disconnect(0x%08x, '%s'): "
-				  "set_current_service() failed: %s\n",
-				  tcon->global->tcon_global_id,
-				  tcon->global->share_name,
-				  nt_errstr(status)));
-			tcon->compat = NULL;
-			return status;
-		}
-
-		close_cnum(tcon->compat, vuid);
-		tcon->compat = NULL;
-	}
-
 	return error;
 }
 
diff -Npur samba-4.8.5/source3/wscript samba-4.8.6/source3/wscript
--- samba-4.8.5/source3/wscript	2018-06-26 16:42:46.000000000 +0200
+++ samba-4.8.6/source3/wscript	2018-10-09 09:46:34.000000000 +0200
@@ -1688,6 +1688,7 @@ main() {
     if Options.options.enable_selftest or Options.options.developer:
         default_shared_modules.extend(TO_LIST('vfs_fake_acls vfs_nfs4acl_xattr'))
         default_shared_modules.extend(TO_LIST('vfs_error_inject'))
+        default_shared_modules.extend(TO_LIST('vfs_delay_inject'))
 
     if conf.CONFIG_SET('AD_DC_BUILD_IS_ENABLED'):
         default_static_modules.extend(TO_LIST('pdb_samba_dsdb auth_samba4 vfs_dfs_samba4'))
diff -Npur samba-4.8.5/source4/dsdb/common/util.c samba-4.8.6/source4/dsdb/common/util.c
--- samba-4.8.5/source4/dsdb/common/util.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/source4/dsdb/common/util.c	2018-10-09 09:46:34.000000000 +0200
@@ -1294,6 +1294,61 @@ failed:
 	return false;
 }
 
+/*
+  work out the domain guid for the current open ldb
+*/
+const struct GUID *samdb_domain_guid(struct ldb_context *ldb)
+{
+	TALLOC_CTX *tmp_ctx = NULL;
+	struct GUID *domain_guid = NULL;
+	const char *attrs[] = {
+		"objectGUID",
+		NULL
+	};
+	struct ldb_result *res = NULL;
+	int ret;
+
+	/* see if we have a cached copy */
+	domain_guid = (struct GUID *)ldb_get_opaque(ldb, "cache.domain_guid");
+	if (domain_guid) {
+		return domain_guid;
+	}
+
+	tmp_ctx = talloc_new(ldb);
+	if (tmp_ctx == NULL) {
+		goto failed;
+	}
+
+	ret = ldb_search(ldb, tmp_ctx, &res, ldb_get_default_basedn(ldb), LDB_SCOPE_BASE, attrs, "objectGUID=*");
+	if (ret != LDB_SUCCESS) {
+		goto failed;
+	}
+
+	if (res->count != 1) {
+		goto failed;
+	}
+
+	domain_guid = talloc(tmp_ctx, struct GUID);
+	if (domain_guid == NULL) {
+		goto failed;
+	}
+	*domain_guid = samdb_result_guid(res->msgs[0], "objectGUID");
+
+	/* cache the domain_sid in the ldb */
+	if (ldb_set_opaque(ldb, "cache.domain_guid", domain_guid) != LDB_SUCCESS) {
+		goto failed;
+	}
+
+	talloc_steal(ldb, domain_guid);
+	talloc_free(tmp_ctx);
+
+	return domain_guid;
+
+failed:
+	talloc_free(tmp_ctx);
+	return NULL;
+}
+
 bool samdb_set_ntds_settings_dn(struct ldb_context *ldb, struct ldb_dn *ntds_settings_dn_in)
 {
 	TALLOC_CTX *tmp_ctx;
diff -Npur samba-4.8.5/source4/dsdb/common/util_trusts.c samba-4.8.6/source4/dsdb/common/util_trusts.c
--- samba-4.8.5/source4/dsdb/common/util_trusts.c	2018-03-01 21:18:10.000000000 +0100
+++ samba-4.8.6/source4/dsdb/common/util_trusts.c	2018-10-09 09:46:34.000000000 +0200
@@ -482,12 +482,6 @@ static NTSTATUS dsdb_trust_crossref_tdo_
 		*_trust_parent_tdo = NULL;
 	}
 
-	domain_dn = ldb_get_default_basedn(sam_ctx);
-	if (domain_dn == NULL) {
-		TALLOC_FREE(frame);
-		return NT_STATUS_INTERNAL_ERROR;
-	}
-
 	partitions_dn = samdb_partitions_dn(sam_ctx, frame);
 	if (partitions_dn == NULL) {
 		TALLOC_FREE(frame);
@@ -834,6 +828,22 @@ static bool dsdb_trust_find_tln_ex_match
 	return false;
 }
 
+NTSTATUS dsdb_trust_local_tdo_info(TALLOC_CTX *mem_ctx,
+				   struct ldb_context *sam_ctx,
+				   struct lsa_TrustDomainInfoInfoEx **_tdo)
+{
+	struct ldb_dn *domain_dn = NULL;
+
+	domain_dn = ldb_get_default_basedn(sam_ctx);
+	if (domain_dn == NULL) {
+		return NT_STATUS_INTERNAL_ERROR;
+	}
+
+	return dsdb_trust_crossref_tdo_info(mem_ctx, sam_ctx,
+					    domain_dn, NULL,
+					    _tdo, NULL, NULL);
+}
+
 NTSTATUS dsdb_trust_xref_tdo_info(TALLOC_CTX *mem_ctx,
 				  struct ldb_context *sam_ctx,
 				  struct lsa_TrustDomainInfoInfoEx **_tdo)
diff -Npur samba-4.8.5/source4/dsdb/samdb/ldb_modules/password_hash.c samba-4.8.6/source4/dsdb/samdb/ldb_modules/password_hash.c
--- samba-4.8.5/source4/dsdb/samdb/ldb_modules/password_hash.c	2018-03-13 20:05:54.000000000 +0100
+++ samba-4.8.6/source4/dsdb/samdb/ldb_modules/password_hash.c	2018-10-09 09:46:34.000000000 +0200
@@ -128,7 +128,6 @@ struct setup_password_fields_io {
 		NTTIME pwdLastSet;
 		const char *sAMAccountName;
 		const char *user_principal_name;
-		bool is_computer;
 		bool is_krbtgt;
 		uint32_t restrictions;
 		struct dom_sid *account_sid;
@@ -676,15 +675,17 @@ static int setup_kerberos_keys(struct se
 	krb5_data salt;
 	krb5_keyblock key;
 	krb5_data cleartext_data;
+	uint32_t uac_flags = 0;
 
 	ldb = ldb_module_get_ctx(io->ac->module);
 	cleartext_data.data = (char *)io->n.cleartext_utf8->data;
 	cleartext_data.length = io->n.cleartext_utf8->length;
 
+	uac_flags = io->u.userAccountControl & UF_ACCOUNT_TYPE_MASK;
 	krb5_ret = smb_krb5_salt_principal(io->ac->status->domain_data.realm,
 					   io->u.sAMAccountName,
 					   io->u.user_principal_name,
-					   io->u.is_computer,
+					   uac_flags,
 					   io->ac,
 					   &salt_principal);
 	if (krb5_ret) {
@@ -3163,7 +3164,6 @@ static int setup_io(struct ph_context *a
 								      "sAMAccountName", NULL);
 	io->u.user_principal_name	= ldb_msg_find_attr_as_string(info_msg,
 								      "userPrincipalName", NULL);
-	io->u.is_computer		= ldb_msg_check_string_attribute(info_msg, "objectClass", "computer");
 
 	/* Ensure it has an objectSID too */
 	io->u.account_sid = samdb_result_dom_sid(ac, info_msg, "objectSid");
diff -Npur samba-4.8.5/source4/rpc_server/netlogon/dcerpc_netlogon.c samba-4.8.6/source4/rpc_server/netlogon/dcerpc_netlogon.c
--- samba-4.8.5/source4/rpc_server/netlogon/dcerpc_netlogon.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/source4/rpc_server/netlogon/dcerpc_netlogon.c	2018-10-09 09:46:34.000000000 +0200
@@ -2161,57 +2161,122 @@ static WERROR dcesrv_netr_DsRGetSiteName
 
 
 /*
-  fill in a netr_OneDomainInfo from a ldb search result
+  fill in a netr_OneDomainInfo from our own domain/forest
 */
-static NTSTATUS fill_one_domain_info(TALLOC_CTX *mem_ctx,
-				     struct loadparm_context *lp_ctx,
-				     struct ldb_context *sam_ctx,
-				     struct ldb_message *res,
-				     struct netr_OneDomainInfo *info,
-				     bool is_local, bool is_trust_list)
+static NTSTATUS fill_our_one_domain_info(TALLOC_CTX *mem_ctx,
+				const struct lsa_TrustDomainInfoInfoEx *our_tdo,
+				struct GUID domain_guid,
+				struct netr_OneDomainInfo *info,
+				bool is_trust_list)
 {
 	ZERO_STRUCTP(info);
 
 	if (is_trust_list) {
+		struct netr_trust_extension *tei = NULL;
+
 		/* w2k8 only fills this on trusted domains */
-		info->trust_extension.info = talloc_zero(mem_ctx, struct netr_trust_extension);
+		tei = talloc_zero(mem_ctx, struct netr_trust_extension);
+		if (tei == NULL) {
+			return NT_STATUS_NO_MEMORY;
+		}
+		tei->flags |= NETR_TRUST_FLAG_PRIMARY;
+
+		/*
+		 * We're always within a native forest
+		 */
+		tei->flags |= NETR_TRUST_FLAG_IN_FOREST;
+		tei->flags |= NETR_TRUST_FLAG_NATIVE;
+
+		/* For now we assume we're always the tree root */
+		tei->flags |= NETR_TRUST_FLAG_TREEROOT;
+		tei->parent_index = 0;
+
+		tei->trust_type = our_tdo->trust_type;
+		/*
+		 * This needs to be 0 instead of our_tdo->trust_attributes
+		 * It means LSA_TRUST_ATTRIBUTE_WITHIN_FOREST won't
+		 * be set, while NETR_TRUST_FLAG_IN_FOREST is set above.
+		 */
+		tei->trust_attributes = 0;
+
+		info->trust_extension.info = tei;
 		info->trust_extension.length = 16;
-		info->trust_extension.info->flags =
-			NETR_TRUST_FLAG_TREEROOT |
-			NETR_TRUST_FLAG_IN_FOREST |
-			NETR_TRUST_FLAG_PRIMARY |
-			NETR_TRUST_FLAG_NATIVE;
-
-		info->trust_extension.info->parent_index = 0; /* should be index into array
-								 of parent */
-		info->trust_extension.info->trust_type = LSA_TRUST_TYPE_UPLEVEL; /* should be based on ldb search for trusts */
-		info->trust_extension.info->trust_attributes = 0; /* 	TODO: base on ldb search? */
 	}
 
 	if (is_trust_list) {
+		info->dns_domainname.string = our_tdo->domain_name.string;
+
 		/* MS-NRPC 3.5.4.3.9 - must be set to NULL for trust list */
 		info->dns_forestname.string = NULL;
 	} else {
-		info->dns_forestname.string = samdb_forest_name(sam_ctx, mem_ctx);
-		NT_STATUS_HAVE_NO_MEMORY(info->dns_forestname.string);
-		info->dns_forestname.string = talloc_asprintf(mem_ctx, "%s.", info->dns_forestname.string);
-		NT_STATUS_HAVE_NO_MEMORY(info->dns_forestname.string);
+		info->dns_domainname.string = talloc_asprintf(mem_ctx, "%s.",
+						our_tdo->domain_name.string);
+		if (info->dns_domainname.string == NULL) {
+			return NT_STATUS_NO_MEMORY;
+		}
+
+		info->dns_forestname.string = info->dns_domainname.string;
 	}
 
-	if (is_local) {
-		info->domainname.string = lpcfg_workgroup(lp_ctx);
-		info->dns_domainname.string = lpcfg_dnsdomain(lp_ctx);
-		info->domain_guid = samdb_result_guid(res, "objectGUID");
-		info->domain_sid = samdb_result_dom_sid(mem_ctx, res, "objectSid");
-	} else {
-		info->domainname.string = ldb_msg_find_attr_as_string(res, "flatName", NULL);
-		info->dns_domainname.string = ldb_msg_find_attr_as_string(res, "trustPartner", NULL);
-		info->domain_guid = samdb_result_guid(res, "objectGUID");
-		info->domain_sid = samdb_result_dom_sid(mem_ctx, res, "securityIdentifier");
+	info->domainname.string = our_tdo->netbios_name.string;
+	info->domain_sid = our_tdo->sid;
+	info->domain_guid = domain_guid;
+
+	return NT_STATUS_OK;
+}
+
+/*
+  fill in a netr_OneDomainInfo from a trust tdo
+*/
+static NTSTATUS fill_trust_one_domain_info(TALLOC_CTX *mem_ctx,
+				struct GUID domain_guid,
+				const struct lsa_TrustDomainInfoInfoEx *tdo,
+				struct netr_OneDomainInfo *info)
+{
+	struct netr_trust_extension *tei = NULL;
+
+	ZERO_STRUCTP(info);
+
+	/* w2k8 only fills this on trusted domains */
+	tei = talloc_zero(mem_ctx, struct netr_trust_extension);
+	if (tei == NULL) {
+		return NT_STATUS_NO_MEMORY;
+	}
+
+	if (tdo->trust_direction & LSA_TRUST_DIRECTION_INBOUND) {
+		tei->flags |= NETR_TRUST_FLAG_INBOUND;
 	}
-	if (!is_trust_list) {
-		info->dns_domainname.string = talloc_asprintf(mem_ctx, "%s.", info->dns_domainname.string);
+	if (tdo->trust_direction & LSA_TRUST_DIRECTION_OUTBOUND) {
+		tei->flags |= NETR_TRUST_FLAG_OUTBOUND;
 	}
+	if (tdo->trust_attributes & LSA_TRUST_ATTRIBUTE_WITHIN_FOREST) {
+		tei->flags |= NETR_TRUST_FLAG_IN_FOREST;
+	}
+
+	/*
+	 * TODO: once we support multiple domains within our forest,
+	 * we need to fill this correct (or let the caller do it
+	 * for all domains marked with NETR_TRUST_FLAG_IN_FOREST).
+	 */
+	tei->parent_index = 0;
+
+	tei->trust_type = tdo->trust_type;
+	tei->trust_attributes = tdo->trust_attributes;
+
+	info->trust_extension.info = tei;
+	info->trust_extension.length = 16;
+
+	info->domainname.string = tdo->netbios_name.string;
+	if (tdo->trust_type != LSA_TRUST_TYPE_DOWNLEVEL) {
+		info->dns_domainname.string = tdo->domain_name.string;
+	} else {
+		info->dns_domainname.string = NULL;
+	}
+	info->domain_sid = tdo->sid;
+	info->domain_guid = domain_guid;
+
+	/* MS-NRPC 3.5.4.3.9 - must be set to NULL for trust list */
+	info->dns_forestname.string = NULL;
 
 	return NT_STATUS_OK;
 }
@@ -2227,19 +2292,29 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 	TALLOC_CTX *mem_ctx, struct netr_LogonGetDomainInfo *r)
 {
 	struct netlogon_creds_CredentialState *creds;
-	const char * const attrs[] = { "objectSid", "objectGUID", "flatName",
-		"securityIdentifier", "trustPartner", NULL };
+	const char * const trusts_attrs[] = {
+		"securityIdentifier",
+		"flatName",
+		"trustPartner",
+		"trustAttributes",
+		"trustDirection",
+		"trustType",
+		NULL
+	};
 	const char * const attrs2[] = { "sAMAccountName", "dNSHostName",
 		"msDS-SupportedEncryptionTypes", NULL };
 	const char *sam_account_name, *old_dns_hostname, *prefix1, *prefix2;
 	struct ldb_context *sam_ctx;
-	struct ldb_message **res1, **res2, **res3, *new_msg;
+	const struct GUID *our_domain_guid = NULL;
+	struct lsa_TrustDomainInfoInfoEx *our_tdo = NULL;
+	struct ldb_message **res1, *new_msg;
+	struct ldb_result *trusts_res = NULL;
 	struct ldb_dn *workstation_dn;
 	struct netr_DomainInformation *domain_info;
 	struct netr_LsaPolicyInformation *lsa_policy_info;
 	uint32_t default_supported_enc_types = 0xFFFFFFFF;
 	bool update_dns_hostname = true;
-	int ret, ret3, i;
+	int ret, i;
 	NTSTATUS status;
 
 	status = dcesrv_netr_creds_server_step_check(dce_call,
@@ -2448,21 +2523,23 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 
 		/* Writes back the domain information */
 
-		/* We need to do two searches. The first will pull our primary
-		   domain and the second will pull any trusted domains. Our
-		   primary domain is also a "trusted" domain, so we need to
-		   put the primary domain into the lists of returned trusts as
-		   well. */
-		ret = gendb_search_dn(sam_ctx, mem_ctx, ldb_get_default_basedn(sam_ctx),
-			&res2, attrs);
-		if (ret != 1) {
+		our_domain_guid = samdb_domain_guid(sam_ctx);
+		if (our_domain_guid == NULL) {
 			return NT_STATUS_INTERNAL_DB_CORRUPTION;
 		}
 
-		ret3 = gendb_search(sam_ctx, mem_ctx, NULL, &res3, attrs,
-			"(objectClass=trustedDomain)");
-		if (ret3 == -1) {
-			return NT_STATUS_INTERNAL_DB_CORRUPTION;
+		status = dsdb_trust_local_tdo_info(mem_ctx, sam_ctx, &our_tdo);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
+
+		status = dsdb_trust_search_tdos(sam_ctx,
+						NULL, /* exclude */
+						trusts_attrs,
+						mem_ctx,
+						&trusts_res);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
 		}
 
 		domain_info = talloc(mem_ctx, struct netr_DomainInformation);
@@ -2472,31 +2549,52 @@ static NTSTATUS dcesrv_netr_LogonGetDoma
 
 		/* Informations about the local and trusted domains */
 
-		status = fill_one_domain_info(mem_ctx,
-			dce_call->conn->dce_ctx->lp_ctx,
-			sam_ctx, res2[0], &domain_info->primary_domain,
-			true, false);
-		NT_STATUS_NOT_OK_RETURN(status);
+		status = fill_our_one_domain_info(mem_ctx,
+						  our_tdo,
+						  *our_domain_guid,
+						  &domain_info->primary_domain,
+						  false);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
 
-		domain_info->trusted_domain_count = ret3 + 1;
-		domain_info->trusted_domains = talloc_array(mem_ctx,
+		domain_info->trusted_domain_count = trusts_res->count + 1;
+		domain_info->trusted_domains = talloc_zero_array(mem_ctx,
 			struct netr_OneDomainInfo,
 			domain_info->trusted_domain_count);
 		NT_STATUS_HAVE_NO_MEMORY(domain_info->trusted_domains);
 
-		for (i=0;i<ret3;i++) {
-			status = fill_one_domain_info(mem_ctx,
-				dce_call->conn->dce_ctx->lp_ctx,
-				sam_ctx, res3[i],
-				&domain_info->trusted_domains[i],
-				false, true);
-			NT_STATUS_NOT_OK_RETURN(status);
+		for (i=0; i < trusts_res->count; i++) {
+			struct netr_OneDomainInfo *o =
+				&domain_info->trusted_domains[i];
+			/* we can't know the guid of trusts outside our forest */
+			struct GUID trust_domain_guid = GUID_zero();
+			struct lsa_TrustDomainInfoInfoEx *tdo = NULL;
+
+			status = dsdb_trust_parse_tdo_info(mem_ctx,
+							   trusts_res->msgs[i],
+							   &tdo);
+			if (!NT_STATUS_IS_OK(status)) {
+				return status;
+			}
+
+			status = fill_trust_one_domain_info(mem_ctx,
+							    trust_domain_guid,
+							    tdo,
+							    o);
+			if (!NT_STATUS_IS_OK(status)) {
+				return status;
+			}
 		}
 
-		status = fill_one_domain_info(mem_ctx,
-			dce_call->conn->dce_ctx->lp_ctx, sam_ctx, res2[0],
-			&domain_info->trusted_domains[i], true, true);
-		NT_STATUS_NOT_OK_RETURN(status);
+		status = fill_our_one_domain_info(mem_ctx,
+						  our_tdo,
+						  *our_domain_guid,
+						  &domain_info->trusted_domains[i],
+						  true);
+		if (!NT_STATUS_IS_OK(status)) {
+			return status;
+		}
 
 		/* Sets the supported encryption types */
 		domain_info->supported_enc_types = ldb_msg_find_attr_as_uint(res1[0],
diff -Npur samba-4.8.5/source4/selftest/tests.py samba-4.8.6/source4/selftest/tests.py
--- samba-4.8.5/source4/selftest/tests.py	2018-08-11 08:16:04.000000000 +0200
+++ samba-4.8.6/source4/selftest/tests.py	2018-10-09 09:46:34.000000000 +0200
@@ -312,7 +312,13 @@ for t in nbt_tests:
 ntvfsargs = ["--option=torture:sharedelay=100000", "--option=torture:oplocktimeout=3", "--option=torture:writetimeupdatedelay=500000"]
 
 # Filter smb2 tests that should not run against ad_dc_ntvfs
-smb2_s3only = ["smb2.change_notify_disabled", "smb2.dosmode", "smb2.credits", "smb2.kernel-oplocks"]
+smb2_s3only = [
+    "smb2.change_notify_disabled",
+    "smb2.dosmode",
+    "smb2.credits",
+    "smb2.kernel-oplocks",
+    "smb2.durable-v2-delay",
+]
 smb2 = [x for x in smbtorture4_testsuites("smb2.") if x not in smb2_s3only]
 
 #The QFILEINFO-IPC test needs to be on ipc$
@@ -429,6 +435,7 @@ plantestsuite("samba4.blackbox.trust_uti
 plantestsuite("samba4.blackbox.trust_utils(fl2003dc:local)", "fl2003dc:local", [os.path.join(bbdir, "test_trust_utils.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$REALM', '$DOMAIN', '$TRUST_SERVER', '$TRUST_USERNAME', '$TRUST_PASSWORD', '$TRUST_REALM', '$TRUST_DOMAIN', '$PREFIX', "external"])
 plantestsuite("samba4.blackbox.ktpass(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(bbdir, "test_ktpass.sh"), '$PREFIX/ad_dc_ntvfs'])
 plantestsuite("samba4.blackbox.password_settings(ad_dc_ntvfs:local)", "ad_dc_ntvfs:local", [os.path.join(bbdir, "test_password_settings.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$REALM', '$DOMAIN', "$PREFIX/ad_dc_ntvfs"])
+plantestsuite("samba4.blackbox.trust_user_account", "fl2008r2dc:local", [os.path.join(bbdir, "test_trust_user_account.sh"), '$PREFIX', '$REALM', '$DOMAIN', '$TRUST_REALM', '$TRUST_DOMAIN'])
 plantestsuite("samba4.blackbox.cifsdd(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "client/tests/test_cifsdd.sh"), '$SERVER', '$USERNAME', '$PASSWORD', "$DOMAIN"])
 plantestsuite("samba4.blackbox.nmblookup(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "utils/tests/test_nmblookup.sh"), '$NETBIOSNAME', '$NETBIOSALIAS', '$SERVER', '$SERVER_IP', nmblookup4])
 plantestsuite("samba4.blackbox.locktest(ad_dc_ntvfs)", "ad_dc_ntvfs", [os.path.join(samba4srcdir, "torture/tests/test_locktest.sh"), '$SERVER', '$USERNAME', '$PASSWORD', '$DOMAIN', '$PREFIX'])
diff -Npur samba-4.8.5/source4/torture/rpc/netlogon.c samba-4.8.6/source4/torture/rpc/netlogon.c
--- samba-4.8.5/source4/torture/rpc/netlogon.c	2018-01-14 21:41:59.000000000 +0100
+++ samba-4.8.6/source4/torture/rpc/netlogon.c	2018-10-09 09:46:34.000000000 +0200
@@ -307,7 +307,9 @@ bool test_SetupCredentials3(struct dcerp
 	struct dcerpc_binding_handle *b = p->binding_handle;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge\n");
 
@@ -377,7 +379,9 @@ bool test_SetupCredentialsDowngrade(stru
 	uint32_t negotiate_flags = 0;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge\n");
 
@@ -1255,7 +1259,9 @@ static bool test_ServerReqChallengeGloba
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1334,7 +1340,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b3 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1429,7 +1437,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1517,7 +1527,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1607,7 +1619,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b2 = NULL;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -1722,7 +1736,9 @@ static bool test_ServerReqChallengeReuse
 	struct dcerpc_binding_handle *b = p->binding_handle;
 
 	machine_name = cli_credentials_get_workstation(machine_credentials);
+	torture_assert(tctx, machine_name != NULL, "machine_name");
 	plain_pass = cli_credentials_get_password(machine_credentials);
+	torture_assert(tctx, plain_pass != NULL, "plain_pass");
 
 	torture_comment(tctx, "Testing ServerReqChallenge on b1\n");
 
@@ -4069,9 +4085,13 @@ static bool test_GetDomainInfo(struct to
 	const char *old_dnsname = NULL;
 	char **spns = NULL;
 	int num_spns = 0;
-	char *temp_str;
+	char *temp_str = NULL;
+	char *temp_str2 = NULL;
 	struct dcerpc_pipe *p = NULL;
 	struct dcerpc_binding_handle *b = NULL;
+	struct netr_OneDomainInfo *odi1 = NULL;
+	struct netr_OneDomainInfo *odi2 = NULL;
+	struct netr_trust_extension *tex2 = NULL;
 
 	torture_comment(tctx, "Testing netr_LogonGetDomainInfo\n");
 
@@ -4448,6 +4468,130 @@ static bool test_GetDomainInfo(struct to
 		&& (info.domain_info->trusted_domains != NULL),
 		"Trusted domains have been requested!");
 
+	odi1 = &info.domain_info->primary_domain;
+
+	torture_assert(tctx, !GUID_all_zero(&odi1->domain_guid),
+		       "primary domain_guid needs to be valid");
+
+	for (i=0; i < info.domain_info->trusted_domain_count; i++) {
+		struct netr_OneDomainInfo *odiT =
+			&info.domain_info->trusted_domains[i];
+		struct netr_trust_extension *texT = NULL;
+
+		torture_assert_int_equal(tctx, odiT->trust_extension.length, 16,
+					 "trust_list should have extension");
+		torture_assert(tctx, odiT->trust_extension.info != NULL,
+			       "trust_list should have extension");
+		texT = odiT->trust_extension.info;
+
+		if (GUID_equal(&odiT->domain_guid, &odi1->domain_guid)) {
+			odi2 = odiT;
+			tex2 = texT;
+			continue;
+		}
+
+		torture_assert_int_equal(tctx,
+				 texT->flags & NETR_TRUST_FLAG_PRIMARY,
+				 0,
+				 "trust_list flags should not have PRIMARY");
+
+		torture_assert(tctx, odiT->domainname.string != NULL,
+			       "trust_list domainname should be valid");
+		if (texT->trust_type == LSA_TRUST_TYPE_DOWNLEVEL) {
+			torture_assert(tctx, odiT->dns_domainname.string == NULL,
+			       "trust_list dns_domainname should be NULL for downlevel");
+		} else {
+			torture_assert(tctx, odiT->dns_domainname.string != NULL,
+			       "trust_list dns_domainname should be valid for uplevel");
+		}
+		torture_assert(tctx, odiT->dns_forestname.string == NULL,
+			       "trust_list dns_forestname needs to be NULL");
+
+		torture_assert(tctx, odiT->domain_sid != NULL,
+			       "trust_list domain_sid needs to be valid");
+	}
+
+	torture_assert(tctx, odi2 != NULL,
+		       "trust_list primary domain not found.");
+
+	torture_assert_str_equal(tctx,
+				 odi1->domainname.string,
+				 odi2->domainname.string,
+				 "netbios name should match");
+
+	temp_str = talloc_strdup(tctx, odi1->dns_domainname.string);
+	torture_assert(tctx, temp_str != NULL,
+		       "primary_domain dns_domainname copy");
+	temp_str2 = strrchr(temp_str, '.');
+	torture_assert(tctx, temp_str2 != NULL && temp_str2[1] == '\0',
+		       "primary_domain dns_domainname needs trailing '.'");
+	temp_str2[0] = '\0';
+	torture_assert_str_equal(tctx,
+				 temp_str,
+				 odi2->dns_domainname.string,
+				 "dns domainname should match "
+				 "(without trailing '.')");
+
+	temp_str = talloc_strdup(tctx, odi1->dns_forestname.string);
+	torture_assert(tctx, temp_str != NULL,
+		       "primary_domain dns_forestname copy");
+	temp_str2 = strrchr(temp_str, '.');
+	torture_assert(tctx, temp_str2 != NULL && temp_str2[1] == '\0',
+		       "primary_domain dns_forestname needs trailing '.'");
+	temp_str2[0] = '\0';
+	torture_assert(tctx, odi2->dns_forestname.string == NULL,
+		       "trust_list dns_forestname needs to be NULL");
+
+	torture_assert_guid_equal(tctx, odi1->domain_guid, odi2->domain_guid,
+				  "domain_guid should match");
+	torture_assert(tctx, odi1->domain_sid != NULL,
+		       "primary domain_sid needs to be valid");
+	torture_assert(tctx, odi2->domain_sid != NULL,
+		       "trust_list domain_sid needs to be valid");
+	torture_assert_sid_equal(tctx, odi1->domain_sid, odi2->domain_sid,
+				 "domain_sid should match");
+
+	torture_assert_int_equal(tctx, odi1->trust_extension.length, 0,
+				 "primary_domain should not have extension");
+	torture_assert_int_equal(tctx, odi2->trust_extension.length, 16,
+				 "trust_list should have extension");
+	torture_assert(tctx, odi2->trust_extension.info != NULL,
+		       "trust_list should have extension");
+	tex2 = odi2->trust_extension.info;
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_PRIMARY,
+				 NETR_TRUST_FLAG_PRIMARY,
+				 "trust_list flags should have PRIMARY");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_IN_FOREST,
+				 NETR_TRUST_FLAG_IN_FOREST,
+				 "trust_list flags should have IN_FOREST");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & NETR_TRUST_FLAG_NATIVE,
+				 NETR_TRUST_FLAG_NATIVE,
+				 "trust_list flags should have NATIVE");
+	torture_assert_int_equal(tctx,
+				 tex2->flags & ~NETR_TRUST_FLAG_TREEROOT,
+				 NETR_TRUST_FLAG_IN_FOREST |
+				 NETR_TRUST_FLAG_PRIMARY |
+				 NETR_TRUST_FLAG_NATIVE,
+				 "trust_list flags IN_FOREST, PRIMARY, NATIVE "
+				 "(TREEROOT optional)");
+	if (strcmp(odi1->dns_domainname.string, odi1->dns_forestname.string) == 0) {
+		torture_assert_int_equal(tctx,
+					 tex2->flags & NETR_TRUST_FLAG_TREEROOT,
+					 NETR_TRUST_FLAG_TREEROOT,
+					 "trust_list flags TREEROOT on forest root");
+		torture_assert_int_equal(tctx,
+					 tex2->parent_index, 0,
+					 "trust_list no parent on foreset root");
+	}
+	torture_assert_int_equal(tctx,
+				 tex2->trust_type, LSA_TRUST_TYPE_UPLEVEL,
+				 "trust_list uplevel");
+	torture_assert_int_equal(tctx,
+				 tex2->trust_attributes, 0,
+				 "trust_list no attributes");
 
 	torture_comment(tctx, "Testing netr_LogonGetDomainInfo 6th call (no DNS hostname)\n");
 	netlogon_creds_client_authenticator(creds, &a);
diff -Npur samba-4.8.5/source4/torture/smb2/durable_v2_open.c samba-4.8.6/source4/torture/smb2/durable_v2_open.c
--- samba-4.8.5/source4/torture/smb2/durable_v2_open.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/source4/torture/smb2/durable_v2_open.c	2018-10-09 09:46:34.000000000 +0200
@@ -2035,3 +2035,98 @@ struct torture_suite *torture_smb2_durab
 
 	return suite;
 }
+
+/**
+ * basic test for doing a durable open
+ * tcp disconnect, reconnect, do a durable reopen (succeeds)
+ */
+static bool test_durable_v2_reconnect_delay(struct torture_context *tctx,
+					    struct smb2_tree *tree)
+{
+	NTSTATUS status;
+	TALLOC_CTX *mem_ctx = talloc_new(tctx);
+	char fname[256];
+	struct smb2_handle _h;
+	struct smb2_handle *h = NULL;
+	struct smb2_create io;
+	struct GUID create_guid = GUID_random();
+	struct smbcli_options options;
+	uint64_t previous_session_id;
+	uint8_t b = 0;
+	bool ret = true;
+
+	options = tree->session->transport->options;
+	previous_session_id = smb2cli_session_current_id(tree->session->smbXcli);
+
+	/* Choose a random name in case the state is left a little funky. */
+	snprintf(fname, 256, "durable_v2_reconnect_delay_%s.dat",
+		 generate_random_str(tctx, 8));
+
+	smb2_util_unlink(tree, fname);
+
+	smb2_oplock_create_share(&io, fname,
+				 smb2_util_share_access(""),
+				 smb2_util_oplock_level("b"));
+	io.in.durable_open = false;
+	io.in.durable_open_v2 = true;
+	io.in.persistent_open = false;
+	io.in.create_guid = create_guid;
+	io.in.timeout = 0;
+
+	status = smb2_create(tree, mem_ctx, &io);
+	CHECK_STATUS(status, NT_STATUS_OK);
+
+	_h = io.out.file.handle;
+	h = &_h;
+	CHECK_VAL(io.out.oplock_level, smb2_util_oplock_level("b"));
+	CHECK_VAL(io.out.durable_open_v2, true);
+
+	status = smb2_util_write(tree, *h, &b, 0, 1);
+	CHECK_STATUS(status, NT_STATUS_OK);
+
+	/* disconnect, leaving the durable open */
+	TALLOC_FREE(tree);
+
+	if (!torture_smb2_connection_ext(tctx, previous_session_id,
+					 &options, &tree)) {
+		torture_warning(tctx, "couldn't reconnect, bailing\n");
+		ret = false;
+		goto done;
+	}
+
+	ZERO_STRUCT(io);
+	io.in.fname = fname;
+	io.in.durable_open_v2 = false;
+	io.in.durable_handle_v2 = h;
+	io.in.create_guid = create_guid;
+	h = NULL;
+
+	status = smb2_create(tree, mem_ctx, &io);
+	CHECK_STATUS(status, NT_STATUS_OK);
+	CHECK_VAL(io.out.oplock_level, smb2_util_oplock_level("b"));
+	_h = io.out.file.handle;
+	h = &_h;
+
+done:
+	if (h != NULL) {
+		smb2_util_close(tree, *h);
+	}
+
+	smb2_util_unlink(tree, fname);
+
+	talloc_free(tree);
+
+	talloc_free(mem_ctx);
+
+	return ret;
+}
+
+struct torture_suite *torture_smb2_durable_v2_delay_init(TALLOC_CTX *ctx)
+{
+	struct torture_suite *suite =
+	    torture_suite_create(ctx, "durable-v2-delay");
+
+	torture_suite_add_1smb2_test(suite, "durable_v2_reconnect_delay", test_durable_v2_reconnect_delay);
+
+	return suite;
+}
diff -Npur samba-4.8.5/source4/torture/smb2/smb2.c samba-4.8.6/source4/torture/smb2/smb2.c
--- samba-4.8.5/source4/torture/smb2/smb2.c	2018-01-17 09:08:39.000000000 +0100
+++ samba-4.8.6/source4/torture/smb2/smb2.c	2018-10-09 09:46:34.000000000 +0200
@@ -163,6 +163,8 @@ NTSTATUS torture_smb2_init(TALLOC_CTX *c
 		torture_smb2_durable_open_disconnect_init(suite));
 	torture_suite_add_suite(suite,
 		torture_smb2_durable_v2_open_init(suite));
+	torture_suite_add_suite(suite,
+		torture_smb2_durable_v2_delay_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_dir_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_lease_init(suite));
 	torture_suite_add_suite(suite, torture_smb2_compound_init(suite));
diff -Npur samba-4.8.5/source4/torture/vfs/fruit.c samba-4.8.6/source4/torture/vfs/fruit.c
--- samba-4.8.5/source4/torture/vfs/fruit.c	2018-08-24 09:58:20.000000000 +0200
+++ samba-4.8.6/source4/torture/vfs/fruit.c	2018-10-09 09:46:34.000000000 +0200
@@ -4768,6 +4768,51 @@ static bool test_setinfo_stream_eof(stru
 		tctx, status, NT_STATUS_OBJECT_NAME_NOT_FOUND, ret, done,
 		"Unexpected status\n");
 
+	torture_comment(
+		tctx, "Setting main file EOF to 1 to force 0-truncate\n");
+
+	status = torture_smb2_testfile_access(
+		tree,
+		fname,
+		&h1,
+		SEC_FILE_WRITE_DATA);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"torture_smb2_testfile failed\n");
+
+	ZERO_STRUCT(sfinfo);
+	sfinfo.generic.in.file.handle = h1;
+	sfinfo.generic.level = RAW_SFILEINFO_END_OF_FILE_INFORMATION;
+	sfinfo.position_information.in.position = 1;
+	status = smb2_setinfo_file(tree, &sfinfo);
+        torture_assert_ntstatus_ok_goto(
+		tctx,
+		status,
+		ret,
+		done,
+		"set eof 1 failed\n");
+
+	sfinfo.position_information.in.position = 0;
+	status = smb2_setinfo_file(tree, &sfinfo);
+        torture_assert_ntstatus_ok_goto(
+		tctx,
+		status,
+		ret,
+		done,
+		"set eof 0 failed\n");
+
+        smb2_util_close(tree, h1);
+
+	ZERO_STRUCT(create);
+	create.in.desired_access = SEC_FILE_READ_ATTRIBUTE;
+	create.in.share_access = NTCREATEX_SHARE_ACCESS_MASK;
+	create.in.file_attributes = FILE_ATTRIBUTE_NORMAL;
+	create.in.create_disposition = NTCREATEX_DISP_OPEN;
+	create.in.fname = fname;
+
+	status = smb2_create(tree, tctx, &create);
+	torture_assert_ntstatus_ok_goto(tctx, status, ret, done,
+					"torture_smb2_testfile failed\n");
+	smb2_util_close(tree, h1);
 done:
 	smb2_util_unlink(tree, fname);
 	smb2_util_rmdir(tree, BASEDIR);
diff -Npur samba-4.8.5/testprogs/blackbox/subunit.sh samba-4.8.6/testprogs/blackbox/subunit.sh
--- samba-4.8.5/testprogs/blackbox/subunit.sh	2018-01-14 21:41:59.000000000 +0100
+++ samba-4.8.6/testprogs/blackbox/subunit.sh	2018-10-09 09:46:34.000000000 +0200
@@ -90,6 +90,31 @@ testit () {
 	return $status
 }
 
+# This returns 0 if the command gave success and the grep value was found
+# all other cases return != 0
+testit_grep () {
+	name="$1"
+	shift
+	grep="$1"
+	shift
+	cmdline="$@"
+	subunit_start_test "$name"
+	output=`$cmdline 2>&1`
+	status=$?
+	if [ x$status != x0 ]; then
+		printf '%s' "$output" | subunit_fail_test "$name"
+		return $status
+	fi
+	printf '%s' "$output" | grep -q "$grep"
+	gstatus=$?
+	if [ x$gstatus = x0 ]; then
+		subunit_pass_test "$name"
+	else
+		printf 'GREP: "%s" not found in output:\n%s' "$grep" "$output" | subunit_fail_test "$name"
+	fi
+	return $status
+}
+
 testit_expect_failure () {
 	name="$1"
 	shift
@@ -104,6 +129,31 @@ testit_expect_failure () {
 	fi
 	return $status
 }
+
+# This returns 0 if the command gave a failure and the grep value was found
+# all other cases return != 0
+testit_expect_failure_grep () {
+	name="$1"
+	shift
+	grep="$1"
+	shift
+	cmdline="$@"
+	subunit_start_test "$name"
+	output=`$cmdline 2>&1`
+	status=$?
+	if [ x$status = x0 ]; then
+		printf '%s' "$output" | subunit_fail_test "$name"
+		return 1
+	fi
+	printf '%s' "$output" | grep -q "$grep"
+	gstatus=$?
+	if [ x$gstatus = x0 ]; then
+		subunit_pass_test "$name"
+	else
+		printf 'GREP: "%s" not found in output:\n%s' "$grep" "$output" | subunit_fail_test "$name"
+	fi
+	return $status
+}
 
 testok () {
 	name=`basename $1`
diff -Npur samba-4.8.5/testprogs/blackbox/test_trust_user_account.sh samba-4.8.6/testprogs/blackbox/test_trust_user_account.sh
--- samba-4.8.5/testprogs/blackbox/test_trust_user_account.sh	1970-01-01 01:00:00.000000000 +0100
+++ samba-4.8.6/testprogs/blackbox/test_trust_user_account.sh	2018-10-09 09:46:34.000000000 +0200
@@ -0,0 +1,58 @@
+#!/bin/sh
+
+if [ $# -lt 1 ]; then
+cat <<EOF
+Usage: test_trust_user_account.sh PREFIX OUR_REALM OUR_FLAT REMOTE_REALM REMOTE_FLAT
+EOF
+exit 1;
+fi
+
+PREFIX="$1"
+OUR_REALM="$2"
+OUR_FLAT="$3"
+REMOTE_REALM="$4"
+REMOTE_FLAT="$5"
+shift 5
+
+. `dirname $0`/subunit.sh
+
+
+samba_tool="$BINDIR/samba-tool"
+samba4bindir="$BINDIR"
+samba4srcdir="$SRCDIR/source4"
+samba4kinit="kinit -k"
+if test -x $BINDIR/samba4kinit; then
+	samba4kinit="$BINDIR/samba4kinit --use-keytab"
+fi
+
+KEYTAB="$PREFIX/tmptda.keytab"
+
+KRB5_TRACE=/dev/stderr
+export KRB5_TRACE
+
+testit "retrieve keytab for TDA of $REMOTE_REALM" $samba_tool domain exportkeytab $KEYTAB $CONFIGURATION --principal "$REMOTE_FLAT\$@$OUR_REALM" || failed=`expr $failed + 1`
+
+KRB5CCNAME="$PREFIX/tmptda.ccache"
+export KRB5CCNAME
+
+rm -f $KRB5CCNAME
+
+EXPECTED_SALT="${OUR_REALM}krbtgt${REMOTE_FLAT}"
+#
+# Note the \$ is for the end of line in grep
+#
+# There must be no trailing '$' in the SALT string itself,
+# it's removed from the sAMAccountName value (which includes the trailing '$')
+# before construting the salt!
+#
+# Otherwise this would be:
+# "^virtualKerberosSalt: ${EXPECTED_SALT}\\\$\$"
+#
+EXPECTED_GREP="^virtualKerberosSalt: ${EXPECTED_SALT}\$"
+testit_grep "get virtualKerberosSalt for TDA of $REMOTE_FLAT\$" "$EXPECTED_GREP" $samba_tool user getpassword "$REMOTE_FLAT\$" $CONFIGURATION --attributes=virtualKerberosSalt || failed=`expr $failed + 1`
+
+testit "kinit with keytab for TDA of $REMOTE_REALM" $samba4kinit -t $KEYTAB "$REMOTE_FLAT\$@$OUR_REALM" || failed=`expr $failed + 1`
+
+rm -f $KRB5CCNAME $KEYTAB
+
+exit $failed
