#
# Copyright (C) 2004-2010 Red Hat, Inc. All rights reserved.
#
# This file is part of LVM2.
#
# This copyrighted material is made available to anyone wishing to use,
# modify, copy, or redistribute it subject to the terms and conditions
# of the GNU General Public License v.2.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software Foundation,
# Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@

CONFSRC=example.conf
CONFDEST=lvm.conf

PROFILE_TEMPLATES=command_profile_template.profile metadata_profile_template.profile
PROFILES=$(PROFILE_TEMPLATES) $(srcdir)/thin-generic.profile $(srcdir)/thin-performance.profile

include $(top_builddir)/make.tmpl

install_conf: $(CONFSRC)
	@if [ ! -e $(confdir)/$(CONFDEST) ]; then \
		echo "$(INSTALL_WDATA) -D $< $(confdir)/$(CONFDEST)"; \
		$(INSTALL_WDATA) -D $< $(confdir)/$(CONFDEST); \
	fi

install_profiles: $(PROFILES)
	$(INSTALL_DIR) $(DESTDIR)$(DEFAULT_PROFILE_DIR)
	$(INSTALL_DATA) $(PROFILES) $(DESTDIR)$(DEFAULT_PROFILE_DIR)/

install_lvm2: install_conf install_profiles

install: install_lvm2

DISTCLEAN_TARGETS += $(CONFSRC) $(PROFILE_TEMPLATES)
