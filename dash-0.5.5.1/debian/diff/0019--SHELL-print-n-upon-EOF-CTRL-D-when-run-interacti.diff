From ed9f51eeb052146fc1c53b83b674b9aaa798313e Mon Sep 17 00:00:00 2001
From: Gerrit Pape <pape@smarden.org>
Date: Wed, 11 Feb 2009 01:38:49 +0000
Subject: [PATCH] [SHELL] print \n upon EOF (CTRL-D) when run interactively

Suggested by jidanni through
 http://bugs.debian.org/476422

Signed-off-by: Gerrit Pape <pape@smarden.org>
---
 src/main.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

diff --git a/src/main.c b/src/main.c
index 2bff956..843e678 100644
--- a/src/main.c
+++ b/src/main.c
@@ -228,8 +228,15 @@ cmdloop(int top)
 			if (!top || numeof >= 50)
 				break;
 			if (!stoppedjobs()) {
-				if (!Iflag)
+				if (!Iflag) {
+					if (iflag) {
+						out2c('\n');
+#ifdef FLUSHERR
+						flushout(out2);
+#endif
+					}
 					break;
+				}
 				out2str("\nUse \"exit\" to leave shell.\n");
 			}
 			numeof++;
-- 
1.6.0.3

