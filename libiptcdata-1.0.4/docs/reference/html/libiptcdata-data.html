<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>libiptcdata Reference Manual: IPTC Data</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="libiptcdata Reference Manual">
<link rel="up" href="ch01.html" title="IPTC Data Manipulation">
<link rel="prev" href="ch01.html" title="IPTC Data Manipulation">
<link rel="next" href="libiptcdata-dataset.html" title="Datasets">
<meta name="generator" content="GTK-Doc V1.21 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#libiptcdata-data.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="ch01.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="libiptcdata-dataset.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="libiptcdata-data"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libiptcdata-data.top_of_page"></a>IPTC Data</span></h2>
<p>IPTC Data — creating, loading, saving, and editing a collection of IPTC datasets</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="libiptcdata-data.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-new" title="iptc_data_new ()">iptc_data_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-new-mem" title="iptc_data_new_mem ()">iptc_data_new_mem</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-ref" title="iptc_data_ref ()">iptc_data_ref</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()">iptc_data_unref</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-free" title="iptc_data_free ()">iptc_data_free</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-new-from-jpeg" title="iptc_data_new_from_jpeg ()">iptc_data_new_from_jpeg</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-new-from-data" title="iptc_data_new_from_data ()">iptc_data_new_from_data</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-load" title="iptc_data_load ()">iptc_data_load</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-save" title="iptc_data_save ()">iptc_data_save</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-free-buf" title="iptc_data_free_buf ()">iptc_data_free_buf</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="returnvalue">IptcDataSet</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-get-dataset" title="iptc_data_get_dataset ()">iptc_data_get_dataset</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="returnvalue">IptcDataSet</span></a> *
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-get-next-dataset" title="iptc_data_get_next_dataset ()">iptc_data_get_next_dataset</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-add-dataset" title="iptc_data_add_dataset ()">iptc_data_add_dataset</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-add-dataset-before" title="iptc_data_add_dataset_before ()">iptc_data_add_dataset_before</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-add-dataset-after" title="iptc_data_add_dataset_after ()">iptc_data_add_dataset_after</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-remove-dataset" title="iptc_data_remove_dataset ()">iptc_data_remove_dataset</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<span class="c_punctuation">(</span><a class="link" href="libiptcdata-data.html#IptcDataForeachDataSetFunc" title="IptcDataForeachDataSetFunc ()">*IptcDataForeachDataSetFunc</a><span class="c_punctuation">)</span> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-foreach-dataset" title="iptc_data_foreach_dataset ()">iptc_data_foreach_dataset</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-sort" title="iptc_data_sort ()">iptc_data_sort</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libiptcdata-data.html#IptcEncoding" title="enum IptcEncoding"><span class="returnvalue">IptcEncoding</span></a>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-get-encoding" title="iptc_data_get_encoding ()">iptc_data_get_encoding</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-set-encoding-utf8" title="iptc_data_set_encoding_utf8 ()">iptc_data_set_encoding_utf8</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-set-version" title="iptc_data_set_version ()">iptc_data_set_version</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-add-dataset-with-value" title="iptc_data_add_dataset_with_value ()">iptc_data_add_dataset_with_value</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">int</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-add-dataset-with-contents" title="iptc_data_add_dataset_with_contents ()">iptc_data_add_dataset_with_contents</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-dump" title="iptc_data_dump ()">iptc_data_dump</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="libiptcdata-data.html#iptc-data-log" title="iptc_data_log ()">iptc_data_log</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libiptcdata-data.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData">IptcData</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libiptcdata-data.html#IptcEncoding" title="enum IptcEncoding">IptcEncoding</a></td>
</tr>
<tr>
<td class="define_keyword">#define</td>
<td class="function_name"><a class="link" href="libiptcdata-data.html#IPTC-IIM-VERSION:CAPS" title="IPTC_IIM_VERSION">IPTC_IIM_VERSION</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libiptcdata-data.description"></a><h2>Description</h2>
<p>
The <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object is the top-level container for a collection of IPTC metadata tags.
Each of these tags is stored in an <a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> object.
</p>
</div>
<div class="refsect1">
<a name="libiptcdata-data.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="iptc-data-new"></a><h3>iptc_data_new ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
iptc_data_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Allocates a new collection of datasets, which is initialized to be
empty.  The default memory allocation functions (malloc, etc.) are
used.  If you need custom memory management functions, use
<a class="link" href="libiptcdata-data.html#iptc-data-new-mem" title="iptc_data_new_mem ()"><code class="function">iptc_data_new_mem()</code></a> instead.  This allocation will set the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a>
refcount to 1, so use <a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> when finished with the pointer.</p>
<div class="refsect3">
<a name="id-1.7.2.6.2.5"></a><h4>Returns</h4>
<p> pointer to the new <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object, NULL on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-new-mem"></a><h3>iptc_data_new_mem ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
iptc_data_new_mem (<em class="parameter"><code><a class="link" href="libiptcdata-mem.html#IptcMem" title="IptcMem"><span class="type">IptcMem</span></a> *mem</code></em>);</pre>
<p>Allocates a new collection of datasets, which is initialized to be
empty, using custom memory management functions.  This allocation
will set the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> refcount to 1, so use <a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> when
finished with the object.</p>
<div class="refsect3">
<a name="id-1.7.2.6.3.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>mem</p></td>
<td class="parameter_description"><p>Pointer to an <a class="link" href="libiptcdata-mem.html#IptcMem" title="IptcMem"><span class="type">IptcMem</span></a> object that defines custom memory managment
functions.  The refcount of <em class="parameter"><code>mem</code></em>
will be incremented.  It is decremented
when the returned <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object is freed.</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.3.6"></a><h4>Returns</h4>
<p> pointer to the new <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object, NULL on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-ref"></a><h3>iptc_data_ref ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_ref (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Increments the reference count of an <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  This function
should be called whenever a copy of a pointer is made by the application.
<a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> can then be used when the pointer is no longer needed
to ensure that the object is freed once the object is completely unused.</p>
<div class="refsect3">
<a name="id-1.7.2.6.4.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the referenced pointer</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-unref"></a><h3>iptc_data_unref ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_unref (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Decrements the reference count of an <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  The object will
automatically be freed when the count reaches 0.  This function should
be called whenever a pointer is no longer needed by an application.  It
is also good practice to set the local copy of the pointer to NULL to
shield against accidently reusing the value.</p>
<div class="refsect3">
<a name="id-1.7.2.6.5.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the unreferenced pointer</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-free"></a><h3>iptc_data_free ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_free (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Frees an <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  This function should be used only for error
handling since <a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> provides a safer mechanism for freeing
that allows multiple components to have access to an object.  This
function decrements the reference count of any datasets contained by the
object.  This will generally cause them to be freed as well unless other
parts of the application are referencing them individually.</p>
<div class="refsect3">
<a name="id-1.7.2.6.6.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the object to free</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-new-from-jpeg"></a><h3>iptc_data_new_from_jpeg ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
iptc_data_new_from_jpeg (<em class="parameter"><code>const <span class="type">char</span> *path</code></em>);</pre>
<p>Allocates a new collection of datasets which is initialized by decoding
the IPTC data in JPEG file <em class="parameter"><code>path</code></em>
.  This allocation will set the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a>
refcount to 1, so use <a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> when finished with the object.
This is a convenience function that reads the contents of the file,
creates a new <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object, parses the file with
<a class="link" href="libiptcdata-jpeg.html#iptc-jpeg-read-ps3" title="iptc_jpeg_read_ps3 ()"><code class="function">iptc_jpeg_read_ps3()</code></a> and <a class="link" href="libiptcdata-jpeg.html#iptc-jpeg-ps3-find-iptc" title="iptc_jpeg_ps3_find_iptc ()"><code class="function">iptc_jpeg_ps3_find_iptc()</code></a>, and loads the
data with <a class="link" href="libiptcdata-data.html#iptc-data-load" title="iptc_data_load ()"><code class="function">iptc_data_load()</code></a>.  If more fine-grained error detection
is needed, those functions should be used individually.</p>
<div class="refsect3">
<a name="id-1.7.2.6.7.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>filesystem path of the jpeg file to be read</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.7.6"></a><h4>Returns</h4>
<p> pointer to the new <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  NULL on error (including
parsing errors or if the file did not include IPTC data).</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-new-from-data"></a><h3>iptc_data_new_from_data ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="returnvalue">IptcData</span></a> *
iptc_data_new_from_data (<em class="parameter"><code>const unsigned <span class="type">char</span> *buf</code></em>,
                         <em class="parameter"><code>unsigned <span class="type">int</span> size</code></em>);</pre>
<p>Allocates a new collection of datasets which is initialized by decoding
the contents of <em class="parameter"><code>buf</code></em>
.  This allocation will set the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a>
refcount to 1, so use <a class="link" href="libiptcdata-data.html#iptc-data-unref" title="iptc_data_unref ()"><code class="function">iptc_data_unref()</code></a> when finished with the object.
This is simply a convenience function that can be duplicated by calling
<a class="link" href="libiptcdata-data.html#iptc-data-new" title="iptc_data_new ()"><code class="function">iptc_data_new()</code></a> followed by <a class="link" href="libiptcdata-data.html#iptc-data-load" title="iptc_data_load ()"><code class="function">iptc_data_load()</code></a>.</p>
<div class="refsect3">
<a name="id-1.7.2.6.8.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>the buffer of IPTC data to be decoded</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>size</p></td>
<td class="parameter_description"><p>the length to be read in bytes</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.8.6"></a><h4>Returns</h4>
<p> pointer to the new <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  NULL on error (including
parsing errors in the contents of <em class="parameter"><code>buf</code></em>
).</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-load"></a><h3>iptc_data_load ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_load (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                <em class="parameter"><code>const unsigned <span class="type">char</span> *buf</code></em>,
                <em class="parameter"><code>unsigned <span class="type">int</span> size</code></em>);</pre>
<p>Parses a buffer containing raw IPTC data and adds the datasets
to the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object <em class="parameter"><code>data</code></em>
.</p>
<div class="refsect3">
<a name="id-1.7.2.6.9.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>object to be populated with the loaded datasets</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>data buffer to be parsed, containing IPTC data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>size</p></td>
<td class="parameter_description"><p>length of data buffer to be parsed</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.9.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on failure.  Note that in the failure
case, some datasets may still have been added to <em class="parameter"><code>data</code></em>
.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-save"></a><h3>iptc_data_save ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_save (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                <em class="parameter"><code>unsigned <span class="type">char</span> **buf</code></em>,
                <em class="parameter"><code>unsigned <span class="type">int</span> *size</code></em>);</pre>
<p>Outputs a collection of datasets as an IPTC bytestream.  No memory allocation
is required in advance.  <em class="parameter"><code>buf</code></em>
 should point to a NULL pointer that will be set
to the address of the output buffer by this function.  <em class="parameter"><code>size</code></em>
 will contain
this buffer's length after completion.  The object <em class="parameter"><code>data</code></em>
 is unmodified by this
function.  The application should free the output buffer using
<a class="link" href="libiptcdata-data.html#iptc-data-free-buf" title="iptc_data_free_buf ()"><code class="function">iptc_data_free_buf()</code></a> when it is no longer needed.</p>
<div class="refsect3">
<a name="id-1.7.2.6.10.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets to be saved</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>pointer to a pointer that will hold the address of the output buffer</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>size</p></td>
<td class="parameter_description"><p>pointer to an integer that will hold the length of the output buffer</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.10.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on failure.  In the failure case, <em class="parameter"><code>buf</code></em>
should still
be checked for a non-NULL value, and freed using <a class="link" href="libiptcdata-data.html#iptc-data-free-buf" title="iptc_data_free_buf ()"><code class="function">iptc_data_free_buf()</code></a> if
necessary.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-free-buf"></a><h3>iptc_data_free_buf ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_free_buf (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                    <em class="parameter"><code>unsigned <span class="type">char</span> *buf</code></em>);</pre>
<p>Frees a temporary buffer created from an <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object by the
<a class="link" href="libiptcdata-data.html#iptc-data-save" title="iptc_data_save ()"><code class="function">iptc_data_save()</code></a> function.</p>
<div class="refsect3">
<a name="id-1.7.2.6.11.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object that allocated the buffer</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>the buffer to free</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-get-dataset"></a><h3>iptc_data_get_dataset ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="returnvalue">IptcDataSet</span></a> *
iptc_data_get_dataset (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                       <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcRecord" title="enum IptcRecord"><span class="type">IptcRecord</span></a> record</code></em>,
                       <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcTag" title="enum IptcTag"><span class="type">IptcTag</span></a> tag</code></em>);</pre>
<p>Finds the first occurence of a dataset inside a collection with
the specified record and tag identifiers.</p>
<div class="refsect3">
<a name="id-1.7.2.6.12.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection to search</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>record</p></td>
<td class="parameter_description"><p>record identifier of dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p>tag identifier (dataset number) of dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.12.6"></a><h4>Returns</h4>
<p> pointer to dataset if found, NULL if no matching dataset found</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-get-next-dataset"></a><h3>iptc_data_get_next_dataset ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="returnvalue">IptcDataSet</span></a> *
iptc_data_get_next_dataset (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                            <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *ds</code></em>,
                            <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcRecord" title="enum IptcRecord"><span class="type">IptcRecord</span></a> record</code></em>,
                            <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcTag" title="enum IptcTag"><span class="type">IptcTag</span></a> tag</code></em>);</pre>
<p>Finds the next occurence of a dataset inside a collection with
the specified record and tag identifiers following <em class="parameter"><code>ds</code></em>
.  This is useful
when a collection contains more than one dataset with the same record
and tag identifier (for example, the keywords tag appears once for
each keyword in the IPTC metadata).  When <em class="parameter"><code>ds</code></em>
 is NULL, this function
is equivalent to <a class="link" href="libiptcdata-data.html#iptc-data-get-dataset" title="iptc_data_get_dataset ()"><code class="function">iptc_data_get_dataset()</code></a>.</p>
<div class="refsect3">
<a name="id-1.7.2.6.13.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection to search</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>ds</p></td>
<td class="parameter_description"><p>dataset where the search should originate (can be NULL)</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>record</p></td>
<td class="parameter_description"><p>record identifier of dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p>tag identifier (dataset number) of dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.13.6"></a><h4>Returns</h4>
<p> pointer to dataset if found, NULL if no matching dataset found</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-add-dataset"></a><h3>iptc_data_add_dataset ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_add_dataset (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                       <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *ds</code></em>);</pre>
<p>Adds an <a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> at the end of an existing collection.  A
dataset can only be a member of a single collection.  This
function will increment the reference count of <em class="parameter"><code>dataset</code></em>
, so if
the application no longer intends to use <em class="parameter"><code>dataset</code></em>
 directly, it
should call <a class="link" href="libiptcdata-dataset.html#iptc-dataset-unref" title="iptc_dataset_unref ()"><code class="function">iptc_dataset_unref()</code></a> immediately following this call.</p>
<div class="refsect3">
<a name="id-1.7.2.6.14.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the collection to which the dataset will be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>ds</p></td>
<td class="parameter_description"><p>dataset to add</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.14.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-add-dataset-before"></a><h3>iptc_data_add_dataset_before ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_add_dataset_before (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                              <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *ds</code></em>,
                              <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *newds</code></em>);</pre>
<p>Same as <a class="link" href="libiptcdata-data.html#iptc-data-add-dataset" title="iptc_data_add_dataset ()"><code class="function">iptc_data_add_dataset()</code></a>, except the <em class="parameter"><code>dataset</code></em>
 will be added
before an existing dataset <em class="parameter"><code>ds</code></em>
, so that if they are enumerated,
<em class="parameter"><code>newds</code></em>
 will appear before <em class="parameter"><code>ds</code></em>
 in the collection.  <em class="parameter"><code>ds</code></em>
 must be
a dataset already present in the collection.</p>
<div class="refsect3">
<a name="id-1.7.2.6.15.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the collection to which the dataset will be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>ds</p></td>
<td class="parameter_description"><p>existing dataset before which <em class="parameter"><code>newds</code></em>
will be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>newds</p></td>
<td class="parameter_description"><p>dataset to add</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.15.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-add-dataset-after"></a><h3>iptc_data_add_dataset_after ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_add_dataset_after (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                             <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *ds</code></em>,
                             <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *newds</code></em>);</pre>
<p>Same as <a class="link" href="libiptcdata-data.html#iptc-data-add-dataset" title="iptc_data_add_dataset ()"><code class="function">iptc_data_add_dataset()</code></a>, except the <em class="parameter"><code>dataset</code></em>
 will be added
after an existing dataset <em class="parameter"><code>ds</code></em>
, so that if they are enumerated,
<em class="parameter"><code>newds</code></em>
 will appear after <em class="parameter"><code>ds</code></em>
 in the collection.  <em class="parameter"><code>ds</code></em>
 must be a
dataset already present in the collection.</p>
<div class="refsect3">
<a name="id-1.7.2.6.16.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the collection to which the dataset will be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>ds</p></td>
<td class="parameter_description"><p>existing dataset after which <em class="parameter"><code>newds</code></em>
will be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>newds</p></td>
<td class="parameter_description"><p>dataset to add</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.16.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-remove-dataset"></a><h3>iptc_data_remove_dataset ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_remove_dataset (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                          <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *ds</code></em>);</pre>
<p>Removes a dataset from a collection.  This function also calls
<a class="link" href="libiptcdata-dataset.html#iptc-dataset-unref" title="iptc_dataset_unref ()"><code class="function">iptc_dataset_unref()</code></a> on <em class="parameter"><code>ds</code></em>
.</p>
<div class="refsect3">
<a name="id-1.7.2.6.17.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>the collection from which to remove an entry</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>ds</p></td>
<td class="parameter_description"><p>the dataset to remove from the collection</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.17.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on error</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="IptcDataForeachDataSetFunc"></a><h3>IptcDataForeachDataSetFunc ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
<span class="c_punctuation">(</span>*IptcDataForeachDataSetFunc<span class="c_punctuation">)</span> (<em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> *dataset</code></em>,
                               <em class="parameter"><code><span class="type">void</span> *user_data</code></em>);</pre>
<p>
Application callback executed for each dataset from
<a class="link" href="libiptcdata-data.html#iptc-data-foreach-dataset" title="iptc_data_foreach_dataset ()"><code class="function">iptc_data_foreach_dataset()</code></a>.
</p>
<div class="refsect3">
<a name="id-1.7.2.6.18.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>dataset</p></td>
<td class="parameter_description"><p>the dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>the same <em class="parameter"><code>user_data</code></em>
passed to <a class="link" href="libiptcdata-data.html#iptc-data-foreach-dataset" title="iptc_data_foreach_dataset ()"><code class="function">iptc_data_foreach_dataset()</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-foreach-dataset"></a><h3>iptc_data_foreach_dataset ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_foreach_dataset (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                           <em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcDataForeachDataSetFunc" title="IptcDataForeachDataSetFunc ()"><span class="type">IptcDataForeachDataSetFunc</span></a> func</code></em>,
                           <em class="parameter"><code><span class="type">void</span> *user_data</code></em>);</pre>
<p>Iterates through each dataset in the collection and calls the
callback function on that dataset.</p>
<div class="refsect3">
<a name="id-1.7.2.6.19.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection through which to iterate</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>func</p></td>
<td class="parameter_description"><p>callback function</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>arbitrary user data to be passed to the callback</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-sort"></a><h3>iptc_data_sort ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_sort (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Sorts a collection of datasets in ascending order first by record
number and second by tag number.  It can be useful to call this
function before saving IPTC data in order to maintain a more
organized file.</p>
<div class="refsect3">
<a name="id-1.7.2.6.20.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets to sort</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-get-encoding"></a><h3>iptc_data_get_encoding ()</h3>
<pre class="programlisting"><a class="link" href="libiptcdata-data.html#IptcEncoding" title="enum IptcEncoding"><span class="returnvalue">IptcEncoding</span></a>
iptc_data_get_encoding (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Identifies the character encoding of the collection of datasets as
specified by the "character set" dataset (1:90).  The specification
allows this dataset to contain control sequences from the ISO 2022
standard.  Unfortunately, this standard is very complicated and
generally not used by application writers.  Thus, rather than
attempt to decode any possible any possible control sequence, this
function only attempts to recognize the control sequence that identifies
the UTF-8 character set.  If found, this function will return
<a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UTF8:CAPS"><span class="type">IPTC_ENCODING_UTF8</span></a>.  All character-based datasets in record 2 and
higher are then expected to contain data encoded in the UTF-8
character set.  Otherwise, this function will return
<a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UNKNOWN:CAPS"><span class="type">IPTC_ENCODING_UNKNOWN</span></a>, meaning that any other character set
might be used, including ISO 2022 control sequences that have not
been decoded.  If dataset 1:90 is not present, this function returns
<a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UNSPECIFIED:CAPS"><span class="type">IPTC_ENCODING_UNSPECIFIED</span></a>, in which case character-based datasets
will usually be plain ASCII, although broken applications may have
used some other encoding.</p>
<div class="refsect3">
<a name="id-1.7.2.6.21.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.21.6"></a><h4>Returns</h4>
<p> <a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UTF8:CAPS"><span class="type">IPTC_ENCODING_UTF8</span></a>, <a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UNKNOWN:CAPS"><span class="type">IPTC_ENCODING_UNKNOWN</span></a>, or
<a class="link" href="libiptcdata-data.html#IPTC-ENCODING-UNSPECIFIED:CAPS"><span class="type">IPTC_ENCODING_UNSPECIFIED</span></a>.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-set-encoding-utf8"></a><h3>iptc_data_set_encoding_utf8 ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_set_encoding_utf8 (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>);</pre>
<p>Sets the contents of the "character set" dataset (1:90) to contain
the control sequence that indicates UTF-8 as the character encoding
for any character-based datasets in record 2 or higher.  If dataset
1:90 is not present, it will be added to the collection.  Any prior
value of dataset 1:90 will be overwritten by this function.
Note that some third-party applications (notably Picasa) will ignore
all your IPTC data if this option is set.</p>
<div class="refsect3">
<a name="id-1.7.2.6.22.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets for which to specify the encoding</p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.22.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on failure.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-set-version"></a><h3>iptc_data_set_version ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_set_version (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                       <em class="parameter"><code>unsigned <span class="type">int</span> version</code></em>);</pre>
<p>Specifies the version of the IIM specification used by this library by
setting the value of datasets 1:00 and 2:00.  It is recommended to set the
version number to <a class="link" href="libiptcdata-data.html#IPTC-IIM-VERSION:CAPS" title="IPTC_IIM_VERSION"><span class="type">IPTC_IIM_VERSION</span></a>, which specifies the version
implemented by this library (currently 4).  If datasets 1:00 or 2:00 are
not present, they will be added to the collection.  Any prior value of
the datasets will be overwritten by this function.  To ensure strict
compliance with the standard, this function should be called before
saving a collection of datasets.  However, in practice, some applications
(notably Picasa) will ignore all your IPTC data if this option is set.</p>
<div class="refsect3">
<a name="id-1.7.2.6.23.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets for which to specify the version</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>version</p></td>
<td class="parameter_description"><p>version number to write</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.23.6"></a><h4>Returns</h4>
<p> 0 on success, -1 on failure.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-add-dataset-with-value"></a><h3>iptc_data_add_dataset_with_value ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_add_dataset_with_value (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                                  <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcRecord" title="enum IptcRecord"><span class="type">IptcRecord</span></a> record</code></em>,
                                  <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcTag" title="enum IptcTag"><span class="type">IptcTag</span></a> tag</code></em>,
                                  <em class="parameter"><code>unsigned <span class="type">int</span> value</code></em>,
                                  <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcValidate" title="enum IptcValidate"><span class="type">IptcValidate</span></a> validate</code></em>);</pre>
<p>This is a convenience function that creates a new dataset with the given
record and tag, adds it to the specified collection of datasets, and
stores the given numeric value as the contents of the dataset.  It is
equivalent to calling this sequence of functions: <a class="link" href="libiptcdata-dataset.html#iptc-dataset-new" title="iptc_dataset_new ()"><code class="function">iptc_dataset_new()</code></a>,
<a class="link" href="libiptcdata-dataset.html#iptc-dataset-set-tag" title="iptc_dataset_set_tag ()"><code class="function">iptc_dataset_set_tag()</code></a>, <a class="link" href="libiptcdata-data.html#iptc-data-add-dataset" title="iptc_data_add_dataset ()"><code class="function">iptc_data_add_dataset()</code></a>,
and <a class="link" href="libiptcdata-dataset.html#iptc-dataset-set-value" title="iptc_dataset_set_value ()"><code class="function">iptc_dataset_set_value()</code></a>.</p>
<div class="refsect3">
<a name="id-1.7.2.6.24.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection to which the new dataset should be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>record</p></td>
<td class="parameter_description"><p>record number of the dataset to be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p>tag (dataset number) of the dataset to be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>value</p></td>
<td class="parameter_description"><p>value for the dataset</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>validate</p></td>
<td class="parameter_description"><p>whether or not the passed value should be validated against
the IPTC specification for this dataset's tag.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.24.6"></a><h4>Returns</h4>
<p> -1 on error, 0 if validation failed, the number of bytes copied
on success</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-add-dataset-with-contents"></a><h3>iptc_data_add_dataset_with_contents ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>
iptc_data_add_dataset_with_contents (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                                     <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcRecord" title="enum IptcRecord"><span class="type">IptcRecord</span></a> record</code></em>,
                                     <em class="parameter"><code><a class="link" href="libiptcdata-tag.html#IptcTag" title="enum IptcTag"><span class="type">IptcTag</span></a> tag</code></em>,
                                     <em class="parameter"><code>const unsigned <span class="type">char</span> *buf</code></em>,
                                     <em class="parameter"><code>unsigned <span class="type">int</span> size</code></em>,
                                     <em class="parameter"><code><a class="link" href="libiptcdata-dataset.html#IptcValidate" title="enum IptcValidate"><span class="type">IptcValidate</span></a> validate</code></em>);</pre>
<p>This is a convenience function that creates a new dataset with the given
record and tag, adds it to the specified collection of datasets, and
stores a copy of the given data buffer as the contents of the dataset.
It is equivalent to calling this sequence of functions: <a class="link" href="libiptcdata-dataset.html#iptc-dataset-new" title="iptc_dataset_new ()"><code class="function">iptc_dataset_new()</code></a>,
<a class="link" href="libiptcdata-dataset.html#iptc-dataset-set-tag" title="iptc_dataset_set_tag ()"><code class="function">iptc_dataset_set_tag()</code></a>, <a class="link" href="libiptcdata-data.html#iptc-data-add-dataset" title="iptc_data_add_dataset ()"><code class="function">iptc_data_add_dataset()</code></a>,
and <a class="link" href="libiptcdata-dataset.html#iptc-dataset-set-data" title="iptc_dataset_set_data ()"><code class="function">iptc_dataset_set_data()</code></a>.</p>
<div class="refsect3">
<a name="id-1.7.2.6.25.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection to which the new dataset should be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>record</p></td>
<td class="parameter_description"><p>record number of the dataset to be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p>tag (dataset number) of the dataset to be added</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buf</p></td>
<td class="parameter_description"><p>buffer containing the value</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>size</p></td>
<td class="parameter_description"><p>number of bytes to copy</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>validate</p></td>
<td class="parameter_description"><p>whether or not the passed value should be validated against
the IPTC specification for this dataset's tag.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.7.2.6.25.6"></a><h4>Returns</h4>
<p> -1 on error, 0 if validation failed, the number of bytes copied
on success</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-dump"></a><h3>iptc_data_dump ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_dump (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
                <em class="parameter"><code>unsigned <span class="type">int</span> indent</code></em>);</pre>
<p>A debugging aid that prints out the contents of a collection
of datasets to standard output.</p>
<div class="refsect3">
<a name="id-1.7.2.6.26.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection of datasets to print</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>indent</p></td>
<td class="parameter_description"><p>indentation level of the printout</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="iptc-data-log"></a><h3>iptc_data_log ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
iptc_data_log (<em class="parameter"><code><a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> *data</code></em>,
               <em class="parameter"><code><a class="link" href="libiptcdata-log.html#IptcLog" title="IptcLog"><span class="type">IptcLog</span></a> *log</code></em>);</pre>
<p>Changes the logging object for a <a class="link" href="libiptcdata-data.html#IptcData" title="struct IptcData"><span class="type">IptcData</span></a> object.  The logging
object determines how warning and error messages are relayed back
to the application.  This function also calls <a class="link" href="libiptcdata-log.html#iptc-log-ref" title="iptc_log_ref ()"><code class="function">iptc_log_ref()</code></a> on
the new log object and <a class="link" href="libiptcdata-log.html#iptc-log-unref" title="iptc_log_unref ()"><code class="function">iptc_log_unref()</code></a> on the previous log
object.</p>
<div class="refsect3">
<a name="id-1.7.2.6.27.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>collection for which the log object should be changed.</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>log</p></td>
<td class="parameter_description"><p>log object to use for the collection</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="libiptcdata-data.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="IptcData"></a><h3>struct IptcData</h3>
<pre class="programlisting">struct IptcData {
        IptcDataSet **datasets;
        unsigned int count;

	IptcDataPrivate *priv;
};
</pre>
<p>
Represents the collection of datasets that make up a IPTC data block.
</p>
<div class="refsect3">
<a name="id-1.7.2.7.2.5"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p><a class="link" href="libiptcdata-dataset.html#IptcDataSet" title="struct IptcDataSet"><span class="type">IptcDataSet</span></a> **<em class="structfield"><code><a name="IptcData.datasets"></a>datasets</code></em>;</p></td>
<td class="struct_member_description"><p>array of pointers to the datasets in the collection</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p>unsigned <span class="type">int</span> <em class="structfield"><code><a name="IptcData.count"></a>count</code></em>;</p></td>
<td class="struct_member_description"><p>the number of datasets in the collection</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><span class="type">IptcDataPrivate</span> *<em class="structfield"><code><a name="IptcData.priv"></a>priv</code></em>;</p></td>
<td class="struct_member_description"><p>private data</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="IptcEncoding"></a><h3>enum IptcEncoding</h3>
<p>
</p>
<div class="refsect3">
<a name="id-1.7.2.7.3.4"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="IPTC-ENCODING-UNKNOWN:CAPS"></a>IPTC_ENCODING_UNKNOWN</p></td>
<td class="enum_member_description"> </td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="IPTC-ENCODING-UNSPECIFIED:CAPS"></a>IPTC_ENCODING_UNSPECIFIED</p></td>
<td class="enum_member_description"> </td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="IPTC-ENCODING-UTF8:CAPS"></a>IPTC_ENCODING_UTF8</p></td>
<td class="enum_member_description"> </td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="IPTC-IIM-VERSION:CAPS"></a><h3>IPTC_IIM_VERSION</h3>
<pre class="programlisting">#define IPTC_IIM_VERSION 4
</pre>
<p>
The version of the IPTC IIM specification implemented by this library.
</p>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.21</div>
</body>
</html>