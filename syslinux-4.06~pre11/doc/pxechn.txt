= pxechn.c32 =
:doctype: manpage
:author: Gene Cumm
:email: gene.cumm@gmail.com
:revdate: 2012-05-27


== NAME ==
pxechn.c32 - Chainboot to new NBP


== SYNOPSIS ==
*pxechn.c32* [-h | --help | -?]
*pxechn.c32* -r 'FILE'
*pxechn.c32* 'FILE' ['OPTIONS']


== DESCRIPTION ==
Chainboot to a new NBP (Network Boot Program) 'FILE' with options to adjust PXE packet #3 (PXENV_PACKET_TYPE_CACHED_REPLY) to alter end behavior.  'FILE' may be a filename, an IP::FN ( 192.168.1.1::path/to/file.0 ), or URL.  'FILE' is parsed to adjust the DHCP 'sname' field/option 66 and 'file' field/option 67.
// but these may be override-able in the future.


== OPTIONS ==
*-c* 'CONFIG'::
    PXELINUX config file (DHCP Option 209).

// *-f* 'MOD'::
//     Force behavior specified by 'MOD'
//
// *-g* 'HOST'::
//     Set DHCP gateway/relay.  Parsed by pxe_dns().
//
*-h*, *--help*, *-?*::
    Print usage information; invalid options will also cause this.

// *-n*::
//     Use native methods, ignoring underlying gPXE/iPXE.
// 
// *-N*::
//     Use non-native methods to utilize gPXE/iPXE (if available).
//
*-o* 'OPT.TYPE=VALUE'::
    Specify a generic option.  'OPT' is in 'DECIMAL INPUT' format (below).  'TYPE' specifies the output type and input syntax.  'b'yte, 'w'ord(2B), 'l'ong(4B), 'q'uad(8B), character 's'tring and colon-separated he'x' string (case insensitive; bytes must have 2 digits and each byte must be separated).  byte, word, long and quad input values must meet criteria for 'DECIMAL INPUT'

*-p* 'PATH'::
    PXELINUX path (DHCP Option 210).

*-r*::
    Call the PXE stack with PXENV_RESTART_TFTP.  _Must_ be the only option and before 'FILE'.

*-t* 'SECONDS'::
    PXELINUX timeout (DHCP Option 211).

// *-u*::
//     Copy UUID (Option 97) if found in packet #1

*-w*::
    wait after loading before booting for user input.

*-W*::
    Enable WDS (Windows Deployment Services) - specific options.


== DECIMAL INPUT ==
All parameters that are defaulted to decimal format are processed by *strtoul*(3) with a base of 0 which allows alternate formats and finds a suitable non-space separating character.


== EXAMPLES ==
pxechn.c32 http://myhost.dom.loc/path/nbp.0 -c myconfig
	Load nbp.0 and set PXELINUX config (option 209).

pxechn.c32 gpxelinux.0 -p http://172.16.23.1/tftp/ -w -c myconfig -o 15.s=domain.loc -o 6.x=0A:01:01:02:ac:17:4D:Ec -
	Load gpxelinux.0 from the current directory, set prefix, wait to execute, set first config, set the domain name and 2 domain name servers (case mixed to show insensitivity; 10.1.1.2 and 172.23.77.236).

pxechn.c32 gpxelinux.0 -p http://172.16.23.1/tftp/ -w -X A012345678 -x 197:00d0de00
pxechn.c32 gpxelinux.0 -p http://172.16.23.1/tftp/ -w -X A012:3456:78 -x 197:00-d0-de-00
	Both of these are equivalent.  Load gpxelinux.0 (relative to the current directory and not altering sname/option 66), set the PXELINUX path prefix, wait after loading, set option 160 to 0x12 0x34 0x56 0x78, and option 197 to 0x00 0xD0 0xDE 0x00.


== NOTES ==
Please note that some NBPs may ignore packet #3 by either not examining it at all or by issuing its own DHCP DISCOVER/REQUEST, negating all DHCP field/option modifications by pxechn.c32.

URL specifications in 'FILE' that include user/password before the host will currently cause the siaddr field to not be set properly.

The non-space constraint is due to how Syslinux variants parse the command line as of 2012-01-12.


== AUTHOR ==
{author} <{email}>


== COPYRIGHT ==
Copyright \(C) 2012 {author}. Free use of this software is granted under
the terms of the GNU General Public License (GPL).
