.\" dpkg manual page - dpkg-parsechangelog(1)
.\"
.\" Copyright 息 1995-1996 Ian Jackson <ian@chiark.chu.cam.ac.uk>
.\" Copyright 息 2000 Wichert Akkerman <wakkerma@debian.org>
.\" Copyright 息 2006, 2012 Guillem Jover <guillem@debian.org>
.\" Copyright 息 2007-2008 Frank Lichtenheld <djpig@debian.org>
.\" Copyright 息 2009 Rapha谷l Hertzog <hertzog@debian.org>
.\"
.\" This is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <http://www.gnu.org/licenses/>.
.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-parsechangelog 1 2012\-05\-04 "Debian Project" "dpkg ユーティリティ"
.SH 名前
dpkg\-parsechangelog \- Debian changelog ファイルの解析
.
.SH 書式
\fBdpkg\-parsechangelog\fP [\fIoption\fP...]
.
.SH 説明
\fBdpkg\-parsechangelog\fP は、展開された Debian ソースツリーにある changelog
ファイルを読み取って解析し、その情報をコンピュータに適した形式で標準出力に出力する。
.
.SH オプション
.TP 
\fB\-l\fP\fIchangelog\-file\fP
情報の読み取り元となる changelog ファイルを指定する。デフォルトは \fBdebian/changelog\fP。
.TP 
\fB\-F\fP\fIchangelog\-format\fP
changelog ファイルの形式を指定する。デフォルトでは、changelog の末尾の近辺にある特別な行から読み取られるか、もしくは
\fIdebian\fP 標準形式が用いられる。\fBchangelog のフォーマット\fP も参照のこと。
.TP 
\fB\-L\fP\fIlibdir\fP
パーサスクリプトを検索するディレクトリを追加で指定する。このディレクトリはデフォルトのディレクトリの検索前に検索される。デフォルトのディレクトリは、現在
\fB/usr/local/lib/dpkg/parsechangelog\fP および \fB/usr/lib/dpkg/parsechangelog\fP
である。
.TP 
\fB\-?\fP, \fB\-\-help\fP
利用方法を表示して終了する。
.TP 
\fB\-\-version\fP
バージョン情報を表示して終了する。
.SS パーサ用オプション
以下のオプションは、解析対象の範囲や出力形式といった、changelog
パーサの出力を制御するために使われる。これらは、解析スクリプトによってサポートされる必要がある。\fB警告\fP も参照のこと。
.TP 
\fB\-\-format\fP\fI output\-format\fP
出力形式を指定する。現在サポートされている値は \fIdpkg\fP および \fIrfc822\fP である。\fIdpkg\fP は従来からの
(このオプションが存在する前からの) 出力形式であり、デフォルトである。これには Debian 制御情報形式 (\fBdeb\-control\fP(5)
を参照) に則った段落 1 つからなる。複数のエントリが指定された場合、他に指示がない限り、ほとんどのフィールドは最新のエントリに従って取得される:
.RS
.TP 
\fBSource:\fP\fI pkg\-name\fP
.TP 
\fBVersion:\fP\fI version\fP
.TP 
\fBDistribution:\fP\fI target\-distribution\fP
.TP 
\fBUrgency:\fP\fI urgency\fP
含まれているエントリの中で、最も高い urgency の値が用いられ、要求されたバージョンすべてのコメントを (スペースで区切って)
結合した文字列が続く。
.TP 
\fBMaintainer:\fP\fI author\fP
.TP 
\fBDate:\fP\fI date\fP
.TP 
\fBCloses:\fP\fI bug\-number\fP
Closes フィールドに含まれるすべてのエントリはマージされる。
.TP 
\fBChanges:\fP\fI changelog\-entries\fP
changelog のエントリにあるすべてのテキストは結合される。このフィールドを Debian
制御情報形式に従った形式とするために、複数行のフィールドにおける空行は、ピリオドに置き換えられ、すべての行の先頭に空白文字が 1 つ挿入される。内容は
changelog の形式に依存する。
.RE
.IP
\fBVersion\fP, \fBDistribution\fP, \fBUrgency\fP, \fBMaintainer\fP, \fBChanges\fP
フィールドは必須である。
.IP
この他、ユーザ定義のフィールドが存在してもよい。
.IP
\fBrfc822\fP 形式でも同じフィールドが用いられるが、出力については、changelog
のエントリ毎に別の段落に分割され、各エントリのメタデータが保持される。
.TP 
\fB\-\-since\fP \fIversion\fP, \fB\-s\fP\fIversion\fP,\fB \-v\fP\fIversion\fP
\fIversion\fP より後のすべての変更を含む。
.TP 
\fB\-\-until\fP \fIversion\fP, \fB\-u\fP\fIversion\fP
\fIversion\fP より前のすべての変更を含む。
.TP 
\fB\-\-from\fP \fIversion\fP, \fB\-f\fP\fIversion\fP
\fIversion\fP 以降のすべての変更を含む。
.TP 
\fB\-\-to\fP \fIversion\fP, \fB\-t\fP\fIversion\fP
\fIversion\fP 以前のすべての変更を含む。
.TP 
\fB\-\-count\fP \fInumber\fP, \fB\-c\fP\fInumber\fP, \fB\-n\fP\fInumber\fP
先頭から \fInumber\fP 分のエントリを含める (\fInumber\fP が 0 未満の場合は、最後から \fInumber\fP エントリの意味となる。
.TP 
\fB\-\-offset\fP \fInumber\fP, \fB\-o\fP\fInumber\fP
\-\-count の開始地点を先頭から \fInumber\fP エントリに変更する (\fInumber\fP が0 未満の場合は、最後から \fInumber\fP
エントリの意味となる)。
.TP 
\fB\-\-all\fP
すべての変更を含める。このオプションが設定された場合、他のオプションは無効となる。
.
.SH "changelog のフォーマット"
標準的なフォーマットとは異なるフォーマットに対応したパーサがあれば、非標準のフォーマットを用いることもできる。

\fBdpkg\-parsechangelog\fP に新しいパーサを使用させるには、changelog ファイルの末尾 40 行以内に、次のような Perl
の正規表現: \(lq\fB\eschangelog\-format:\es+([0\-9a\-z]+)\eW\fP\(rq
にマッチする行が含まれている必要がある。括弧内にフォーマットの名称を記載すること。以下に一例を示す:

       @@@ changelog\-format: \fIotherformat\fP @@@

changelog のフォーマット名は、英数字の文字列である必要がある。

こうした行があった場合、\fBdpkg\-parsechangelog\fP
は、\fB/usr/lib/dpkg/parsechangelog/\fP\fIotherformat\fP もしくは
\fB/usr/local/lib/dpkg/parsechangelog/\fP\fIotherformat\fP
という名称のパーサを検索する。これらが存在していなかったり、実行可能でなかったりする場合はエラーとなる。デフォルトの changelog
のフォーマットは \fBdebian\fP であり、対応するパーサはデフォルトで提供されている。

パーサは changelog ファイルの先頭を標準入力に設定された状態で起動され、ファイルを読み取って (必要に応じて検索して)
必要な情報を確定し、解析した情報を標準出力経由で、\fB\-\-format\fP オプションで指定されたフォーマットで返却する必要がある。パーサは、すべての
\fBパーサ用オプション\fP を受け付けること。

解析されている changelog
フォーマットにおいて、個々の変更点の記述の間の大半、もしくはすべてが空行となる場合、それらの空行は省略されるため、結果として出力がコンパクトになる。

changelog
フォーマットに日付やパッケージ名の情報が含まれていない場合、これらの情報は出力から省かれる。パーサは、これらを生成したり、別の情報源から探してきたりしてはならない。

changelog がパーサの期待するフォーマットになっていなかった場合、パーサは、実行を継続しておそらくは不正となるであろう出力を生成するよりは、0
以外の終了コードで終了すべきである。

changelog パーサは、ユーザと対話を行わなくともよい。
.
.SH 警告
\-v 以外の \fBパーサ用オプション\fP は \fBdpkg\fP 1.14.16 以降のバージョンでのみサポートされる。\fIdebian\fP 以外の
changelog 形式を解析するサードパーティのパーサは、すべてのオプションをサポートしないかもしれない。
.
.SH ファイル
.TP 
\fBdebian/changelog\fP
changelog ファイル、urgency やアップロードの
distribution、あるリリース以降に行われた変更点、ソースのバージョン番号自体といった、ソースパッケージに関するバージョン固有の情報を取得するために用いられる。
.SH 翻訳者
高橋 基信 <monyo@monyo.com>.
喜瀬 浩 <kise@fuyuneko.jp>.
関戸 幸一 <sekido@mbox.kyoto-inet.or.jp>.
鍋谷 栄展 <nabe@debian.or.jp>.
倉澤 望 <nabetaro@debian.or.jp>.
石川 睦 <ishikawa@linux.or.jp>.
鵜飼 文敏 <ukai@debian.or.jp>.
中野 武雄 <nakano@apm.seikei.ac.jp>.
.SH 翻訳校正
Debian JP Documentation ML <debian-doc@debian.or.jp>.
