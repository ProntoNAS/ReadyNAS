.\" dpkg manual page - dpkg-buildpackage(1)
.\"
.\" Copyright Â© 1995-1996 Ian Jackson
.\" Copyright Â© 2000 Wichert Akkerman <wakkerma@debian.org>
.\" Copyright Â© 2007-2008 Frank Lichtenheld <djpig@debian.org>
.\" Copyright Â© 2008-2011 Guillem Jover <guillem@debian.org>
.\" Copyright Â© 2008-2012 RaphaÃ«l Hertzog <hertzog@debian.org>
.\"
.\" This is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <http://www.gnu.org/licenses/>.
.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-buildpackage 1 2012\-05\-04 Debianprojektet dpkg\-verktygen
.SH NAMN
dpkg\-buildpackage \- bygg binär\- eller källkodspaket från källkod
.
.SH SYNOPS
\fBdpkg\-buildpackage\fP [\fIflagga\fP...]
.
.SH BESKRIVNING
\fBdpkg\-buildprogram\fP är ett program som automatiserar processen med att
bygga ett Debianpaket. Det består av följande steg:
.IP \fB1.\fP 3
Byggmiljön förbereds genom att diverse miljövariabler sätts (se \fBMILJÖ\fP)
och anropar \fBdpkg\-source \-\-before\-build\fP (såvida inte \fB_T\fP eller
\fB\-\-target\fP används).
.IP \fB2.\fP 3
Byggberoenden och \-konflikter kontrolleras att de uppfylls (såvida inte
\fB\-d\fP anges).
.IP \fB3.\fP 3
Om ett specifikt mål har valts med flaggan \fB\-T\fP eller \fB\-\-target\fP anropas
det målet, varpå programmet avslutas. I annat fall anropas \fBfakeroot
debian/rules clean\fP för att städa byggträdet (såvida inte \fB\-nc\fP anges).
.IP \fB4.\fP 3
\fBdpkg\-source \-b\fP anropas för att skapa källkodspaketet (såvida inte ett
bygge av enbart binärer har valts med \fB\-b\fP, \fB\-B\fP eller \fB\-A\fP).
.IP \fB5.\fP 3
\fBdebian/rules\fP \fIbyggmål\fP anropas, följt av \fBfakeroot debian/rules\fP
\fIbinärmål\fP (såvida inte ett bygge av enbart källkod har valts med
\fB\-S\fP). Observera att \fIbyggmål\fP och \fIbinärmål\fP är ett av \fBbuild\fP och
\fBbinary\fP (standardval, eller om \fB\-b\fP anges), \fBbuild\-arch\fP och
\fBbinary\-arch\fP (om \fB\-B\fP anges) eller \fBbuild\-indep\fP och \fBbinary\-indep\fP (om
\fB\-A\fP anges).
.IP \fB6.\fP 3
\fBgpg\fP anropas för att signera \fB.dsc\fP\-filen (om sådan finns, såvida inte
\fB\-us\fP anges).
.IP \fB7.\fP 3
\fBdpkg\-genchanges\fP anropas för att skapa en \fB.changes\fP\-fil. Många av
flaggorna till \fBdpkg\-buildpackage\fP vidaresänds till \fBdpkg\-genchanges\fP.
.IP \fB8.\fP 3
\fBgpg\fP anropas för att signera \fB.changes\fP\-filen (såvida inte \fB\-uc\fP anges).
.IP \fB9.\fP 3
Om \fB\-tc\fP anges anropas \fBfakeroot debian/rules clean\fP ytterligare en
gång. Till slut anropas \fBdpkg\-source \-\-after\-build\fP.
.
.SH FLAGGOR
.TP 
\fB\-b\fP
Anger att enbart binära paket skall byggas, inga källkodsfiler byggs
och/eller distribueras. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-B\fP
Anger att enbart binära paket skall byggas, begränsat till
arkitekturberoende paket. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-A\fP
Anger att enbart binära paket skall byggas, begränsat till
arkitekturoberoende paket. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-S\fP
Anger att enbart källkodspaket skall byggas, inga binärpaket behöver
byggas. Sänds vidare till \fBdpkg\-genchanges\fP.
.TP 
\fB\-F\fP
Anger att ett normalt komplett bygge, binär\- och källkodspaket, skall
byggas. Detta är detsamma som standardläget om inga byggflaggor anges.
.P
\fB\-\-target=\fP\fImål\fP
.br
\fB\-\-target \fP\fImål\fP
.br
\fB\-T\fP\fImål\fP
.RS
Anropar \fBdebian/rules\fP \fImål\fP efter att ha konfigurerat byggmiljön, och
avbryter byggprocessen efteråt. Om \fB\-\-as\-root\fP också anges körs kommandot
som root (se \fB\-r\fP). Observera att officiella mål som måste köras som root
inte behöver flaggan.
.RE
.TP 
\fB\-\-as\-root\fP
Endast meningsfull tillsammans med \fB\-\-target\fP. Kräver att målet körs med
root\-behörighet.
.P
\fB\-si\fP
.br
\fB\-sa\fP
.br
\fB\-sd\fP
.br
\fB\-v\fP\fIversion\fP
.br
\fB\-C\fP\fIändringsbeskrivning\fP
.br
\fB\-m\fP\fIpaketansvarige\-adress\fP
.br
\fB\-e\fP\fIpaketansvarige\-adress\fP
.RS
Sänds vidare utan ändringar till \fBdpkg\-genchanges\fP. Se dess manualsida.
.RE
.TP 
\fB\-a\fP\fIarkitektur\fP
Ange Debianarkitekturen vi bygger för. Arkitekturen för maskinen vi bygger
på bestäms automatiskt, och är även standard för värdmaskinen.
.TP 
\fB\-t\fP\fIgnu\-systemtyp\fP
Ange GNU\-systemtyp vi bygger för. Den kan användas i stället för \-a eller
som ett komplement för att överstyra standard\-GNU\-systemtypen för
Debian\-målarkitekturen.
.TP 
\fB\-j\fP\fIjobb\fP
Antalet jobb som tillåts att köras samtidigt, motsvarar \fBmake\fP(1)\-flaggan
med samma namn. Lägger till sig själv i miljövariabeln MAKEFLAGS, vilket får
alla påföljande make\-anrop att ärva flaggan. Lägger även till flaggan
\fBparallel=\fP\fIjobb\fP till miljövariabeln DEB_BUILD_OPTIONS, vilket gör det
möjligt för debian/rules\-filer att använda informationen för egna
ändamål. Värdet \fBparallel=\fP\fIjobb\fP i miljövariabeln DEB_BUILD_OPTIONS
kommer att överstyra värdet för \fB\-j\fP om den flaggan ges.
.TP 
\fB\-D\fP
Kontrollera  byggberoenden och \-konflikter; avbryt om de inte
uppfylls. Detta är standardbeteendet.
.TP 
\fB\-d\fP
Kontrollera inte byggberoenden eller \-konflikter.
.TP 
\fB\-nc\fP
Städa inte upp byggträdet (implicerar \fB\-b\fP om inget annat har valts bland
\fB\-B\fP, \fB\-A\fP eller \fB\-S\fP).
.TP 
\fB\-tc\fP
Städa källkodsträdet (använder \fIfå\-root\-kommando\fP \fBdebian/rules clean\fP)
efter att paketet har byggts.
.TP 
\fB\-r\fP\fIfå\-root\-kommando\fP
När \fBdpkg\-buildpackages\fP behöver exekvera delar av byggprocessen som root
sätter den kommandot som skall exekveras efter \fIfå\-root\-kommando\fP om ett
sådant har angivits. Om inte kommer \fBfakeroot\fP att användas som standard,
om kommandot existerar. \fIfå\-root\-kommando\fP måste börja med namnet på det
faktiska kommandot som skall anropas samt de parametrar det skall anropas
med. \fIfå\-root\-kommando\fP kan innehålla parametrar (de måste vara avdelade
med blanksteg) men inga skalmetatecken. \fIfå\-root\-kommando\fP kan typiskt vara
\fBfakeroot\fP, \fBsudo\fP, \fBsuper\fP eller \fBreally\fP. \fBsu\fP är inte lämpligt
eftersom det kräver flaggan \fB\-c\fP för att köra ett kommando och även då kan
det bara starta användarens skal med \fB\-c\fP istället för att sända flaggor
individuellt till kommandot som skall startas.
.TP 
\fB\-R\fP\fIregelfil\fP
För att bygga ett Debianpaket körs normalt kommandot \fBdebian/rules\fP med
flera olika standardparametrar. Den här flaggan gör det möjligt att använda
ett annat programanrop för att bygga paketet (det kan innehålla
blankstegsavdelade parametrar). Den kan även användas för att exekvera
standardregelfilen med ett annat make\-program (till exempel genom att
använda \fB/usr/local/bin/make \-f debian/rules\fP som \fIregelfil\fP).
.TP 
\fB\-p\fP\fIsigneringskommando\fP
När \fBdpkg\-buildpackage\fP måste exekvera GPG för att signera ett
källkodsstyrfil (\fB.dsc\fP) eller en \fB.changes\fP\-fil kör det
\fIsigneringskommando\fP (det letar i \fBPATH\fP om så behövs) istället för
\fBgpg\fP. \fIsigneringskommando\fP får de argument \fBgpg\fP skulle ha
fått. \fIsigneringskommando\fP får inte innehålla blanksteg eller andra
skalmetatecken.
.TP 
\fB\-k\fP\fInyckel\-id\fP
Ange nyckel\-id att använda vid signering av paket.
.TP 
\fB\-us\fP
Signera inte källkodspaketet.
.TP 
\fB\-uc\fP
Signera inte \fB.changes\fP\-filen.
.P
\fB\-i\fP[\fIreguljärt\-uttryck\fP]
.br
\fB\-I\fP\fI[mönster]\fP
.br
\fB\-s\fP[\fBnsAkurKUR\fP]
.br
\fB\-z\fP, \fB\-Z\fP
.br
.RS
Sänds vidare utan ändringar till \fBdpkg\-source\fP. Se dess manualsida.
.RE
.TP 
\fB\-\-source\-option=\fP\fIval\fP
Sänd flaggan \fIval\fP till \fBdpkg\-source\fP.
.TP 
\fB\-\-changes\-option=\fP\fIval\fP
Sänder flaggan \fIval\fP till \fBdpkg\-genchanges\fP.
.P
\fB\-\-admindir=\fP\fIkat\fP
.br
\fB\-\-admindir\fP \fIkat\fP
.RS
Ändra platsen för \fBdpkg\fP\-databasen. Förval är \fI/var/lib/dpkg\fP.
.RE
.TP 
\fB\-?\fP, \fB\-\-help\fP
Visar hjälpskärm och avslutar.
.TP 
\fB\-\-version\fP
Visar version och avslutar.
.
.SH MILJÖVARIABLER
Även om \fBdpkg\-buildpackage\fP exporterar några variabler bör inte
\fBdebian/rules\fP vara beroende av deras närvaro och bör istället använda
respektive gränssnitt för att hämta de värden som behövs.
.SS "Variabler som sätts av dpkg\-architecture"
\fBdpkg\-architecture\fP anropas med flaggorna \fB\-a\fP och \fB\-t\fP
vidaresända. Variabler som skrivs ut via dess \fB\-s\fP\-flagga integreras i
byggmiljön.
.SS "Kompileringsflaggor exporteras inte längre."
Mellan version 1.14.17 och 1.16.1 exporterade \fBdpkg\-buildpackage\fP
kompilatorflaggor (\fBCFLAGS\fP, \fBCXXFLAGS\fP, \fBCPPFLAGS\fP och \fBLDFLAGS\fP) med
värden enligt \fBdpkg\-buildflags\fP. Detta gäller inte längre.
.
.SH BAKÅTKOMPATIBILITET
\fBdpkg\-buildpackage\fP använder målen \fBbuild\-archi\fP och \fBbuild\-indep\fP från
version 1.16.2. Dessa mål krävs därmed, men för att undvika att existerande
paket går sönder, och för att förenkla övergången, kommer den falla tillbaka
till att använda målet \fBbuild\fP om \fBmake \-f debian/rules \-gn\fP \fIbyggmål\fP
returnerar statuskoden 2.
.SH PROGRAMFEL
Det borde vara möjligt att ange blanksteg och skalmetatecken i, och
inledande argument för, \fIfå\-root\-kommando\fP och \fIsigneringskommando\fP.
.
.SH "SE ÄVEN"
\fBdpkg\-source\fP(1), \fBdpkg\-architecture\fP(1), \fBdpkg\-buildflags\fP(1),
\fBdpkg\-genchanges\fP(1), \fBfakeroot\fP(1), \fBgpg\fP(1).
.SH "ÖVERSÄTTNING"
Peter Krefting och Daniel Nylander.
