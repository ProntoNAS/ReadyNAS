Index: Linux-PAM/defs/debian.defs
===================================================================
RCS file: /afs/sipb/project/debian/cvs/pam/Linux-PAM/defs/debian.defs,v
retrieving revision 1.3
diff -u -r1.3 debian.defs
--- Linux-PAM/defs/debian.defs	15 Sep 2002 20:17:56 -0000	1.3
+++ Linux-PAM/defs/debian.defs	15 Sep 2002 21:22:45 -0000
@@ -7,7 +7,7 @@
 # installed files on the system.
 ##
 
-CFLAGS	:= -O2 -I${shell pwd}/include # -D__NO_STRING_INLINES
+CFLAGS	:= -O2 -D_GNU_SOURCE -D_REENTRANT
 ifneq (,$(findstring $(DEB_BUILD_OPTIONS),debug DEBUG Debug))
   CFLAGS += -g
 endif
Index: Linux-PAM/libpam/include/security/pam_appl.h
===================================================================
RCS file: /afs/sipb/project/debian/cvs/pam/Linux-PAM/libpam/include/security/pam_appl.h,v
retrieving revision 1.3
diff -u -r1.3 pam_appl.h
--- Linux-PAM/libpam/include/security/pam_appl.h	15 Sep 2002 20:17:59 -0000	1.3
+++ Linux-PAM/libpam/include/security/pam_appl.h	15 Sep 2002 21:22:45 -0000
@@ -47,12 +47,12 @@
 
 extern int pam_chauthtok(pam_handle_t *pamh, int flags);
 
+/* take care of any compatibility issues */
+#include <security/_pam_compat.h>
+
 #ifdef __cplusplus
 }
 #endif
-
-/* take care of any compatibility issues */
-#include <security/_pam_compat.h>
 
 /*
  * Copyright Theodore Ts'o, 1996.  All rights reserved.
Index: Linux-PAM/libpam/include/security/pam_malloc.h
===================================================================
RCS file: /afs/sipb/project/debian/cvs/pam/Linux-PAM/libpam/include/security/pam_malloc.h,v
retrieving revision 1.3
diff -u -r1.3 pam_malloc.h
--- Linux-PAM/libpam/include/security/pam_malloc.h	15 Sep 2002 20:17:59 -0000	1.3
+++ Linux-PAM/libpam/include/security/pam_malloc.h	15 Sep 2002 21:22:45 -0000
@@ -13,6 +13,10 @@
 #ifndef PAM_MALLOC_H
 #define PAM_MALLOC_H
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 /* these are the macro definitions for the stdlib.h memory functions */
 
 #define malloc(s)      pam_malloc(s,__FILE__,__FUNCTION__,__LINE__)
@@ -67,5 +71,9 @@
 
 extern int pam_malloc_flags;
 extern int pam_malloc_delay_length;      /* how long to pause on errors */
+
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* PAM_MALLOC_H */
Index: Linux-PAM/libpam/include/security/pam_modules.h
===================================================================
RCS file: /afs/sipb/project/debian/cvs/pam/Linux-PAM/libpam/include/security/pam_modules.h,v
retrieving revision 1.3
diff -u -r1.3 pam_modules.h
--- Linux-PAM/libpam/include/security/pam_modules.h	15 Sep 2002 20:17:59 -0000	1.3
+++ Linux-PAM/libpam/include/security/pam_modules.h	15 Sep 2002 21:22:45 -0000
@@ -8,6 +8,10 @@
 #ifndef _SECURITY_PAM_MODULES_H
 #define _SECURITY_PAM_MODULES_H
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 #include <security/_pam_types.h>      /* Linux-PAM common defined types */
 
 /* these defines are used by pam_set_item() and pam_get_item() and are
@@ -129,6 +133,10 @@
 
 /* take care of any compatibility issues */
 #include <security/_pam_compat.h>
+
+#ifdef __cplusplus
+}
+#endif
 
 /* Copyright (C) Theodore Ts'o, 1996.
  * Copyright (C) Andrew Morgan, 1996-8.
Index: Linux-PAM/libpamc/include/security/pam_client.h
===================================================================
RCS file: /afs/sipb/project/debian/cvs/pam/Linux-PAM/libpamc/include/security/pam_client.h,v
retrieving revision 1.3
diff -u -r1.3 pam_client.h
--- Linux-PAM/libpamc/include/security/pam_client.h	15 Sep 2002 20:17:59 -0000	1.3
+++ Linux-PAM/libpamc/include/security/pam_client.h	15 Sep 2002 21:22:45 -0000
@@ -17,6 +17,10 @@
 #include <string.h>
 #include <stdio.h>
 
+#ifdef __cplusplus
+extern "C" {
+#endif
+
 /* opaque agent handling structure */
 
 typedef struct pamc_handle_s *pamc_handle_t;
@@ -161,6 +165,9 @@
     memcpy((data), (offset) + PAM_BP_RDATA(__prompt), (length));           \
 } while (0)
 
+#ifdef __cplusplus
+}
+#endif
 
 /* Control types */
 
