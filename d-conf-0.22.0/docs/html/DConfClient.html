<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>dconf Reference Manual: DConfClient</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="dconf Reference Manual">
<link rel="up" href="ch01.html" title="DConf Client API">
<link rel="prev" href="dconf-DConfChangeset.html" title="DConfChangeset">
<link rel="next" href="object-tree.html" title="Object Hierarchy">
<meta name="generator" content="GTK-Doc V1.21.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#DConfClient.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#DConfClient.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_signals">  <span class="dim">|</span> 
                  <a href="#DConfClient.signals" class="shortcut">Signals</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="dconf-DConfChangeset.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="object-tree.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="DConfClient"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="DConfClient.top_of_page"></a>DConfClient</span></h2>
<p>DConfClient — Direct read and write access to dconf, based on GDBus</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="DConfClient.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="DConfClient.html"><span class="returnvalue">DConfClient</span></a> *
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-new">dconf_client_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GVariant</span> *
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-read">dconf_client_read</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gchar</span> **
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-list">dconf_client_list</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-is-writable">dconf_client_is_writable</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-write-fast">dconf_client_write_fast</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-write-sync">dconf_client_write_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-change-fast">dconf_client_change_fast</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-change-sync">dconf_client_change_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-watch-fast">dconf_client_watch_fast</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-watch-sync">dconf_client_watch_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-unwatch-fast">dconf_client_unwatch_fast</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-unwatch-sync">dconf_client_unwatch_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a href="DConfClient.html#dconf-client-sync">dconf_client_sync</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="DConfClient.signals"></a><h2>Signals</h2>
<div class="informaltable"><table border="0">
<colgroup>
<col width="150px" class="signals_return">
<col width="300px" class="signals_name">
<col width="200px" class="signals_flags">
</colgroup>
<tbody><tr>
<td class="signal_type"><span class="returnvalue">void</span></td>
<td class="signal_name"><a href="DConfClient.html#DConfClient-changed">changed</a></td>
<td class="signal_flags">Run Last</td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1">
<a name="DConfClient.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody><tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a href="DConfClient.html#DConfClient-struct">DConfClient</a></td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1">
<a name="DConfClient.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> DConfClient
</pre>
</div>
<div class="refsect1">
<a name="DConfClient.description"></a><h2>Description</h2>
<p>This is the primary client interface to dconf.</p>
<p>It allows applications to directly read from and write to the dconf
database.  Applications can subscribe to change notifications.</p>
<p>Most applications probably don't want to access dconf directly and
would be better off using something like <span class="type">GSettings</span>.</p>
<p>Please note that the API of libdconf is not stable in any way.  It
has changed in incompatible ways in the past and there will be
further changes in the future.</p>
</div>
<div class="refsect1">
<a name="DConfClient.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="dconf-client-new"></a><h3>dconf_client_new ()</h3>
<pre class="programlisting"><a href="DConfClient.html"><span class="returnvalue">DConfClient</span></a> *
dconf_client_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Creates a new <a href="DConfClient.html"><span class="type">DConfClient</span></a>.</p>
<div class="refsect3">
<a name="id-1.3.5.8.2.5"></a><h4>Returns</h4>
<p> a new <a href="DConfClient.html"><span class="type">DConfClient</span></a></p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-read"></a><h3>dconf_client_read ()</h3>
<pre class="programlisting"><span class="returnvalue">GVariant</span> *
dconf_client_read (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                   <em class="parameter"><code>const <span class="type">gchar</span> *key</code></em>);</pre>
<p>Reads the current value of <em class="parameter"><code>key</code></em>
.</p>
<p>If <em class="parameter"><code>key</code></em>
 exists, its value is returned.  Otherwise, <code class="literal">NULL</code> is returned.</p>
<p>If there are outstanding "fast" changes in progress they may affect
the result of this call.</p>
<div class="refsect3">
<a name="id-1.3.5.8.3.7"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>the key to read the value of</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.3.8"></a><h4>Returns</h4>
<p> a <span class="type">GVariant</span>, or <code class="literal">NULL</code></p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-list"></a><h3>dconf_client_list ()</h3>
<pre class="programlisting"><span class="returnvalue">gchar</span> **
dconf_client_list (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                   <em class="parameter"><code>const <span class="type">gchar</span> *dir</code></em>,
                   <em class="parameter"><code><span class="type">gint</span> *length</code></em>);</pre>
<p>Gets the list of all dirs and keys immediately under <em class="parameter"><code>dir</code></em>
.</p>
<p>If <em class="parameter"><code>length</code></em>
 is non-<code class="literal">NULL</code> then it will be set to the length of the
returned array.  In any case, the array is <code class="literal">NULL</code>-terminated.</p>
<p>IF there are outstanding "fast" changes in progress then this call
may return inaccurate results with respect to those outstanding
changes.</p>
<div class="refsect3">
<a name="id-1.3.5.8.4.7"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>dir</p></td>
<td class="parameter_description"><p>the dir to list the contents of</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>length</p></td>
<td class="parameter_description"><p>the length of the returned list</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.4.8"></a><h4>Returns</h4>
<p> an array of strings, never <code class="literal">NULL</code>.</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-is-writable"></a><h3>dconf_client_is_writable ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
dconf_client_is_writable (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                          <em class="parameter"><code>const <span class="type">gchar</span> *key</code></em>);</pre>
<p>Checks if <em class="parameter"><code>key</code></em>
 is writable (ie: the key has no locks).</p>
<p>This call does not verify that writing to the key will actually be
successful.  It only checks that the database is writable and that
there are no locks affecting <em class="parameter"><code>key</code></em>
.  Other issues (such as a full disk
or an inability to connect to the bus and start the service) may
cause the write to fail.</p>
<div class="refsect3">
<a name="id-1.3.5.8.5.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>the key to check for writability</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.5.7"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> is <em class="parameter"><code>key</code></em>
is writable</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-write-fast"></a><h3>dconf_client_write_fast ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
dconf_client_write_fast (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                         <em class="parameter"><code>const <span class="type">gchar</span> *key</code></em>,
                         <em class="parameter"><code><span class="type">GVariant</span> *value</code></em>,
                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Writes <em class="parameter"><code>value</code></em>
 to the given <em class="parameter"><code>key</code></em>
, or reset <em class="parameter"><code>key</code></em>
 to its default value.</p>
<p>If <em class="parameter"><code>value</code></em>
 is <code class="literal">NULL</code> then <em class="parameter"><code>key</code></em>
 is reset to its default value (which may
be completely unset), otherwise <em class="parameter"><code>value</code></em>
 becomes the new value.</p>
<p>This call merely queues up the write and returns immediately, without
blocking.  The only errors that can be detected or reported at this
point are attempts to write to read-only keys.  If the application
exits immediately after this function returns then the queued call
may never be sent; see <a href="DConfClient.html#dconf-client-sync"><code class="function">dconf_client_sync()</code></a>.</p>
<p>A local copy of the written value is kept so that calls to
<a href="DConfClient.html#dconf-client-read"><code class="function">dconf_client_read()</code></a> that occur before the service actually makes the
change will return the new value.</p>
<p>If the write is queued then a change signal will be directly emitted.
If this function is being called from the main context of <em class="parameter"><code>client</code></em>

then the signal is emitted before this function returns; otherwise it
is scheduled on the main context.</p>
<div class="refsect3">
<a name="id-1.3.5.8.6.9"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>the key to write to</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>value</p></td>
<td class="parameter_description"><p>a <span class="type">GVariant</span>, the value to write</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a pointer to a <code class="literal">NULL</code> <span class="type">GError</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.6.10"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the write was queued</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-write-sync"></a><h3>dconf_client_write_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
dconf_client_write_sync (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                         <em class="parameter"><code>const <span class="type">gchar</span> *key</code></em>,
                         <em class="parameter"><code><span class="type">GVariant</span> *value</code></em>,
                         <em class="parameter"><code><span class="type">gchar</span> **tag</code></em>,
                         <em class="parameter"><code><span class="type">GCancellable</span> *cancellable</code></em>,
                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Write <em class="parameter"><code>value</code></em>
 to the given <em class="parameter"><code>key</code></em>
, or reset <em class="parameter"><code>key</code></em>
 to its default value.</p>
<p>If <em class="parameter"><code>value</code></em>
 is <code class="literal">NULL</code> then <em class="parameter"><code>key</code></em>
 is reset to its default value (which may
be completely unset), otherwise <em class="parameter"><code>value</code></em>
 becomes the new value.</p>
<p>This call blocks until the write is complete.  This call will
therefore detect and report all cases of failure.  If the modified
key is currently being watched then a signal will be emitted from the
main context of <em class="parameter"><code>client</code></em>
 (once the signal arrives from the service).</p>
<p>If <em class="parameter"><code>tag</code></em>
 is non-<code class="literal">NULL</code> then it is set to the unique tag associated with
this write.  This is the same tag that will appear in the following
change signal.</p>
<div class="refsect3">
<a name="id-1.3.5.8.7.8"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>key</p></td>
<td class="parameter_description"><p>the key to write to</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>value</p></td>
<td class="parameter_description"><p>a <span class="type">GVariant</span>, the value to write</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p> the tag from this write. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p>a <span class="type">GCancellable</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a pointer to a <code class="literal">NULL</code> <span class="type">GError</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.7.9"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> on success, else <code class="literal">FALSE</code> with <em class="parameter"><code>error</code></em>
set</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-change-fast"></a><h3>dconf_client_change_fast ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
dconf_client_change_fast (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                          <em class="parameter"><code><a href="dconf-DConfChangeset.html#DConfChangeset"><span class="type">DConfChangeset</span></a> *changeset</code></em>,
                          <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Performs the change operation described by <em class="parameter"><code>changeset</code></em>
.</p>
<p>Once <em class="parameter"><code>changeset</code></em>
 is passed to this call it can no longer be modified.</p>
<p>This call merely queues up the write and returns immediately, without
blocking.  The only errors that can be detected or reported at this
point are attempts to write to read-only keys.  If the application
exits immediately after this function returns then the queued call
may never be sent; see <a href="DConfClient.html#dconf-client-sync"><code class="function">dconf_client_sync()</code></a>.</p>
<p>A local copy of the written value is kept so that calls to
<a href="DConfClient.html#dconf-client-read"><code class="function">dconf_client_read()</code></a> that occur before the service actually makes the
change will return the new value.</p>
<p>If the write is queued then a change signal will be directly emitted.
If this function is being called from the main context of <em class="parameter"><code>client</code></em>

then the signal is emitted before this function returns; otherwise it
is scheduled on the main context.</p>
<div class="refsect3">
<a name="id-1.3.5.8.8.9"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>changeset</p></td>
<td class="parameter_description"><p>the changeset describing the requested change</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a pointer to a <code class="literal">NULL</code> <span class="type">GError</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.8.10"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the requested changed was queued</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-change-sync"></a><h3>dconf_client_change_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
dconf_client_change_sync (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                          <em class="parameter"><code><a href="dconf-DConfChangeset.html#DConfChangeset"><span class="type">DConfChangeset</span></a> *changeset</code></em>,
                          <em class="parameter"><code><span class="type">gchar</span> **tag</code></em>,
                          <em class="parameter"><code><span class="type">GCancellable</span> *cancellable</code></em>,
                          <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Performs the change operation described by <em class="parameter"><code>changeset</code></em>
.</p>
<p>Once <em class="parameter"><code>changeset</code></em>
 is passed to this call it can no longer be modified.</p>
<p>This call blocks until the change is complete.  This call will
therefore detect and report all cases of failure.  If any of the
modified keys are currently being watched then a signal will be
emitted from the main context of <em class="parameter"><code>client</code></em>
 (once the signal arrives
from the service).</p>
<p>If <em class="parameter"><code>tag</code></em>
 is non-<code class="literal">NULL</code> then it is set to the unique tag associated with
this change.  This is the same tag that will appear in the following
change signal.  If <em class="parameter"><code>changeset</code></em>
 makes no changes then <em class="parameter"><code>tag</code></em>
 may be
non-unique (eg: the empty string may be used for empty changesets).</p>
<div class="refsect3">
<a name="id-1.3.5.8.9.8"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>changeset</p></td>
<td class="parameter_description"><p>the changeset describing the requested change</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p> the tag from this write. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p>a <span class="type">GCancellable</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a pointer to a <code class="literal">NULL</code> <span class="type">GError</span>, or <code class="literal">NULL</code></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.5.8.9.9"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> on success, else <code class="literal">FALSE</code> with <em class="parameter"><code>error</code></em>
set</p>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-watch-fast"></a><h3>dconf_client_watch_fast ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
dconf_client_watch_fast (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                         <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<p>Requests change notifications for <em class="parameter"><code>path</code></em>
.</p>
<p>If <em class="parameter"><code>path</code></em>
 is a key then the single key is monitored.  If <em class="parameter"><code>path</code></em>
 is a
dir then all keys under the dir are monitored.</p>
<p>This function queues the watch request with D-Bus and returns
immediately.  There is a very slim chance that the dconf database
could change before the watch is actually established.  If that is
the case then a synthetic change signal will be emitted.</p>
<p>Errors are silently ignored.</p>
<div class="refsect3">
<a name="id-1.3.5.8.10.8"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>a path to watch</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-watch-sync"></a><h3>dconf_client_watch_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
dconf_client_watch_sync (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                         <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<p>Requests change notifications for <em class="parameter"><code>path</code></em>
.</p>
<p>If <em class="parameter"><code>path</code></em>
 is a key then the single key is monitored.  If <em class="parameter"><code>path</code></em>
 is a
dir then all keys under the dir are monitored.</p>
<p>This function submits each of the various watch requests that are
required to monitor a key and waits until each of them returns.  By
the time this function returns, the watch has been established.</p>
<p>Errors are silently ignored.</p>
<div class="refsect3">
<a name="id-1.3.5.8.11.8"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>a path to watch</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-unwatch-fast"></a><h3>dconf_client_unwatch_fast ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
dconf_client_unwatch_fast (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                           <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<p>Cancels the effect of a previous call to <a href="DConfClient.html#dconf-client-watch-fast"><code class="function">dconf_client_watch_fast()</code></a>.</p>
<p>This call returns immediately.</p>
<p>It is still possible that change signals are received after this call
had returned (watching guarantees notification of changes, but
unwatching does not guarantee no notifications).</p>
<div class="refsect3">
<a name="id-1.3.5.8.12.7"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>a path previously watched</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-unwatch-sync"></a><h3>dconf_client_unwatch_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
dconf_client_unwatch_sync (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>,
                           <em class="parameter"><code>const <span class="type">gchar</span> *path</code></em>);</pre>
<p>Cancels the effect of a previous call to <a href="DConfClient.html#dconf-client-watch-sync"><code class="function">dconf_client_watch_sync()</code></a>.</p>
<p>This function submits each of the various unwatch requests and waits
until each of them returns.  It is still possible that change signals
are received after this call has returned (watching guarantees
notification of changes, but unwatching does not guarantee no
notifications).</p>
<div class="refsect3">
<a name="id-1.3.5.8.13.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>path</p></td>
<td class="parameter_description"><p>a path previously watched</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="dconf-client-sync"></a><h3>dconf_client_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
dconf_client_sync (<em class="parameter"><code><a href="DConfClient.html"><span class="type">DConfClient</span></a> *client</code></em>);</pre>
<p>Blocks until all outstanding "fast" change or write operations have
been submitted to the service.</p>
<p>Applications should generally call this before exiting on any
<a href="DConfClient.html"><span class="type">DConfClient</span></a> that they wrote to.</p>
<div class="refsect3">
<a name="id-1.3.5.8.14.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>a <a href="DConfClient.html"><span class="type">DConfClient</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="DConfClient.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="DConfClient-struct"></a><h3>DConfClient</h3>
<pre class="programlisting">typedef struct _DConfClient DConfClient;</pre>
<p>The main object for interacting with dconf.  This is a <span class="type">GObject</span>, so
you should manage it with <code class="function">g_object_ref()</code> and <code class="function">g_object_unref()</code>.</p>
</div>
</div>
<div class="refsect1">
<a name="DConfClient.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="DConfClient-changed"></a><h3>The <code class="literal">“changed”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="DConfClient.html"><span class="type">DConfClient</span></a> *client,
               <span class="type">gchar</span>       *prefix,
               <span class="type">GStrv</span>        changes,
               <span class="type">gchar</span>       *tag,
               <span class="type">gpointer</span>     user_data)</pre>
<p>This signal is emitted when the <a href="DConfClient.html"><span class="type">DConfClient</span></a> has a possible change
to report.  The signal is an indication that a change may have
occurred; it's possible that the keys will still have the same value
as before.</p>
<p>To ensure that you receive notification about changes to paths that
you are interested in you must call <a href="DConfClient.html#dconf-client-watch-fast"><code class="function">dconf_client_watch_fast()</code></a> or
<a href="DConfClient.html#dconf-client-watch-sync"><code class="function">dconf_client_watch_sync()</code></a>.  You may still receive notifications for
paths that you did not explicitly watch.</p>
<p><em class="parameter"><code>prefix</code></em>
 will be an absolute dconf path; see <a href="dconf-dconf-Paths.html#dconf-is-path"><code class="function">dconf_is_path()</code></a>.
<em class="parameter"><code>changes</code></em>
 is a <code class="literal">NULL</code>-terminated array of dconf rel paths; see
<a href="dconf-dconf-Paths.html#dconf-is-rel-path"><code class="function">dconf_is_rel_path()</code></a>.</p>
<p><em class="parameter"><code>tag</code></em>
 is an opaque tag string, or <code class="literal">NULL</code>.  The only thing you should
do with <em class="parameter"><code>tag</code></em>
 is to compare it to tag values returned by
<a href="DConfClient.html#dconf-client-write-sync"><code class="function">dconf_client_write_sync()</code></a> or <a href="DConfClient.html#dconf-client-change-sync"><code class="function">dconf_client_change_sync()</code></a>.</p>
<p>The number of changes being reported is equal to the length of
<em class="parameter"><code>changes</code></em>
.  Appending each item in <em class="parameter"><code>changes</code></em>
 to <em class="parameter"><code>prefix</code></em>
 will give the
absolute path of each changed item.</p>
<p>If a single key has changed then <em class="parameter"><code>prefix</code></em>
 will be equal to the key
and <em class="parameter"><code>changes</code></em>
 will contain a single item: the empty string.</p>
<p>If a single dir has changed (indicating that any key under the dir
may have changed) then <em class="parameter"><code>prefix</code></em>
 will be equal to the dir and
<em class="parameter"><code>changes</code></em>
 will contain a single empty string.</p>
<p>If more than one change is being reported then <em class="parameter"><code>changes</code></em>
 will have
more than one item.</p>
<div class="refsect3">
<a name="id-1.3.5.10.2.12"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>the <a href="DConfClient.html"><span class="type">DConfClient</span></a> reporting the change</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>prefix</p></td>
<td class="parameter_description"><p>the prefix under which the changes happened</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>changes</p></td>
<td class="parameter_description"><p>the list of paths that were changed, relative to <em class="parameter"><code>prefix</code></em>
</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tag</p></td>
<td class="parameter_description"><p>the tag for the change, if it originated from the service</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.21.1</div>
</body>
</html>