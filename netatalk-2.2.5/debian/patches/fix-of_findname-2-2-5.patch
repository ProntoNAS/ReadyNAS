--- a/etc/afpd/filedir.c-	2013-08-05 16:11:19.234010000 -0700
+++ b/etc/afpd/filedir.c	2013-08-05 18:19:18.149602512 -0700
@@ -372,7 +372,7 @@ static int moveandrename(const struct vo
 #ifdef HAVE_ATFUNCS
         opened = of_findnameat(sdir_fd, &path);
 #else
-        opened = of_findname(&path);
+        opened = of_findname(vol, &path);
 #endif /* HAVE_ATFUNCS */
 
         if (opened) {
