<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>libmediaart Library Reference Manual: Extraction</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="libmediaart Library Reference Manual">
<link rel="up" href="ch02.html" title="Reference">
<link rel="prev" href="ch02.html" title="Reference">
<link rel="next" href="libmediaart-Cache.html" title="Cache">
<meta name="generator" content="GTK-Doc V1.21.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#libmediaart-MediaArtProcess.description" class="shortcut">Description</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch02.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="ch02.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="libmediaart-Cache.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="libmediaart-MediaArtProcess"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libmediaart-MediaArtProcess.top_of_page"></a>Extraction</span></h2>
<p>Extraction — Extraction of music and movie art.</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.functions"></a><h2>Functions</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="functions_return">
<col class="functions_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Quarks.html#GQuark"><span class="returnvalue">GQuark</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-error-quark" title="media_art_error_quark ()">media_art_error_quark</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#GType"><span class="returnvalue">GType</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-get-type" title="media_art_process_get_type ()">media_art_process_get_type</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="returnvalue">MediaArtProcess</span></a> *
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-new" title="media_art_process_new ()">media_art_process_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-uri" title="media_art_process_uri ()">media_art_process_uri</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()">media_art_process_file</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
</td>
<td class="function_name">
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()">media_art_process_buffer</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="name">
<col class="description">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType">MediaArtType</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtError" title="enum MediaArtError">MediaArtError</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags">MediaArtProcessFlags</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess">MediaArtProcess</a></td>
</tr>
<tr>
<td class="datatype_keyword">struct</td>
<td class="function_name"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessClass" title="struct MediaArtProcessClass">MediaArtProcessClass</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libmediaart/mediaart.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.description"></a><h2>Description</h2>
<p>The libmediaart library supports taking image data that you have extracted
from a media file and saving it into the media art cache, so that future
applications can display the media art without having to extract the image
again. This is done using the <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> or
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions.</p>
<p>Extracting new media art from a file needs to be done by your application.
Usually, when an application loads a media file any embedded images will be
made available as a side effect. For example, if you are using GStreamer any
images will be returned through the <span class="type">GstTagList</span> interface as <code class="literal">GST_TAG_IMAGE</code>
tags.</p>
<p>The media art cache requires that all images are saved as 'application/jpeg'
files. Embedded images can be in several formats, and
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> and <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions will
convert the supplied image data into the correct format if
necessary. There are multiple backends that can be used for this,
and you can choose which is used at build time using the library's
'configure' script.</p>
<p>If there is no embedded media art in a file,
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a> and <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a> functions will
look in the directory that contains the media file for likely media
art using a simple heuristic.</p>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="media-art-error-quark"></a><h3>media_art_error_quark ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Quarks.html#GQuark"><span class="returnvalue">GQuark</span></a>
media_art_error_quark (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<div class="refsect3">
<a name="id-1.3.3.2.7.2.4"></a><h4>Returns</h4>
<p> the <a href="http://library.gnome.org/devel/glib/unstable/glib-Quarks.html#GQuark"><span class="type">GQuark</span></a> used to identify media art errors in
GError structures.</p>
<p></p>
</div>
<p class="since">Since 0.2.0</p>
</div>
<hr>
<div class="refsect2">
<a name="media-art-process-get-type"></a><h3>media_art_process_get_type ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/gobject/unstable/gobject-Type-Information.html#GType"><span class="returnvalue">GType</span></a>
media_art_process_get_type (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.3.5"></a><h4>Returns</h4>
<p></p>
</div>
</div>
<hr>
<div class="refsect2">
<a name="media-art-process-new"></a><h3>media_art_process_new ()</h3>
<pre class="programlisting"><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="returnvalue">MediaArtProcess</span></a> *
media_art_process_new (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Initialize a GObject for processing and extracting media art.</p>
<p>This function initializes cache hash tables, backend plugins,
storage modules used for removable devices and a connection to D-Bus.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.4.6"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Pointer to potential GLib / MediaArt error, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.4.7"></a><h4>Returns</h4>
<p> A new <a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> object on success or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> if
<em class="parameter"><code>error</code></em>
is set. This object must be freed using <a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-unref"><code class="function">g_object_unref()</code></a>.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
<hr>
<div class="refsect2">
<a name="media-art-process-uri"></a><h3>media_art_process_uri ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_uri (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                       <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                       <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                       <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *uri</code></em>,
                       <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                       <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                       <em class="parameter"><code><a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                       <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>This function calls <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a>, but takes the <em class="parameter"><code>uri</code></em>
 as
a string rather than a <a href="http://library.gnome.org/devel/gio/unstable/GFile.html"><span class="type">GFile</span></a> object. Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be
<a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.5.5"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media that contained the image data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>How the media art is processed</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>uri</p></td>
<td class="parameter_description"><p>URI of the media file that contained the data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>uri</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>uri</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>Pointer to potential GLib / MediaArt error, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.5.6"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>uri</code></em>
could be processed or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
<hr>
<div class="refsect2">
<a name="media-art-process-file"></a><h3>media_art_process_file ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_file (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                        <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                        <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                        <em class="parameter"><code><a href="http://library.gnome.org/devel/gio/unstable/GFile.html"><span class="type">GFile</span></a> *file</code></em>,
                        <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                        <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                        <em class="parameter"><code><a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                        <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Process <em class="parameter"><code>file</code></em>
 and check if media art exists and if it is up to date
with <em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
 provided. Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be
<a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<p>NOTE: This function MAY retrieve media art for
<em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
 combinations. It is not guaranteed and depends
on download services available over DBus at the time.</p>
<p>In cases where download is unavailable, <a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-file" title="media_art_process_file ()"><code class="function">media_art_process_file()</code></a>
will only try to procure a cache for possible media art found in
directories surrounding the location of <em class="parameter"><code>file</code></em>
. If a buffer or
memory chunk needs to be saved to disk which has been retrieved
from an MP3 (for example), you should use
<a class="link" href="libmediaart-MediaArtProcess.html#media-art-process-buffer" title="media_art_process_buffer ()"><code class="function">media_art_process_buffer()</code></a>.</p>
<p>The modification time (mtime) of <em class="parameter"><code>file</code></em>
 is checked against the
cached stored for <em class="parameter"><code>artist</code></em>
 and <em class="parameter"><code>title</code></em>
. If the cache is old or
doesn't exist, it will be updated. What this actually does is
update the mtime of the cache (a symlink) on the disk.</p>
<p>If there is no actual media art stored locally (for example, it's
stored in a directory on a removable device), it is copied locally
(usually to an XDG cache directory).</p>
<p>If <em class="parameter"><code>file</code></em>
 is on a removable filesystem, the media art file will be
saved in a cache on the removable file system rather than on the
host machine.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.6.10"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>The options given for how to process the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>file</p></td>
<td class="parameter_description"><p>File to be processed</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>file</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>file</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> location to store the error occurring, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>
to ignore.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.6.11"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>file</code></em>
could be processed or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.3.0</p>
</div>
<hr>
<div class="refsect2">
<a name="media-art-process-buffer"></a><h3>media_art_process_buffer ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>
media_art_process_buffer (<em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcess" title="struct MediaArtProcess"><span class="type">MediaArtProcess</span></a> *process</code></em>,
                          <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtType" title="enum MediaArtType"><span class="type">MediaArtType</span></a> type</code></em>,
                          <em class="parameter"><code><a class="link" href="libmediaart-MediaArtProcess.html#MediaArtProcessFlags" title="enum MediaArtProcessFlags"><span class="type">MediaArtProcessFlags</span></a> flags</code></em>,
                          <em class="parameter"><code><a href="http://library.gnome.org/devel/gio/unstable/GFile.html"><span class="type">GFile</span></a> *related_file</code></em>,
                          <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#guchar"><span class="type">guchar</span></a> *buffer</code></em>,
                          <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gsize"><span class="type">gsize</span></a> len</code></em>,
                          <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *mime</code></em>,
                          <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *artist</code></em>,
                          <em class="parameter"><code>const <a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gchar"><span class="type">gchar</span></a> *title</code></em>,
                          <em class="parameter"><code><a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> *cancellable</code></em>,
                          <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> **error</code></em>);</pre>
<p>Processes a memory buffer represented by <em class="parameter"><code>buffer</code></em>
 and <em class="parameter"><code>len</code></em>
. If you
have extracted any embedded media art and passed this in as
<em class="parameter"><code>buffer</code></em>
, the image data will be converted to the correct format and
saved in the media art cache.</p>
<p>Either <em class="parameter"><code>artist</code></em>
 OR <em class="parameter"><code>title</code></em>
 can be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>, but they can not both be <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>.</p>
<p>If <em class="parameter"><code>file</code></em>
 is on a removable filesystem, the media art file will be saved in a
cache on the removable file system rather than on the host machine.</p>
<div class="refsect3">
<a name="id-1.3.3.2.7.7.7"></a><h4>Parameters</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>process</p></td>
<td class="parameter_description"><p>Media art process object</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>type</p></td>
<td class="parameter_description"><p>The type of media</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>flags</p></td>
<td class="parameter_description"><p>The options given for how to process the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>related_file</p></td>
<td class="parameter_description"><p>File related to the media art</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>buffer</p></td>
<td class="parameter_description"><p> a buffer containing <em class="parameter"><code>file</code></em>
data, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter points to an array of items."><span class="acronym">array</span></acronym> length=len][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>len</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>buffer</code></em>
, or 0</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>mime</p></td>
<td class="parameter_description"><p>MIME type of <em class="parameter"><code>buffer</code></em>
, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>artist</p></td>
<td class="parameter_description"><p> The artist name <em class="parameter"><code>file</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>title</p></td>
<td class="parameter_description"><p> The title for <em class="parameter"><code>file</code></em>
or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p> optional <a href="http://library.gnome.org/devel/gio/unstable/GCancellable.html"><span class="type">GCancellable</span></a> object, <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a> to
ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>a <a href="http://library.gnome.org/devel/glib/unstable/glib-Error-Reporting.html#GError"><span class="type">GError</span></a> location to store the error occurring, or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#NULL:CAPS"><code class="literal">NULL</code></a>
to ignore.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="id-1.3.3.2.7.7.8"></a><h4>Returns</h4>
<p> <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#TRUE:CAPS"><code class="literal">TRUE</code></a> if <em class="parameter"><code>file</code></em>
could be processed or <a href="http://library.gnome.org/devel/glib/unstable/glib-Standard-Macros.html#FALSE:CAPS"><code class="literal">FALSE</code></a> if <em class="parameter"><code>error</code></em>
is set.</p>
<p></p>
</div>
<p class="since">Since 0.5.0</p>
</div>
</div>
<div class="refsect1">
<a name="libmediaart-MediaArtProcess.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="MediaArtType"></a><h3>enum MediaArtType</h3>
<p>This type categorized the type of media art we're dealing with.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.2.4"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-NONE:CAPS"></a>MEDIA_ART_NONE</p></td>
<td class="enum_member_description">
<p>No media art is available</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ALBUM:CAPS"></a>MEDIA_ART_ALBUM</p></td>
<td class="enum_member_description">
<p>Media art is an album</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-VIDEO:CAPS"></a>MEDIA_ART_VIDEO</p></td>
<td class="enum_member_description">
<p>Media art is a movie or video</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="MediaArtError"></a><h3>enum MediaArtError</h3>
<p>Enumeration values used in errors returned by the
<a class="link" href="libmediaart-MediaArtProcess.html#MediaArtError" title="enum MediaArtError"><span class="type">MediaArtError</span></a> API.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.3.4"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-STORAGE:CAPS"></a>MEDIA_ART_ERROR_NO_STORAGE</p></td>
<td class="enum_member_description">
<p>Storage information is unknown, we
have no knowledge about removable media.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-TITLE:CAPS"></a>MEDIA_ART_ERROR_NO_TITLE</p></td>
<td class="enum_member_description">
<p>Title is required, but was not provided,
or was empty.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-SYMLINK-FAILED:CAPS"></a>MEDIA_ART_ERROR_SYMLINK_FAILED</p></td>
<td class="enum_member_description">
<p>A call to <code class="function">symlink()</code> failed
resulting in the incorrect storage of media art.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-RENAME-FAILED:CAPS"></a>MEDIA_ART_ERROR_RENAME_FAILED</p></td>
<td class="enum_member_description">
<p>File could not be renamed.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-ERROR-NO-CACHE-DIR:CAPS"></a>MEDIA_ART_ERROR_NO_CACHE_DIR</p></td>
<td class="enum_member_description">
<p>This is given when the
XDG_CACHE_HOME directory could not be used to create the
'media-art' subdirectory used for caching media art. This is
usually an initiation error.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.2.0</p>
</div>
<hr>
<div class="refsect2">
<a name="MediaArtProcessFlags"></a><h3>enum MediaArtProcessFlags</h3>
<p>This type categorized the flags used when processing media art.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.4.4"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-PROCESS-FLAGS-NONE:CAPS"></a>MEDIA_ART_PROCESS_FLAGS_NONE</p></td>
<td class="enum_member_description">
<p>Normal operation.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
<tr>
<td class="enum_member_name"><p><a name="MEDIA-ART-PROCESS-FLAGS-FORCE:CAPS"></a>MEDIA_ART_PROCESS_FLAGS_FORCE</p></td>
<td class="enum_member_description">
<p>Force media art to be re-saved to disk even if it already exists and the related file or URI has the same modified time (mtime).</p>
</td>
<td class="enum_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since 0.3.0</p>
</div>
<hr>
<div class="refsect2">
<a name="MediaArtProcess"></a><h3>struct MediaArtProcess</h3>
<pre class="programlisting">struct MediaArtProcess {
	GObject parent;
};
</pre>
<p>A class implementation for processing and extracting media art.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.5.5"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody><tr>
<td class="struct_member_name"><p><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObject"><span class="type">GObject</span></a> <em class="structfield"><code><a name="MediaArtProcess.parent"></a>parent</code></em>;</p></td>
<td class="struct_member_description"><p>parent object</p></td>
<td class="struct_member_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
<hr>
<div class="refsect2">
<a name="MediaArtProcessClass"></a><h3>struct MediaArtProcessClass</h3>
<pre class="programlisting">struct MediaArtProcessClass {
	GObjectClass parent;
};
</pre>
<p>Prototype for the class.</p>
<div class="refsect3">
<a name="id-1.3.3.2.8.6.5"></a><h4>Members</h4>
<div class="informaltable"><table width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody><tr>
<td class="struct_member_name"><p><a href="http://library.gnome.org/devel/gobject/unstable/gobject-The-Base-Object-Type.html#GObjectClass"><span class="type">GObjectClass</span></a> <em class="structfield"><code><a name="MediaArtProcessClass.parent"></a>parent</code></em>;</p></td>
<td class="struct_member_description"><p>parent object class</p></td>
<td class="struct_member_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.21.1</div>
</body>
</html>