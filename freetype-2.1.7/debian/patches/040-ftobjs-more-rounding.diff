--- freetype-2.1.4rc2~/src/base/ftobjs.c	Thu Mar 20 08:04:40 2003
+++ freetype-2.1.4rc2/src/base/ftobjs.c	Fri Mar 21 16:36:16 2003
@@ -1427,17 +1427,17 @@
 
     /* Compute pixel sizes in 26.6 units */
 #ifdef FT_CONFIG_CHESTER_BLUE_SCALE
-    dim_x = ( char_width  * horz_resolution ) / 72;
-    dim_y = ( char_height * vert_resolution ) / 72;
+    dim_x = ( char_width  * horz_resolution + 36 ) / 72; /* round div */
+    dim_y = ( char_height * vert_resolution + 36 ) / 72; /* round div */
 
-    metrics->x_ppem = (FT_UShort)( (dim_x+32) >> 6 );
-    metrics->y_ppem = (FT_UShort)( (dim_y+32) >> 6 );
+    metrics->x_ppem = (FT_UShort)( (dim_x+32) >> 6 ); /* round div */
+    metrics->y_ppem = (FT_UShort)( (dim_y+32) >> 6 ); /* round div */
 #else
-    dim_x = ( ( ( char_width  * horz_resolution ) / 72 ) + 32 ) & -64;
-    dim_y = ( ( ( char_height * vert_resolution ) / 72 ) + 32 ) & -64;
+    dim_x = ( ( char_width  * horz_resolution + (36+32*72) ) / 72 ) & -64; /* round div */
+    dim_y = ( ( char_height * vert_resolution + (36+32*72) ) / 72 ) & -64; /* round div */
 
-    metrics->x_ppem  = (FT_UShort)( dim_x >> 6 );
-    metrics->y_ppem  = (FT_UShort)( dim_y >> 6 );
+    metrics->x_ppem  = (FT_UShort)( dim_x >> 6 ); /* floor div, already rounded */
+    metrics->y_ppem  = (FT_UShort)( dim_y >> 6 ); /* floor div, already rounded */
 #endif
 
     metrics->x_scale = 0x10000L;
