<html lang="en">
<head>
<title>Kerberos V5 System Administrator's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Kerberos V5 System Administrator's Guide">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
Node:<a name="Restoring%20a%20Kerberos%20Database%20from%20a%20Dump%20File">Restoring a Kerberos Database from a Dump File</a>,
Next:<a rel="next" accesskey="n" href="Creating-a-Stash-File.html#Creating%20a%20Stash%20File">Creating a Stash File</a>,
Previous:<a rel="previous" accesskey="p" href="Dumping-a-Kerberos-Database-to-a-File.html#Dumping%20a%20Kerberos%20Database%20to%20a%20File">Dumping a Kerberos Database to a File</a>,
Up:<a rel="up" accesskey="u" href="Global-Operations-on-the-Kerberos-Database.html#Global%20Operations%20on%20the%20Kerberos%20Database">Global Operations on the Kerberos Database</a>
<hr><br>
</div>

<h4 class="subsection">Restoring a Kerberos Database from a Dump File</h4>

<p>To restore a Kerberos database dump from a file, use the
<code>kdb5_util</code> <code>load</code> command on one of the KDCs.  The syntax
is:

<pre class="smallexample">     <b>kdb5_util load</b> [<b>-old</b>] [<b>-b6</b>] [<b>-b7</b>] [<b>-ov</b>] [<b>-verbose</b>]
     [<b>-update</b>] [<b>-hash</b>] <i>dumpfilename</i> <i>dbname</i> [<i>admin_dbname</i>]
     </pre>

<p>The <code>kdb5_util load</code> command takes the following options:

     <dl>
<dt><b>-old</b>
     <dd>requires the dump to be in the Kerberos 5 Beta 5 and earlier dump format
("kdb5_edit load_dump version 2.0"). 
<dt><b>-b6</b>
     <dd>requires the dump to be in the Kerberos 5 Beta 6 format ("kdb5_edit
load_dump version 3.0"). 
<dt><b>-b7</b>
     <dd>requires the dump to be in the Kerberos 5 Beta 7 format ("kdb5_edit
load_dump version 4"). 
<dt><b>-ov</b>
     <dd>requires the dump to be in ovsec_adm_export format. 
<dt><b>-verbose</b>
     <dd>causes the name of each principal and policy to be printed as it is
loaded. 
<dt><b>-update</b>
     <dd>causes records from the dump file to be updated in or added to the
existing database.  This is useful in conjunction with an
ovsec_adm_export format dump if you want to preserve per-principal
policy information, since the current default format does not contain
this data. 
<dt><b>-hash</b>
     <dd>causes the database to be stored as a hash rather than a binary tree. 
</dl>

<p>For example:

<pre class="smallexample">     <b>shell%</b> kdb5_util load dumpfile principal
     <b>shell%</b>
     </pre>

<pre class="smallexample">     <b>shell%</b> kdb5_util load -update dumpfile principal
     <b>shell%</b>
     </pre>

<p>If the database file exists, and the <b>-update</b> flag was not given,
<code>kdb5_util</code> will overwrite the existing database.

</body></html>

