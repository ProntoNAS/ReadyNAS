<html lang="en">
<head>
<title>Kerberos V5 System Administrator's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Kerberos V5 System Administrator's Guide">
<meta name="generator" content="makeinfo 4.5">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home">
</head>
<body>
<div class="node">
<p>
Node:<a name="Creating%20and%20Destroying%20a%20Kerberos%20Database">Creating and Destroying a Kerberos Database</a>,
Previous:<a rel="previous" accesskey="p" href="Creating-a-Stash-File.html#Creating%20a%20Stash%20File">Creating a Stash File</a>,
Up:<a rel="up" accesskey="u" href="Global-Operations-on-the-Kerberos-Database.html#Global%20Operations%20on%20the%20Kerberos%20Database">Global Operations on the Kerberos Database</a>
<hr><br>
</div>

<h4 class="subsection">Creating and Destroying a Kerberos Database</h4>

<p>If you need to create a new Kerberos database, use the <code>kdb5_util</code>
<code>create</code> command.  The syntax is:

<pre class="smallexample">     <b>kdb5_util create</b> [<b>-s</b>]
     </pre>

<p>If you specify the <code>-s</code> option, <code>kdb5_util</code> will stash a copy
of the master key in a stash file.  (See <a href="Creating-a-Stash-File.html#Creating%20a%20Stash%20File">Creating a Stash File</a>.)  For
example:

<pre class="smallexample">     <b>shell%</b> /usr/local/sbin/kdb5_util -r ATHENA.MIT.EDU create -s
     <b>kdb5_util: No such file or directory while setting active database to
     =&gt; '/usr/local/var/krb5kdc/principal'
     Initializing database '/usr/local/var/krb5kdc/principal' for
     =&gt; realm 'ATHENA.MIT.EDU',
     master key name 'K/M@ATHENA.MIT.EDU'
     You will be prompted for the database Master Password.
     It is important that you NOT FORGET this password.</b>
     <b>Enter KDC database master key:</b>  <i>&lt;= Type the master password.</i>
     <b>Re-enter KDC database master key to verify:</b>  <i>&lt;= Type it again.</i>
     <b>shell%</b>
     </pre>

<p>If you need to destroy the current Kerberos database, use the
<code>kdb5_util</code> <code>destroy</code> command.  The syntax is:

<pre class="smallexample">     <b>kdb5_util destroy</b> [<b>-f</b>]
     </pre>

<p>The <code>destroy</code> command destroys the database, first overwriting the
disk sectors and then unlinking the files.  If you specify the
<code>-f</code> option, <code>kdb5_util</code> will not prompt you for a
confirmation before destroying the database.

<pre class="smallexample">     <b>shell%</b> /usr/local/sbin/kdb5_util -r ATHENA.MIT.EDU destroy
     <b>kdb5_util: Deleting KDC database stored in /usr/local/var/krb5kdc/principal, are you sure
     (type yes to confirm)?</b> <i>&lt;== yes</i>
     <b>OK, deleting database '/usr/local/var/krb5kdc/principal'...</b>
     
     <b>shell%</b>
     </pre>

</body></html>

