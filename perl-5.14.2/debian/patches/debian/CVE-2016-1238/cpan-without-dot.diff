From f4cd6dcf757b272f96feb9ea623c63d11b5272d9 Mon Sep 17 00:00:00 2001
From: Todd Rinaldo <toddr@cpan.org>
Date: Thu, 31 Mar 2016 17:04:47 -0500
Subject: Set PERL_USE_UNSAFE_INC for cpan usage

This change allows the majority of Perl modules to build/test/install from the
cpan client without having to modify them.

[Backported to 5.14 by Dominic Hargreaves]

Bug: https://rt.perl.org/Public/Bug/Display.html?id=127810
Patch-Name: debian/CVE-2016-1238/cpan-without-dot.diff
---
 cpan/CPAN/scripts/cpan | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/cpan/CPAN/scripts/cpan b/cpan/CPAN/scripts/cpan
index 8d47c2f..71d3e56 100644
--- a/cpan/CPAN/scripts/cpan
+++ b/cpan/CPAN/scripts/cpan
@@ -3,6 +3,11 @@ BEGIN { pop @INC if $INC[-1] eq '.' }
 use strict;
 use vars qw($VERSION);
 
+BEGIN {
+    # make sure we can install any modules from CPAN without patching them
+    $ENV{PERL_USE_UNSAFE_INC} = 1;
+}
+
 use App::Cpan;
 $VERSION = '1.57';
 
