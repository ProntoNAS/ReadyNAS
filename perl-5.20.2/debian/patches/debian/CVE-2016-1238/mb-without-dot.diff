From fe67e31bb17f54b6dae8ca495e36edcd517f0bb6 Mon Sep 17 00:00:00 2001
From: Niko Tyni <ntyni@debian.org>
Date: Fri, 8 Jul 2016 13:42:02 +0200
Subject: Make Module::Build set PERL_USE_UNSAFE_INC

Author: Todd Rinaldo <toddr@cpan.org>
Origin: https://gist.githubusercontent.com/toddr/d77d8d5fa9caa8f96b7758a126caa4dc/raw/3b1a327efdd9a6babf5eed8fb9c241a6d4909be6/fix.patch
Patch-Name: debian/CVE-2016-1238/mb-without-dot.diff
---
 cpan/Module-Build/lib/Module/Build/Base.pm | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/cpan/Module-Build/lib/Module/Build/Base.pm b/cpan/Module-Build/lib/Module/Build/Base.pm
index 4422cd432..4a8fb92c4 100644
--- a/cpan/Module-Build/lib/Module/Build/Base.pm
+++ b/cpan/Module-Build/lib/Module/Build/Base.pm
@@ -1860,6 +1860,8 @@ BEGIN {
     (
 $quoted_INC
     );
+  push \@INC, "." unless grep { \$_ eq "." } \@INC; # Force my process to include . in \@INC.
+  \$ENV{"PERL_USE_UNSAFE_INC"} = 1; # Force all child processes to include . in \@INC.
 }
 
 close(*DATA) unless eof(*DATA); # ensure no open handles to this script
